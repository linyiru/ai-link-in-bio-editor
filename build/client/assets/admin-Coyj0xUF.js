import{j as g,r as C,R as V,w as qr,u as Br,b as Hr}from"./chunk-UH6JLGW7-BWGKVKdm.js";import{D as $r}from"./dataService-Bzs1NMx2.js";import{X as Jr,S as Yr,L as Mi,C as Wr,a as Bn,g as Ai,U as Hn,b as Kr,c as Ot,d as zr,e as Ri,f as Xr,F as Or,D as Qr,B as Zr}from"./BioLinkPage-DqpxeZS-.js";import{a as nt}from"./index-DvEMbgo5.js";const jr=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),es=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),ts=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h8a2 2 0 002-2v-4a2 2 0 00-2-2h-8a2 2 0 00-2 2v4a2 2 0 002 2z"})}),ns=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),os=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),is=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),rs=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m1-12a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1h-6a1 1 0 01-1-1V6zM17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),ss=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})}),ls=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 8.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 8.25 20.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6A2.25 2.25 0 0 1 15.75 3.75h2.25A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25A2.25 2.25 0 0 1 13.5 8.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25h2.25a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})}),as=({className:t})=>g.jsxs("svg",{className:t,viewBox:"0 0 20 20",fill:"currentColor",children:[g.jsx("circle",{cx:"7",cy:"5",r:"1.5"}),g.jsx("circle",{cx:"13",cy:"5",r:"1.5"}),g.jsx("circle",{cx:"7",cy:"10",r:"1.5"}),g.jsx("circle",{cx:"13",cy:"10",r:"1.5"}),g.jsx("circle",{cx:"7",cy:"15",r:"1.5"}),g.jsx("circle",{cx:"13",cy:"15",r:"1.5"})]});function us(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return C.useMemo(()=>o=>{e.forEach(s=>s(o))},e)}const Vt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Be(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Tn(t){return"nodeType"in t}function W(t){var e,n;return t?Be(t)?t:Tn(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function xn(t){const{Document:e}=W(t);return t instanceof e}function ct(t){return Be(t)?!1:t instanceof W(t).HTMLElement}function _i(t){return t instanceof W(t).SVGElement}function He(t){return t?Be(t)?t.document:Tn(t)?xn(t)?t:ct(t)||_i(t)?t.ownerDocument:document:document:document}const ie=Vt?C.useLayoutEffect:C.useEffect;function Gt(t){const e=C.useRef(t);return ie(()=>{e.current=t}),C.useCallback(function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e.current==null?void 0:e.current(...o)},[])}function cs(){const t=C.useRef(null),e=C.useCallback((o,s)=>{t.current=setInterval(o,s)},[]),n=C.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function lt(t,e){e===void 0&&(e=[t]);const n=C.useRef(t);return ie(()=>{n.current!==t&&(n.current=t)},e),n}function dt(t,e){const n=C.useRef();return C.useMemo(()=>{const o=t(n.current);return n.current=o,o},[...e])}function _t(t){const e=Gt(t),n=C.useRef(null),o=C.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,o]}function wt(t){const e=C.useRef();return C.useEffect(()=>{e.current=t},[t]),e.current}let Qt={};function ft(t,e){return C.useMemo(()=>{if(e)return e;const n=Qt[t]==null?0:Qt[t]+1;return Qt[t]=n,t+"-"+n},[t,e])}function wi(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return o.reduce((l,a)=>{const u=Object.entries(a);for(const[d,c]of u){const f=l[d];f!=null&&(l[d]=f+t*c)}return l},{...e})}}const Ue=wi(1),at=wi(-1);function ds(t){return"clientX"in t&&"clientY"in t}function qt(t){if(!t)return!1;const{KeyboardEvent:e}=W(t.target);return e&&t instanceof e}function fs(t){if(!t)return!1;const{TouchEvent:e}=W(t.target);return e&&t instanceof e}function Pt(t){if(fs(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return ds(t)?{x:t.clientX,y:t.clientY}:null}const Me=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Me.Translate.toString(t),Me.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:o}=t;return e+" "+n+"ms "+o}}}),$n="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ps(t){return t.matches($n)?t:t.querySelector($n)}const ms={display:"none"};function gs(t){let{id:e,value:n}=t;return V.createElement("div",{id:e,style:ms},n)}function hs(t){let{id:e,announcement:n,ariaLiveType:o="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return V.createElement("div",{id:e,style:s,role:"status","aria-live":o,"aria-atomic":!0},n)}function ys(){const[t,e]=C.useState("");return{announce:C.useCallback(o=>{o!=null&&e(o)},[]),announcement:t}}const Pi=C.createContext(null);function vs(t){const e=C.useContext(Pi);C.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Cs(){const[t]=C.useState(()=>new Set),e=C.useCallback(o=>(t.add(o),()=>t.delete(o)),[t]);return[C.useCallback(o=>{let{type:s,event:l}=o;t.forEach(a=>{var u;return(u=a[s])==null?void 0:u.call(a,l)})},[t]),e]}const Ts={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},xs={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Ss(t){let{announcements:e=xs,container:n,hiddenTextDescribedById:o,screenReaderInstructions:s=Ts}=t;const{announce:l,announcement:a}=ys(),u=ft("DndLiveRegion"),[d,c]=C.useState(!1);if(C.useEffect(()=>{c(!0)},[]),vs(C.useMemo(()=>({onDragStart(p){let{active:m}=p;l(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:h}=p;e.onDragMove&&l(e.onDragMove({active:m,over:h}))},onDragOver(p){let{active:m,over:h}=p;l(e.onDragOver({active:m,over:h}))},onDragEnd(p){let{active:m,over:h}=p;l(e.onDragEnd({active:m,over:h}))},onDragCancel(p){let{active:m,over:h}=p;l(e.onDragCancel({active:m,over:h}))}}),[l,e])),!d)return null;const f=V.createElement(V.Fragment,null,V.createElement(gs,{id:o,value:s.draggable}),V.createElement(hs,{id:u,announcement:a}));return n?nt.createPortal(f,n):f}var q;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(q||(q={}));function Dt(){}function Jn(t,e){return C.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Es(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return C.useMemo(()=>[...e].filter(o=>o!=null),[...e])}const re=Object.freeze({x:0,y:0});function Di(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Is(t,e){const n=Pt(t);if(!n)return"0 0";const o={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return o.x+"% "+o.y+"%"}function Ni(t,e){let{data:{value:n}}=t,{data:{value:o}}=e;return n-o}function Ms(t,e){let{data:{value:n}}=t,{data:{value:o}}=e;return o-n}function Yn(t){let{left:e,top:n,height:o,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+o},{x:e+s,y:n+o}]}function bi(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Wn(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const As=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:o}=t;const s=Wn(e,e.left,e.top),l=[];for(const a of o){const{id:u}=a,d=n.get(u);if(d){const c=Di(Wn(d),s);l.push({id:u,data:{droppableContainer:a,value:c}})}}return l.sort(Ni)},Rs=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:o}=t;const s=Yn(e),l=[];for(const a of o){const{id:u}=a,d=n.get(u);if(d){const c=Yn(d),f=s.reduce((m,h,v)=>m+Di(c[v],h),0),p=Number((f/4).toFixed(4));l.push({id:u,data:{droppableContainer:a,value:p}})}}return l.sort(Ni)};function _s(t,e){const n=Math.max(e.top,t.top),o=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),l=Math.min(e.top+e.height,t.top+t.height),a=s-o,u=l-n;if(o<s&&n<l){const d=e.width*e.height,c=t.width*t.height,f=a*u,p=f/(d+c-f);return Number(p.toFixed(4))}return 0}const ws=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:o}=t;const s=[];for(const l of o){const{id:a}=l,u=n.get(a);if(u){const d=_s(u,e);d>0&&s.push({id:a,data:{droppableContainer:l,value:d}})}}return s.sort(Ms)};function Ps(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function ki(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:re}function Ds(t){return function(n){for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return s.reduce((a,u)=>({...a,top:a.top+t*u.y,bottom:a.bottom+t*u.y,left:a.left+t*u.x,right:a.right+t*u.x}),{...n})}}const Ns=Ds(1);function Li(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function bs(t,e,n){const o=Li(e);if(!o)return t;const{scaleX:s,scaleY:l,x:a,y:u}=o,d=t.left-a-(1-s)*parseFloat(n),c=t.top-u-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?t.width/s:t.width,p=l?t.height/l:t.height;return{width:f,height:p,top:c,right:d+f,bottom:c+p,left:d}}const ks={ignoreTransform:!1};function $e(t,e){e===void 0&&(e=ks);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:f}=W(t).getComputedStyle(t);c&&(n=bs(n,c,f))}const{top:o,left:s,width:l,height:a,bottom:u,right:d}=n;return{top:o,left:s,width:l,height:a,bottom:u,right:d}}function Kn(t){return $e(t,{ignoreTransform:!0})}function Ls(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Fs(t,e){return e===void 0&&(e=W(t).getComputedStyle(t)),e.position==="fixed"}function Us(t,e){e===void 0&&(e=W(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=e[s];return typeof l=="string"?n.test(l):!1})}function Bt(t,e){const n=[];function o(s){if(e!=null&&n.length>=e||!s)return n;if(xn(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ct(s)||_i(s)||n.includes(s))return n;const l=W(t).getComputedStyle(s);return s!==t&&Us(s,l)&&n.push(s),Fs(s,l)?n:o(s.parentNode)}return t?o(t):n}function Fi(t){const[e]=Bt(t,1);return e??null}function Zt(t){return!Vt||!t?null:Be(t)?t:Tn(t)?xn(t)||t===He(t).scrollingElement?window:ct(t)?t:null:null}function Ui(t){return Be(t)?t.scrollX:t.scrollLeft}function Vi(t){return Be(t)?t.scrollY:t.scrollTop}function sn(t){return{x:Ui(t),y:Vi(t)}}var B;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(B||(B={}));function Gi(t){return!Vt||!t?!1:t===document.scrollingElement}function qi(t){const e={x:0,y:0},n=Gi(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},o={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,l=t.scrollLeft<=e.x,a=t.scrollTop>=o.y,u=t.scrollLeft>=o.x;return{isTop:s,isLeft:l,isBottom:a,isRight:u,maxScroll:o,minScroll:e}}const Vs={x:.2,y:.2};function Gs(t,e,n,o,s){let{top:l,left:a,right:u,bottom:d}=n;o===void 0&&(o=10),s===void 0&&(s=Vs);const{isTop:c,isBottom:f,isLeft:p,isRight:m}=qi(t),h={x:0,y:0},v={x:0,y:0},y={height:e.height*s.y,width:e.width*s.x};return!c&&l<=e.top+y.height?(h.y=B.Backward,v.y=o*Math.abs((e.top+y.height-l)/y.height)):!f&&d>=e.bottom-y.height&&(h.y=B.Forward,v.y=o*Math.abs((e.bottom-y.height-d)/y.height)),!m&&u>=e.right-y.width?(h.x=B.Forward,v.x=o*Math.abs((e.right-y.width-u)/y.width)):!p&&a<=e.left+y.width&&(h.x=B.Backward,v.x=o*Math.abs((e.left+y.width-a)/y.width)),{direction:h,speed:v}}function qs(t){if(t===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:e,left:n,right:o,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:o,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Bi(t){return t.reduce((e,n)=>Ue(e,sn(n)),re)}function Bs(t){return t.reduce((e,n)=>e+Ui(n),0)}function Hs(t){return t.reduce((e,n)=>e+Vi(n),0)}function Hi(t,e){if(e===void 0&&(e=$e),!t)return;const{top:n,left:o,bottom:s,right:l}=e(t);Fi(t)&&(s<=0||l<=0||n>=window.innerHeight||o>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const $s=[["x",["left","right"],Bs],["y",["top","bottom"],Hs]];class Sn{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const o=Bt(n),s=Bi(o);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,a,u]of $s)for(const d of a)Object.defineProperty(this,d,{get:()=>{const c=u(o),f=s[l]-c;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ot{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var o;return(o=this.target)==null?void 0:o.removeEventListener(...n)})},this.target=e}add(e,n,o){var s;(s=this.target)==null||s.addEventListener(e,n,o),this.listeners.push([e,n,o])}}function Js(t){const{EventTarget:e}=W(t);return t instanceof e?t:He(t)}function jt(t,e){const n=Math.abs(t.x),o=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+o**2)>e:"x"in e&&"y"in e?n>e.x&&o>e.y:"x"in e?n>e.x:"y"in e?o>e.y:!1}var ne;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ne||(ne={}));function zn(t){t.preventDefault()}function Ys(t){t.stopPropagation()}var k;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(k||(k={}));const $i={start:[k.Space,k.Enter],cancel:[k.Esc],end:[k.Space,k.Enter,k.Tab]},Ws=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case k.Right:return{...n,x:n.x+25};case k.Left:return{...n,x:n.x-25};case k.Down:return{...n,y:n.y+25};case k.Up:return{...n,y:n.y-25}}};class En{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new ot(He(n)),this.windowListeners=new ot(W(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ne.Resize,this.handleCancel),this.windowListeners.add(ne.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ne.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,o=e.node.current;o&&Hi(o),n(re)}handleKeyDown(e){if(qt(e)){const{active:n,context:o,options:s}=this.props,{keyboardCodes:l=$i,coordinateGetter:a=Ws,scrollBehavior:u="smooth"}=s,{code:d}=e;if(l.end.includes(d)){this.handleEnd(e);return}if(l.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:c}=o.current,f=c?{x:c.left,y:c.top}:re;this.referenceCoordinates||(this.referenceCoordinates=f);const p=a(e,{active:n,context:o.current,currentCoordinates:f});if(p){const m=at(p,f),h={x:0,y:0},{scrollableAncestors:v}=o.current;for(const y of v){const T=e.code,{isTop:E,isRight:I,isLeft:M,isBottom:R,maxScroll:S,minScroll:_}=qi(y),A=qs(y),P={x:Math.min(T===k.Right?A.right-A.width/2:A.right,Math.max(T===k.Right?A.left:A.left+A.width/2,p.x)),y:Math.min(T===k.Down?A.bottom-A.height/2:A.bottom,Math.max(T===k.Down?A.top:A.top+A.height/2,p.y))},w=T===k.Right&&!I||T===k.Left&&!M,b=T===k.Down&&!R||T===k.Up&&!E;if(w&&P.x!==p.x){const N=y.scrollLeft+m.x,G=T===k.Right&&N<=S.x||T===k.Left&&N>=_.x;if(G&&!m.y){y.scrollTo({left:N,behavior:u});return}G?h.x=y.scrollLeft-N:h.x=T===k.Right?y.scrollLeft-S.x:y.scrollLeft-_.x,h.x&&y.scrollBy({left:-h.x,behavior:u});break}else if(b&&P.y!==p.y){const N=y.scrollTop+m.y,G=T===k.Down&&N<=S.y||T===k.Up&&N>=_.y;if(G&&!m.x){y.scrollTo({top:N,behavior:u});return}G?h.y=y.scrollTop-N:h.y=T===k.Down?y.scrollTop-S.y:y.scrollTop-_.y,h.y&&y.scrollBy({top:-h.y,behavior:u});break}}this.handleMove(e,Ue(at(p,this.referenceCoordinates),h))}}}handleMove(e,n){const{onMove:o}=this.props;e.preventDefault(),o(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}En.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:o=$i,onActivation:s}=e,{active:l}=n;const{code:a}=t.nativeEvent;if(o.start.includes(a)){const u=l.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Xn(t){return!!(t&&"distance"in t)}function On(t){return!!(t&&"delay"in t)}class In{constructor(e,n,o){var s;o===void 0&&(o=Js(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:l}=e,{target:a}=l;this.props=e,this.events=n,this.document=He(a),this.documentListeners=new ot(this.document),this.listeners=new ot(o),this.windowListeners=new ot(W(a)),this.initialCoordinates=(s=Pt(l))!=null?s:re,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:o}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ne.Resize,this.handleCancel),this.windowListeners.add(ne.DragStart,zn),this.windowListeners.add(ne.VisibilityChange,this.handleCancel),this.windowListeners.add(ne.ContextMenu,zn),this.documentListeners.add(ne.Keydown,this.handleKeydown),n){if(o!=null&&o({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(On(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Xn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:o,onPending:s}=this.props;s(o,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ne.Click,Ys,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ne.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:o,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:u}}=l;if(!s)return;const d=(n=Pt(e))!=null?n:re,c=at(s,d);if(!o&&u){if(Xn(u)){if(u.tolerance!=null&&jt(c,u.tolerance))return this.handleCancel();if(jt(c,u.distance))return this.handleStart()}if(On(u)&&jt(c,u.tolerance))return this.handleCancel();this.handlePending(u,c);return}e.cancelable&&e.preventDefault(),a(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===k.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Ks={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Mn extends In{constructor(e){const{event:n}=e,o=He(n.target);super(e,Ks,o)}}Mn.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;return!n.isPrimary||n.button!==0?!1:(o==null||o({event:n}),!0)}}];const zs={move:{name:"mousemove"},end:{name:"mouseup"}};var ln;(function(t){t[t.RightClick=2]="RightClick"})(ln||(ln={}));class Xs extends In{constructor(e){super(e,zs,He(e.event.target))}}Xs.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;return n.button===ln.RightClick?!1:(o==null||o({event:n}),!0)}}];const en={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Os extends In{constructor(e){super(e,en)}static setup(){return window.addEventListener(en.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(en.move.name,e)};function e(){}}}Os.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;const{touches:s}=n;return s.length>1?!1:(o==null||o({event:n}),!0)}}];var it;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(it||(it={}));var Nt;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Nt||(Nt={}));function Qs(t){let{acceleration:e,activator:n=it.Pointer,canScroll:o,draggingRect:s,enabled:l,interval:a=5,order:u=Nt.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:f,delta:p,threshold:m}=t;const h=js({delta:p,disabled:!l}),[v,y]=cs(),T=C.useRef({x:0,y:0}),E=C.useRef({x:0,y:0}),I=C.useMemo(()=>{switch(n){case it.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case it.DraggableRect:return s}},[n,s,d]),M=C.useRef(null),R=C.useCallback(()=>{const _=M.current;if(!_)return;const A=T.current.x*E.current.x,P=T.current.y*E.current.y;_.scrollBy(A,P)},[]),S=C.useMemo(()=>u===Nt.TreeOrder?[...c].reverse():c,[u,c]);C.useEffect(()=>{if(!l||!c.length||!I){y();return}for(const _ of S){if((o==null?void 0:o(_))===!1)continue;const A=c.indexOf(_),P=f[A];if(!P)continue;const{direction:w,speed:b}=Gs(_,P,I,e,m);for(const N of["x","y"])h[N][w[N]]||(b[N]=0,w[N]=0);if(b.x>0||b.y>0){y(),M.current=_,v(R,a),T.current=b,E.current=w;return}}T.current={x:0,y:0},E.current={x:0,y:0},y()},[e,R,o,y,l,a,JSON.stringify(I),JSON.stringify(h),v,c,S,f,JSON.stringify(m)])}const Zs={x:{[B.Backward]:!1,[B.Forward]:!1},y:{[B.Backward]:!1,[B.Forward]:!1}};function js(t){let{delta:e,disabled:n}=t;const o=wt(e);return dt(s=>{if(n||!o||!s)return Zs;const l={x:Math.sign(e.x-o.x),y:Math.sign(e.y-o.y)};return{x:{[B.Backward]:s.x[B.Backward]||l.x===-1,[B.Forward]:s.x[B.Forward]||l.x===1},y:{[B.Backward]:s.y[B.Backward]||l.y===-1,[B.Forward]:s.y[B.Forward]||l.y===1}}},[n,e,o])}function el(t,e){const n=e!=null?t.get(e):void 0,o=n?n.node.current:null;return dt(s=>{var l;return e==null?null:(l=o??s)!=null?l:null},[o,e])}function tl(t,e){return C.useMemo(()=>t.reduce((n,o)=>{const{sensor:s}=o,l=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,o)}));return[...n,...l]},[]),[t,e])}var ut;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ut||(ut={}));var an;(function(t){t.Optimized="optimized"})(an||(an={}));const Qn=new Map;function nl(t,e){let{dragging:n,dependencies:o,config:s}=e;const[l,a]=C.useState(null),{frequency:u,measure:d,strategy:c}=s,f=C.useRef(t),p=T(),m=lt(p),h=C.useCallback(function(E){E===void 0&&(E=[]),!m.current&&a(I=>I===null?E:I.concat(E.filter(M=>!I.includes(M))))},[m]),v=C.useRef(null),y=dt(E=>{if(p&&!n)return Qn;if(!E||E===Qn||f.current!==t||l!=null){const I=new Map;for(let M of t){if(!M)continue;if(l&&l.length>0&&!l.includes(M.id)&&M.rect.current){I.set(M.id,M.rect.current);continue}const R=M.node.current,S=R?new Sn(d(R),R):null;M.rect.current=S,S&&I.set(M.id,S)}return I}return E},[t,l,n,p,d]);return C.useEffect(()=>{f.current=t},[t]),C.useEffect(()=>{p||h()},[n,p]),C.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),C.useEffect(()=>{p||typeof u!="number"||v.current!==null||(v.current=setTimeout(()=>{h(),v.current=null},u))},[u,p,h,...o]),{droppableRects:y,measureDroppableContainers:h,measuringScheduled:l!=null};function T(){switch(c){case ut.Always:return!1;case ut.BeforeDragging:return n;default:return!n}}}function An(t,e){return dt(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function ol(t,e){return An(t,e)}function il(t){let{callback:e,disabled:n}=t;const o=Gt(e),s=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(o)},[o,n]);return C.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Ht(t){let{callback:e,disabled:n}=t;const o=Gt(e),s=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(o)},[n]);return C.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function rl(t){return new Sn($e(t),t)}function Zn(t,e,n){e===void 0&&(e=rl);const[o,s]=C.useState(null);function l(){s(d=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=d??n)!=null?c:null}const f=e(t);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const a=il({callback(d){if(t)for(const c of d){const{type:f,target:p}=c;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){l();break}}}}),u=Ht({callback:l});return ie(()=>{l(),t?(u==null||u.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),a==null||a.disconnect())},[t]),o}function sl(t){const e=An(t);return ki(t,e)}const jn=[];function ll(t){const e=C.useRef(t),n=dt(o=>t?o&&o!==jn&&t&&e.current&&t.parentNode===e.current.parentNode?o:Bt(t):jn,[t]);return C.useEffect(()=>{e.current=t},[t]),n}function al(t){const[e,n]=C.useState(null),o=C.useRef(t),s=C.useCallback(l=>{const a=Zt(l.target);a&&n(u=>u?(u.set(a,sn(a)),new Map(u)):null)},[]);return C.useEffect(()=>{const l=o.current;if(t!==l){a(l);const u=t.map(d=>{const c=Zt(d);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,sn(c)]):null}).filter(d=>d!=null);n(u.length?new Map(u):null),o.current=t}return()=>{a(t),a(l)};function a(u){u.forEach(d=>{const c=Zt(d);c==null||c.removeEventListener("scroll",s)})}},[s,t]),C.useMemo(()=>t.length?e?Array.from(e.values()).reduce((l,a)=>Ue(l,a),re):Bi(t):re,[t,e])}function eo(t,e){e===void 0&&(e=[]);const n=C.useRef(null);return C.useEffect(()=>{n.current=null},e),C.useEffect(()=>{const o=t!==re;o&&!n.current&&(n.current=t),!o&&n.current&&(n.current=null)},[t]),n.current?at(t,n.current):re}function ul(t){C.useEffect(()=>{if(!Vt)return;const e=t.map(n=>{let{sensor:o}=n;return o.setup==null?void 0:o.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function cl(t,e){return C.useMemo(()=>t.reduce((n,o)=>{let{eventName:s,handler:l}=o;return n[s]=a=>{l(a,e)},n},{}),[t,e])}function Ji(t){return C.useMemo(()=>t?Ls(t):null,[t])}const to=[];function dl(t,e){e===void 0&&(e=$e);const[n]=t,o=Ji(n?W(n):null),[s,l]=C.useState(to);function a(){l(()=>t.length?t.map(d=>Gi(d)?o:new Sn(e(d),d)):to)}const u=Ht({callback:a});return ie(()=>{u==null||u.disconnect(),a(),t.forEach(d=>u==null?void 0:u.observe(d))},[t]),s}function Yi(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ct(e)?e:t}function fl(t){let{measure:e}=t;const[n,o]=C.useState(null),s=C.useCallback(c=>{for(const{target:f}of c)if(ct(f)){o(p=>{const m=e(f);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),l=Ht({callback:s}),a=C.useCallback(c=>{const f=Yi(c);l==null||l.disconnect(),f&&(l==null||l.observe(f)),o(f?e(f):null)},[e,l]),[u,d]=_t(a);return C.useMemo(()=>({nodeRef:u,rect:n,setRef:d}),[n,u,d])}const pl=[{sensor:Mn,options:{}},{sensor:En,options:{}}],ml={current:{}},It={draggable:{measure:Kn},droppable:{measure:Kn,strategy:ut.WhileDragging,frequency:an.Optimized},dragOverlay:{measure:$e}};class rt extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,o;return(n=(o=this.get(e))==null?void 0:o.node.current)!=null?n:void 0}}const gl={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Dt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:It,measureDroppableContainers:Dt,windowRect:null,measuringScheduled:!1},Wi={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Dt,draggableNodes:new Map,over:null,measureDroppableContainers:Dt},pt=C.createContext(Wi),Ki=C.createContext(gl);function hl(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rt}}}function yl(t,e){switch(e.type){case q.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case q.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case q.DragEnd:case q.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case q.RegisterDroppable:{const{element:n}=e,{id:o}=n,s=new rt(t.droppable.containers);return s.set(o,n),{...t,droppable:{...t.droppable,containers:s}}}case q.SetDroppableDisabled:{const{id:n,key:o,disabled:s}=e,l=t.droppable.containers.get(n);if(!l||o!==l.key)return t;const a=new rt(t.droppable.containers);return a.set(n,{...l,disabled:s}),{...t,droppable:{...t.droppable,containers:a}}}case q.UnregisterDroppable:{const{id:n,key:o}=e,s=t.droppable.containers.get(n);if(!s||o!==s.key)return t;const l=new rt(t.droppable.containers);return l.delete(n),{...t,droppable:{...t.droppable,containers:l}}}default:return t}}function vl(t){let{disabled:e}=t;const{active:n,activatorEvent:o,draggableNodes:s}=C.useContext(pt),l=wt(o),a=wt(n==null?void 0:n.id);return C.useEffect(()=>{if(!e&&!o&&l&&a!=null){if(!qt(l)||document.activeElement===l.target)return;const u=s.get(a);if(!u)return;const{activatorNode:d,node:c}=u;if(!d.current&&!c.current)return;requestAnimationFrame(()=>{for(const f of[d.current,c.current]){if(!f)continue;const p=ps(f);if(p){p.focus();break}}})}},[o,e,s,a,l]),null}function zi(t,e){let{transform:n,...o}=e;return t!=null&&t.length?t.reduce((s,l)=>l({transform:s,...o}),n):n}function Cl(t){return C.useMemo(()=>({draggable:{...It.draggable,...t==null?void 0:t.draggable},droppable:{...It.droppable,...t==null?void 0:t.droppable},dragOverlay:{...It.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Tl(t){let{activeNode:e,measure:n,initialRect:o,config:s=!0}=t;const l=C.useRef(!1),{x:a,y:u}=typeof s=="boolean"?{x:s,y:s}:s;ie(()=>{if(!a&&!u||!e){l.current=!1;return}if(l.current||!o)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const f=n(c),p=ki(f,o);if(a||(p.x=0),u||(p.y=0),l.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=Fi(c);m&&m.scrollBy({top:p.y,left:p.x})}},[e,a,u,o,n])}const $t=C.createContext({...re,scaleX:1,scaleY:1});var Ee;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ee||(Ee={}));const xl=C.memo(function(e){var n,o,s,l;let{id:a,accessibility:u,autoScroll:d=!0,children:c,sensors:f=pl,collisionDetection:p=ws,measuring:m,modifiers:h,...v}=e;const y=C.useReducer(yl,void 0,hl),[T,E]=y,[I,M]=Cs(),[R,S]=C.useState(Ee.Uninitialized),_=R===Ee.Initialized,{draggable:{active:A,nodes:P,translate:w},droppable:{containers:b}}=T,N=A!=null?P.get(A):null,G=C.useRef({initial:null,translated:null}),K=C.useMemo(()=>{var $;return A!=null?{id:A,data:($=N==null?void 0:N.data)!=null?$:ml,rect:G}:null},[A,N]),X=C.useRef(null),[Y,he]=C.useState(null),[O,gt]=C.useState(null),ue=lt(v,Object.values(v)),ze=ft("DndDescribedBy",a),ht=C.useMemo(()=>b.getEnabled(),[b]),z=Cl(m),{droppableRects:ce,measureDroppableContainers:Ae,measuringScheduled:Xe}=nl(ht,{dragging:_,dependencies:[w.x,w.y],config:z.droppable}),ee=el(P,A),yt=C.useMemo(()=>O?Pt(O):null,[O]),ye=Gr(),de=ol(ee,z.draggable.measure);Tl({activeNode:A!=null?P.get(A):null,config:ye.layoutShiftCompensation,initialRect:de,measure:z.draggable.measure});const F=Zn(ee,z.draggable.measure,de),Oe=Zn(ee?ee.parentElement:null),se=C.useRef({activatorEvent:null,active:null,activeNode:ee,collisionRect:null,collisions:null,droppableRects:ce,draggableNodes:P,draggingNode:null,draggingNodeRect:null,droppableContainers:b,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Pe=b.getNodeFor((n=se.current.over)==null?void 0:n.id),fe=fl({measure:z.dragOverlay.measure}),De=(o=fe.nodeRef.current)!=null?o:ee,Ne=_?(s=fe.rect)!=null?s:F:null,bn=!!(fe.nodeRef.current&&fe.rect),kn=sl(bn?null:F),Kt=Ji(De?W(De):null),ve=ll(_?Pe??ee:null),vt=dl(ve),Ct=zi(h,{transform:{x:w.x-kn.x,y:w.y-kn.y,scaleX:1,scaleY:1},activatorEvent:O,active:K,activeNodeRect:F,containerNodeRect:Oe,draggingNodeRect:Ne,over:se.current.over,overlayNodeRect:fe.rect,scrollableAncestors:ve,scrollableAncestorRects:vt,windowRect:Kt}),Ln=yt?Ue(yt,w):null,Fn=al(ve),Nr=eo(Fn),br=eo(Fn,[F]),be=Ue(Ct,Nr),ke=Ne?Ns(Ne,Ct):null,Qe=K&&ke?p({active:K,collisionRect:ke,droppableRects:ce,droppableContainers:ht,pointerCoordinates:Ln}):null,Un=bi(Qe,"id"),[Ce,Vn]=C.useState(null),kr=bn?Ct:Ue(Ct,br),Lr=Ps(kr,(l=Ce==null?void 0:Ce.rect)!=null?l:null,F),zt=C.useRef(null),Gn=C.useCallback(($,Q)=>{let{sensor:Z,options:Te}=Q;if(X.current==null)return;const te=P.get(X.current);if(!te)return;const j=$.nativeEvent,le=new Z({active:X.current,activeNode:te,event:j,options:Te,context:se,onAbort(H){if(!P.get(H))return;const{onDragAbort:ae}=ue.current,pe={id:H};ae==null||ae(pe),I({type:"onDragAbort",event:pe})},onPending(H,xe,ae,pe){if(!P.get(H))return;const{onDragPending:je}=ue.current,Se={id:H,constraint:xe,initialCoordinates:ae,offset:pe};je==null||je(Se),I({type:"onDragPending",event:Se})},onStart(H){const xe=X.current;if(xe==null)return;const ae=P.get(xe);if(!ae)return;const{onDragStart:pe}=ue.current,Ze={activatorEvent:j,active:{id:xe,data:ae.data,rect:G}};nt.unstable_batchedUpdates(()=>{pe==null||pe(Ze),S(Ee.Initializing),E({type:q.DragStart,initialCoordinates:H,active:xe}),I({type:"onDragStart",event:Ze}),he(zt.current),gt(j)})},onMove(H){E({type:q.DragMove,coordinates:H})},onEnd:Le(q.DragEnd),onCancel:Le(q.DragCancel)});zt.current=le;function Le(H){return async function(){const{active:ae,collisions:pe,over:Ze,scrollAdjustedTranslate:je}=se.current;let Se=null;if(ae&&je){const{cancelDrop:et}=ue.current;Se={activatorEvent:j,active:ae,collisions:pe,delta:je,over:Ze},H===q.DragEnd&&typeof et=="function"&&await Promise.resolve(et(Se))&&(H=q.DragCancel)}X.current=null,nt.unstable_batchedUpdates(()=>{E({type:H}),S(Ee.Uninitialized),Vn(null),he(null),gt(null),zt.current=null;const et=H===q.DragEnd?"onDragEnd":"onDragCancel";if(Se){const Xt=ue.current[et];Xt==null||Xt(Se),I({type:et,event:Se})}})}}},[P]),Fr=C.useCallback(($,Q)=>(Z,Te)=>{const te=Z.nativeEvent,j=P.get(Te);if(X.current!==null||!j||te.dndKit||te.defaultPrevented)return;const le={active:j};$(Z,Q.options,le)===!0&&(te.dndKit={capturedBy:Q.sensor},X.current=Te,Gn(Z,Q))},[P,Gn]),qn=tl(f,Fr);ul(f),ie(()=>{F&&R===Ee.Initializing&&S(Ee.Initialized)},[F,R]),C.useEffect(()=>{const{onDragMove:$}=ue.current,{active:Q,activatorEvent:Z,collisions:Te,over:te}=se.current;if(!Q||!Z)return;const j={active:Q,activatorEvent:Z,collisions:Te,delta:{x:be.x,y:be.y},over:te};nt.unstable_batchedUpdates(()=>{$==null||$(j),I({type:"onDragMove",event:j})})},[be.x,be.y]),C.useEffect(()=>{const{active:$,activatorEvent:Q,collisions:Z,droppableContainers:Te,scrollAdjustedTranslate:te}=se.current;if(!$||X.current==null||!Q||!te)return;const{onDragOver:j}=ue.current,le=Te.get(Un),Le=le&&le.rect.current?{id:le.id,rect:le.rect.current,data:le.data,disabled:le.disabled}:null,H={active:$,activatorEvent:Q,collisions:Z,delta:{x:te.x,y:te.y},over:Le};nt.unstable_batchedUpdates(()=>{Vn(Le),j==null||j(H),I({type:"onDragOver",event:H})})},[Un]),ie(()=>{se.current={activatorEvent:O,active:K,activeNode:ee,collisionRect:ke,collisions:Qe,droppableRects:ce,draggableNodes:P,draggingNode:De,draggingNodeRect:Ne,droppableContainers:b,over:Ce,scrollableAncestors:ve,scrollAdjustedTranslate:be},G.current={initial:Ne,translated:ke}},[K,ee,Qe,ke,P,De,Ne,ce,b,Ce,ve,be]),Qs({...ye,delta:w,draggingRect:ke,pointerCoordinates:Ln,scrollableAncestors:ve,scrollableAncestorRects:vt});const Ur=C.useMemo(()=>({active:K,activeNode:ee,activeNodeRect:F,activatorEvent:O,collisions:Qe,containerNodeRect:Oe,dragOverlay:fe,draggableNodes:P,droppableContainers:b,droppableRects:ce,over:Ce,measureDroppableContainers:Ae,scrollableAncestors:ve,scrollableAncestorRects:vt,measuringConfiguration:z,measuringScheduled:Xe,windowRect:Kt}),[K,ee,F,O,Qe,Oe,fe,P,b,ce,Ce,Ae,ve,vt,z,Xe,Kt]),Vr=C.useMemo(()=>({activatorEvent:O,activators:qn,active:K,activeNodeRect:F,ariaDescribedById:{draggable:ze},dispatch:E,draggableNodes:P,over:Ce,measureDroppableContainers:Ae}),[O,qn,K,F,E,ze,P,Ce,Ae]);return V.createElement(Pi.Provider,{value:M},V.createElement(pt.Provider,{value:Vr},V.createElement(Ki.Provider,{value:Ur},V.createElement($t.Provider,{value:Lr},c)),V.createElement(vl,{disabled:(u==null?void 0:u.restoreFocus)===!1})),V.createElement(Ss,{...u,hiddenTextDescribedById:ze}));function Gr(){const $=(Y==null?void 0:Y.autoScrollEnabled)===!1,Q=typeof d=="object"?d.enabled===!1:d===!1,Z=_&&!$&&!Q;return typeof d=="object"?{...d,enabled:Z}:{enabled:Z}}}),Sl=C.createContext(null),no="button",El="Draggable";function Il(t){let{id:e,data:n,disabled:o=!1,attributes:s}=t;const l=ft(El),{activators:a,activatorEvent:u,active:d,activeNodeRect:c,ariaDescribedById:f,draggableNodes:p,over:m}=C.useContext(pt),{role:h=no,roleDescription:v="draggable",tabIndex:y=0}=s??{},T=(d==null?void 0:d.id)===e,E=C.useContext(T?$t:Sl),[I,M]=_t(),[R,S]=_t(),_=cl(a,e),A=lt(n);ie(()=>(p.set(e,{id:e,key:l,node:I,activatorNode:R,data:A}),()=>{const w=p.get(e);w&&w.key===l&&p.delete(e)}),[p,e]);const P=C.useMemo(()=>({role:h,tabIndex:y,"aria-disabled":o,"aria-pressed":T&&h===no?!0:void 0,"aria-roledescription":v,"aria-describedby":f.draggable}),[o,h,y,T,v,f.draggable]);return{active:d,activatorEvent:u,activeNodeRect:c,attributes:P,isDragging:T,listeners:o?void 0:_,node:I,over:m,setNodeRef:M,setActivatorNodeRef:S,transform:E}}function Xi(){return C.useContext(Ki)}const Ml="Droppable",Al={timeout:25};function Rl(t){let{data:e,disabled:n=!1,id:o,resizeObserverConfig:s}=t;const l=ft(Ml),{active:a,dispatch:u,over:d,measureDroppableContainers:c}=C.useContext(pt),f=C.useRef({disabled:n}),p=C.useRef(!1),m=C.useRef(null),h=C.useRef(null),{disabled:v,updateMeasurementsFor:y,timeout:T}={...Al,...s},E=lt(y??o),I=C.useCallback(()=>{if(!p.current){p.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{c(Array.isArray(E.current)?E.current:[E.current]),h.current=null},T)},[T]),M=Ht({callback:I,disabled:v||!a}),R=C.useCallback((P,w)=>{M&&(w&&(M.unobserve(w),p.current=!1),P&&M.observe(P))},[M]),[S,_]=_t(R),A=lt(e);return C.useEffect(()=>{!M||!S.current||(M.disconnect(),p.current=!1,M.observe(S.current))},[S,M]),C.useEffect(()=>(u({type:q.RegisterDroppable,element:{id:o,key:l,disabled:n,node:S,rect:m,data:A}}),()=>u({type:q.UnregisterDroppable,key:l,id:o})),[o]),C.useEffect(()=>{n!==f.current.disabled&&(u({type:q.SetDroppableDisabled,id:o,key:l,disabled:n}),f.current.disabled=n)},[o,l,n,u]),{active:a,rect:m,isOver:(d==null?void 0:d.id)===o,node:S,over:d,setNodeRef:_}}function _l(t){let{animation:e,children:n}=t;const[o,s]=C.useState(null),[l,a]=C.useState(null),u=wt(n);return!n&&!o&&u&&s(u),ie(()=>{if(!l)return;const d=o==null?void 0:o.key,c=o==null?void 0:o.props.id;if(d==null||c==null){s(null);return}Promise.resolve(e(c,l)).then(()=>{s(null)})},[e,o,l]),V.createElement(V.Fragment,null,n,o?C.cloneElement(o,{ref:a}):null)}const wl={x:0,y:0,scaleX:1,scaleY:1};function Pl(t){let{children:e}=t;return V.createElement(pt.Provider,{value:Wi},V.createElement($t.Provider,{value:wl},e))}const Dl={position:"fixed",touchAction:"none"},Nl=t=>qt(t)?"transform 250ms ease":void 0,bl=C.forwardRef((t,e)=>{let{as:n,activatorEvent:o,adjustScale:s,children:l,className:a,rect:u,style:d,transform:c,transition:f=Nl}=t;if(!u)return null;const p=s?c:{...c,scaleX:1,scaleY:1},m={...Dl,width:u.width,height:u.height,top:u.top,left:u.left,transform:Me.Transform.toString(p),transformOrigin:s&&o?Is(o,u):void 0,transition:typeof f=="function"?f(o):f,...d};return V.createElement(n,{className:a,style:m,ref:e},l)}),kl=t=>e=>{let{active:n,dragOverlay:o}=e;const s={},{styles:l,className:a}=t;if(l!=null&&l.active)for(const[u,d]of Object.entries(l.active))d!==void 0&&(s[u]=n.node.style.getPropertyValue(u),n.node.style.setProperty(u,d));if(l!=null&&l.dragOverlay)for(const[u,d]of Object.entries(l.dragOverlay))d!==void 0&&o.node.style.setProperty(u,d);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&o.node.classList.add(a.dragOverlay),function(){for(const[d,c]of Object.entries(s))n.node.style.setProperty(d,c);a!=null&&a.active&&n.node.classList.remove(a.active)}},Ll=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Me.Transform.toString(e)},{transform:Me.Transform.toString(n)}]},Fl={duration:250,easing:"ease",keyframes:Ll,sideEffects:kl({styles:{active:{opacity:"0"}}})};function Ul(t){let{config:e,draggableNodes:n,droppableContainers:o,measuringConfiguration:s}=t;return Gt((l,a)=>{if(e===null)return;const u=n.get(l);if(!u)return;const d=u.node.current;if(!d)return;const c=Yi(a);if(!c)return;const{transform:f}=W(a).getComputedStyle(a),p=Li(f);if(!p)return;const m=typeof e=="function"?e:Vl(e);return Hi(d,s.draggable.measure),m({active:{id:l,data:u.data,node:d,rect:s.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(c)},droppableContainers:o,measuringConfiguration:s,transform:p})})}function Vl(t){const{duration:e,easing:n,sideEffects:o,keyframes:s}={...Fl,...t};return l=>{let{active:a,dragOverlay:u,transform:d,...c}=l;if(!e)return;const f={x:u.rect.left-a.rect.left,y:u.rect.top-a.rect.top},p={scaleX:d.scaleX!==1?a.rect.width*d.scaleX/u.rect.width:1,scaleY:d.scaleY!==1?a.rect.height*d.scaleY/u.rect.height:1},m={x:d.x-f.x,y:d.y-f.y,...p},h=s({...c,active:a,dragOverlay:u,transform:{initial:d,final:m}}),[v]=h,y=h[h.length-1];if(JSON.stringify(v)===JSON.stringify(y))return;const T=o==null?void 0:o({active:a,dragOverlay:u,...c}),E=u.node.animate(h,{duration:e,easing:n,fill:"forwards"});return new Promise(I=>{E.onfinish=()=>{T==null||T(),I()}})}}let oo=0;function Gl(t){return C.useMemo(()=>{if(t!=null)return oo++,oo},[t])}const ql=V.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:o,style:s,transition:l,modifiers:a,wrapperElement:u="div",className:d,zIndex:c=999}=t;const{activatorEvent:f,active:p,activeNodeRect:m,containerNodeRect:h,draggableNodes:v,droppableContainers:y,dragOverlay:T,over:E,measuringConfiguration:I,scrollableAncestors:M,scrollableAncestorRects:R,windowRect:S}=Xi(),_=C.useContext($t),A=Gl(p==null?void 0:p.id),P=zi(a,{activatorEvent:f,active:p,activeNodeRect:m,containerNodeRect:h,draggingNodeRect:T.rect,over:E,overlayNodeRect:T.rect,scrollableAncestors:M,scrollableAncestorRects:R,transform:_,windowRect:S}),w=An(m),b=Ul({config:o,draggableNodes:v,droppableContainers:y,measuringConfiguration:I}),N=w?T.setRef:void 0;return V.createElement(Pl,null,V.createElement(_l,{animation:b},p&&A?V.createElement(bl,{key:A,id:p.id,ref:N,as:u,activatorEvent:f,adjustScale:e,className:d,transition:l,rect:w,style:{zIndex:c,...s},transform:P},n):null))});function Rn(t,e,n){const o=t.slice();return o.splice(n<0?o.length+n:n,0,o.splice(e,1)[0]),o}function Bl(t,e){return t.reduce((n,o,s)=>{const l=e.get(o);return l&&(n[s]=l),n},Array(t.length))}function Tt(t){return t!==null&&t>=0}function Hl(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function $l(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Oi=t=>{let{rects:e,activeIndex:n,overIndex:o,index:s}=t;const l=Rn(e,o,n),a=e[s],u=l[s];return!u||!a?null:{x:u.left-a.left,y:u.top-a.top,scaleX:u.width/a.width,scaleY:u.height/a.height}},xt={scaleX:1,scaleY:1},Jl=t=>{var e;let{activeIndex:n,activeNodeRect:o,index:s,rects:l,overIndex:a}=t;const u=(e=l[n])!=null?e:o;if(!u)return null;if(s===n){const c=l[a];return c?{x:0,y:n<a?c.top+c.height-(u.top+u.height):c.top-u.top,...xt}:null}const d=Yl(l,s,n);return s>n&&s<=a?{x:0,y:-u.height-d,...xt}:s<n&&s>=a?{x:0,y:u.height+d,...xt}:{x:0,y:0,...xt}};function Yl(t,e,n){const o=t[e],s=t[e-1],l=t[e+1];return o?n<e?s?o.top-(s.top+s.height):l?l.top-(o.top+o.height):0:l?l.top-(o.top+o.height):s?o.top-(s.top+s.height):0:0}const Qi="Sortable",Zi=V.createContext({activeIndex:-1,containerId:Qi,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Oi,disabled:{draggable:!1,droppable:!1}});function Wl(t){let{children:e,id:n,items:o,strategy:s=Oi,disabled:l=!1}=t;const{active:a,dragOverlay:u,droppableRects:d,over:c,measureDroppableContainers:f}=Xi(),p=ft(Qi,n),m=u.rect!==null,h=C.useMemo(()=>o.map(_=>typeof _=="object"&&"id"in _?_.id:_),[o]),v=a!=null,y=a?h.indexOf(a.id):-1,T=c?h.indexOf(c.id):-1,E=C.useRef(h),I=!Hl(h,E.current),M=T!==-1&&y===-1||I,R=$l(l);ie(()=>{I&&v&&f(h)},[I,h,v,f]),C.useEffect(()=>{E.current=h},[h]);const S=C.useMemo(()=>({activeIndex:y,containerId:p,disabled:R,disableTransforms:M,items:h,overIndex:T,useDragOverlay:m,sortedRects:Bl(h,d),strategy:s}),[y,p,R.draggable,R.droppable,M,h,T,d,m,s]);return V.createElement(Zi.Provider,{value:S},e)}const Kl=t=>{let{id:e,items:n,activeIndex:o,overIndex:s}=t;return Rn(n,o,s).indexOf(e)},zl=t=>{let{containerId:e,isSorting:n,wasDragging:o,index:s,items:l,newIndex:a,previousItems:u,previousContainerId:d,transition:c}=t;return!c||!o||u!==l&&s===a?!1:n?!0:a!==s&&e===d},Xl={duration:200,easing:"ease"},ji="transform",Ol=Me.Transition.toString({property:ji,duration:0,easing:"linear"}),Ql={roleDescription:"sortable"};function Zl(t){let{disabled:e,index:n,node:o,rect:s}=t;const[l,a]=C.useState(null),u=C.useRef(n);return ie(()=>{if(!e&&n!==u.current&&o.current){const d=s.current;if(d){const c=$e(o.current,{ignoreTransform:!0}),f={x:d.left-c.left,y:d.top-c.top,scaleX:d.width/c.width,scaleY:d.height/c.height};(f.x||f.y)&&a(f)}}n!==u.current&&(u.current=n)},[e,n,o,s]),C.useEffect(()=>{l&&a(null)},[l]),l}function jl(t){let{animateLayoutChanges:e=zl,attributes:n,disabled:o,data:s,getNewIndex:l=Kl,id:a,strategy:u,resizeObserverConfig:d,transition:c=Xl}=t;const{items:f,containerId:p,activeIndex:m,disabled:h,disableTransforms:v,sortedRects:y,overIndex:T,useDragOverlay:E,strategy:I}=C.useContext(Zi),M=ea(o,h),R=f.indexOf(a),S=C.useMemo(()=>({sortable:{containerId:p,index:R,items:f},...s}),[p,s,R,f]),_=C.useMemo(()=>f.slice(f.indexOf(a)),[f,a]),{rect:A,node:P,isOver:w,setNodeRef:b}=Rl({id:a,data:S,disabled:M.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...d}}),{active:N,activatorEvent:G,activeNodeRect:K,attributes:X,setNodeRef:Y,listeners:he,isDragging:O,over:gt,setActivatorNodeRef:ue,transform:ze}=Il({id:a,data:S,attributes:{...Ql,...n},disabled:M.draggable}),ht=us(b,Y),z=!!N,ce=z&&!v&&Tt(m)&&Tt(T),Ae=!E&&O,Xe=Ae&&ce?ze:null,yt=ce?Xe??(u??I)({rects:y,activeNodeRect:K,activeIndex:m,overIndex:T,index:R}):null,ye=Tt(m)&&Tt(T)?l({id:a,items:f,activeIndex:m,overIndex:T}):R,de=N==null?void 0:N.id,F=C.useRef({activeId:de,items:f,newIndex:ye,containerId:p}),Oe=f!==F.current.items,se=e({active:N,containerId:p,isDragging:O,isSorting:z,id:a,index:R,items:f,newIndex:F.current.newIndex,previousItems:F.current.items,previousContainerId:F.current.containerId,transition:c,wasDragging:F.current.activeId!=null}),Pe=Zl({disabled:!se,index:R,node:P,rect:A});return C.useEffect(()=>{z&&F.current.newIndex!==ye&&(F.current.newIndex=ye),p!==F.current.containerId&&(F.current.containerId=p),f!==F.current.items&&(F.current.items=f)},[z,ye,p,f]),C.useEffect(()=>{if(de===F.current.activeId)return;if(de&&!F.current.activeId){F.current.activeId=de;return}const De=setTimeout(()=>{F.current.activeId=de},50);return()=>clearTimeout(De)},[de]),{active:N,activeIndex:m,attributes:X,data:S,rect:A,index:R,newIndex:ye,items:f,isOver:w,isSorting:z,isDragging:O,listeners:he,node:P,overIndex:T,over:gt,setNodeRef:ht,setActivatorNodeRef:ue,setDroppableNodeRef:b,setDraggableNodeRef:Y,transform:Pe??yt,transition:fe()};function fe(){if(Pe||Oe&&F.current.newIndex===R)return Ol;if(!(Ae&&!qt(G)||!c)&&(z||se))return Me.Transition.toString({...c,property:ji})}}function ea(t,e){var n,o;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(o=t==null?void 0:t.droppable)!=null?o:e.droppable}}function bt(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const ta=[k.Down,k.Right,k.Up,k.Left],na=(t,e)=>{let{context:{active:n,collisionRect:o,droppableRects:s,droppableContainers:l,over:a,scrollableAncestors:u}}=e;if(ta.includes(t.code)){if(t.preventDefault(),!n||!o)return;const d=[];l.getEnabled().forEach(p=>{if(!p||p!=null&&p.disabled)return;const m=s.get(p.id);if(m)switch(t.code){case k.Down:o.top<m.top&&d.push(p);break;case k.Up:o.top>m.top&&d.push(p);break;case k.Left:o.left>m.left&&d.push(p);break;case k.Right:o.left<m.left&&d.push(p);break}});const c=Rs({collisionRect:o,droppableRects:s,droppableContainers:d});let f=bi(c,"id");if(f===(a==null?void 0:a.id)&&c.length>1&&(f=c[1].id),f!=null){const p=l.get(n.id),m=l.get(f),h=m?s.get(m.id):null,v=m==null?void 0:m.node.current;if(v&&h&&p&&m){const T=Bt(v).some((_,A)=>u[A]!==_),E=er(p,m),I=oa(p,m),M=T||!E?{x:0,y:0}:{x:I?o.width-h.width:0,y:I?o.height-h.height:0},R={x:h.left,y:h.top};return M.x&&M.y?R:at(R,M)}}}};function er(t,e){return!bt(t)||!bt(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function oa(t,e){return!bt(t)||!bt(e)||!er(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const ia=t=>{let{transform:e}=t;return{...e,x:0}},ra=[{name:"Link",label:"Website"},{name:"Youtube",label:"YouTube"},{name:"Instagram",label:"Instagram"},{name:"Twitter",label:"Twitter/X"},{name:"Facebook",label:"Facebook"},{name:"Linkedin",label:"LinkedIn"},{name:"Github",label:"GitHub"},{name:"Mail",label:"Email"},{name:"MessageCircle",label:"Chat"},{name:"Phone",label:"Phone"},{name:"MapPin",label:"Location"},{name:"Calendar",label:"Calendar"},{name:"Music",label:"Music"},{name:"Camera",label:"Photography"},{name:"ShoppingBag",label:"Shop"},{name:"Heart",label:"Favorite"},{name:"Star",label:"Featured"},{name:"BookOpen",label:"Blog"},{name:"Video",label:"Video"},{name:"Headphones",label:"Podcast"},{name:"Briefcase",label:"Portfolio"},{name:"Globe",label:"Website"},{name:"Zap",label:"Featured"},{name:"Coffee",label:"Support"}],sa=({selectedIcon:t,onIconSelect:e,onClose:n})=>{const[o,s]=C.useState(""),l=ra.filter(d=>d.label.toLowerCase().includes(o.toLowerCase())||d.name.toLowerCase().includes(o.toLowerCase())),a=d=>{e(d),n()},u=d=>{const c=Mi[d];return c?g.jsx(c,{size:20}):null};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[500px] overflow-hidden flex flex-col",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Choose an Icon"}),g.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:g.jsx(Jr,{size:20})})]}),g.jsx("div",{className:"mb-4",children:g.jsxs("div",{className:"relative",children:[g.jsx(Yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),g.jsx("input",{type:"text",placeholder:"Search icons...",value:o,onChange:d=>s(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),g.jsx("div",{className:"grid grid-cols-4 gap-2 overflow-y-auto flex-1",children:l.map(d=>g.jsxs("button",{onClick:()=>a(d.name),className:`flex flex-col items-center p-3 rounded-lg border-2 transition-all hover:bg-gray-50 ${t===d.name?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,title:d.label,children:[g.jsx("div",{className:"text-gray-700 mb-1",children:u(d.name)}),g.jsx("span",{className:"text-xs text-gray-500 text-center leading-tight",children:d.label})]},d.name))}),g.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:g.jsx("button",{onClick:()=>a(""),className:"w-full py-2 px-4 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors text-sm",children:"Remove Icon"})})]})})},_n=C.forwardRef(({link:t,isEditing:e,themeStyles:n,onEdit:o,onSave:s,onCancel:l,onDelete:a,onToggleActive:u,style:d,handleAttributes:c,handleListeners:f,showHandle:p=!0},m)=>{const[h,v]=C.useState(t.title),[y,T]=C.useState(t.url),[E,I]=C.useState(t.icon||""),[M,R]=C.useState(!1);C.useEffect(()=>{e&&(v(t.title),T(t.url),I(t.icon||""))},[e,t.title,t.url,t.icon]);const S=()=>{s(t.id,h,y,E)},_=A=>{if(!A)return g.jsx(Bn,{size:20});const P=Mi[A];return P?g.jsx(P,{size:20}):g.jsx(Bn,{size:20})};return g.jsxs("div",{ref:m,style:d,...c,className:`bg-gray-900 rounded-lg transition-all hover:bg-gray-800/50 ${e?"border border-blue-500":""}`,children:[g.jsxs("div",{className:`flex items-center gap-4 ${e?"p-4":"p-3"}`,children:[g.jsx("button",{...f,className:`p-1 cursor-grab text-gray-500 hover:text-white transition-colors focus:outline-none ${!p||e?"hidden":""}`,"aria-label":"Drag to reorder",title:"Drag to reorder",children:g.jsx(as,{className:"w-5 h-5"})}),e?g.jsxs("div",{className:"w-full space-y-4",children:[g.jsx("input",{type:"text",value:h,onChange:A=>v(A.target.value),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md text-white",placeholder:"Link title","aria-label":"Link title"}),g.jsx("input",{type:"url",value:y,onChange:A=>T(A.target.value),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md text-white",placeholder:"Link URL","aria-label":"Link URL"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"text-sm text-gray-300",children:"Icon"}),g.jsxs("button",{type:"button",onClick:()=>R(!0),className:"flex items-center gap-2 w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white hover:bg-gray-700 transition-colors",children:[g.jsx("div",{className:"text-gray-300",children:_(E)}),g.jsx("span",{className:"flex-1 text-left",children:E||"Choose icon..."}),g.jsx(Wr,{size:16,className:"text-gray-400"})]})]}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm font-medium text-gray-300 bg-gray-700 rounded-md hover:bg-gray-600",children:"Cancel"}),g.jsx("button",{onClick:S,className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${n.buttonClass}`,children:"Save"})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full transition-colors ${n.iconWrapperClass}`,children:_(t.icon||"")}),g.jsxs("div",{className:"flex-grow overflow-hidden",children:[g.jsx("p",{className:"font-semibold text-white truncate",children:t.title}),g.jsx("p",{className:"text-sm text-gray-400 truncate",children:t.url})]}),g.jsxs("div",{className:"flex-shrink-0 flex items-center gap-3 ml-auto",children:[g.jsx("label",{htmlFor:`toggle-${t.id}`,className:"flex items-center cursor-pointer",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"checkbox",id:`toggle-${t.id}`,className:"sr-only",checked:t.isActive,onChange:A=>u(A.target.checked),"aria-label":`Toggle ${t.title||"link"} active`,title:`Toggle ${t.title||"link"} active`}),g.jsx("div",{className:`block w-10 h-6 rounded-full transition ${t.isActive?"bg-blue-500":"bg-gray-700"}`}),g.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${t.isActive?"translate-x-4":"translate-x-0"}`})]})}),g.jsx("button",{onClick:()=>o(t.id),className:`p-1 text-gray-400 transition-colors ${n.accentHoverTextClass}`,"aria-label":"Edit link",title:"Edit link",children:g.jsx(is,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>a(t.id),className:"p-1 text-red-500/80 hover:text-red-500 transition-colors","aria-label":"Delete link",title:"Delete link",children:g.jsx(ns,{className:"w-5 h-5"})})]})]})]}),M&&g.jsx(sa,{selectedIcon:E,onIconSelect:I,onClose:()=>R(!1)})]})});_n.displayName="LinkItem";const la=t=>{const{attributes:e,listeners:n,setNodeRef:o,transform:s,transition:l,isDragging:a}=jl({id:t.id}),u={transform:Me.Transform.toString(s),transition:l,opacity:a?.1:1,zIndex:a?50:"auto"};return g.jsx(_n,{ref:o,style:u,handleAttributes:e,handleListeners:n,...t})},aa=({userData:t,setUserData:e})=>{const[n,o]=C.useState(""),[s,l]=C.useState(""),[a,u]=C.useState(null),{themeSettings:d}=t,c=C.useMemo(()=>Ai(d),[d]),[f,p]=C.useState(null),m=C.useMemo(()=>t.links.map(S=>S.id),[t.links]),h=Es(Jn(Mn,{activationConstraint:{distance:8}}),Jn(En,{coordinateGetter:na})),v=()=>{if(!n||!s)return;const _={id:`link_${t.links.length}_${n.replace(/\s+/g,"_").toLowerCase()}`,title:n,url:s,isActive:!0,icon:"Link"};e(A=>({...A,links:[...A.links,_]})),o(""),l("")},y=C.useCallback((S,_,A)=>{e(P=>({...P,links:P.links.map(w=>w.id===S?{...w,[_]:A}:w)}))},[e]),T=C.useCallback(S=>{e(_=>({..._,links:_.links.filter(A=>A.id!==S)}))},[e]),E=(S,_,A,P)=>{y(S,"title",_),y(S,"url",A),P!==void 0&&y(S,"icon",P),u(null)},I=C.useCallback(S=>{p(String(S.active.id))},[]),M=C.useCallback(S=>{p(null)},[]),R=C.useCallback(S=>{const{active:_,over:A}=S;A&&_.id!==A.id&&e(P=>{const w=P.links.findIndex(N=>N.id===_.id),b=P.links.findIndex(N=>N.id===A.id);return w===-1||b===-1?P:{...P,links:Rn(P.links,w,b)}}),p(null)},[e]);return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Link Title"}),g.jsx("input",{type:"text",placeholder:"e.g. My Website",value:n,onChange:S=>o(S.target.value),className:"w-full px-4 py-2.5 bg-gray-900 border border-gray-700 rounded-lg text-white focus:ring-blue-500 focus:border-blue-500 transition"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"URL"}),g.jsx("input",{type:"url",placeholder:"https://example.com",value:s,onChange:S=>l(S.target.value),className:"w-full px-4 py-2.5 bg-gray-900 border border-gray-700 rounded-lg text-white focus:ring-blue-500 focus:border-blue-500 transition"})]})]}),g.jsxs("button",{onClick:v,className:`w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-semibold rounded-lg transition-colors ${c.buttonClass}`,children:[g.jsx(os,{className:"w-5 h-5"})," Add Link"]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mt-8",children:"Your Links"}),g.jsxs(xl,{sensors:h,collisionDetection:As,modifiers:[ia],onDragStart:I,onDragCancel:M,onDragEnd:R,children:[g.jsx(Wl,{items:m,strategy:Jl,children:g.jsx("div",{className:"space-y-4",children:t.links.map(S=>g.jsx(la,{id:S.id,link:S,themeStyles:c,isEditing:a===S.id,onEdit:()=>u(S.id),onSave:E,onCancel:()=>u(null),onDelete:T,onToggleActive:_=>y(S.id,"isActive",_)},S.id))})}),g.jsx(ql,{children:f?(()=>{const S=t.links.find(_=>_.id===f);return S?g.jsx(_n,{link:S,isEditing:!1,themeStyles:c,onEdit:()=>{},onSave:()=>{},onCancel:()=>{},onDelete:()=>{},onToggleActive:()=>{},showHandle:!1}):null})():null})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ua,ca;function da(){return{geminiUrl:ua,vertexUrl:ca}}function fa(t,e,n,o){var s,l;if(!(t!=null&&t.baseUrl)){const a=da();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:n:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _e{}function D(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function r(t,e,n){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];r(f,e.slice(l+1),n[c])}else for(const c of d)r(c,e.slice(l+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];r(d[0],e.slice(l+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else t[o]=n}function i(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const o=e[n];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in t){const l=t[s];return Array.isArray(l)?l.map(a=>i(a,e.slice(n+1))):void 0}else return}else t=t[o]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function un(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var io;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(io||(io={}));var ro;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ro||(ro={}));var Ie;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ie||(Ie={}));var so;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(so||(so={}));var lo;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(lo||(lo={}));var ao;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ao||(ao={}));var uo;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(uo||(uo={}));var co;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(co||(co={}));var fo;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fo||(fo={}));var po;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(po||(po={}));var mo;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(mo||(mo={}));var go;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(go||(go={}));var ho;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ho||(ho={}));var yo;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(yo||(yo={}));var vo;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(vo||(vo={}));var kt;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(kt||(kt={}));var Co;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Co||(Co={}));var cn;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cn||(cn={}));var To;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(To||(To={}));var xo;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(xo||(xo={}));var So;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(So||(So={}));var Eo;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Eo||(Eo={}));var Io;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Io||(Io={}));var Mo;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Mo||(Mo={}));var Ao;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Ao||(Ao={}));var Ro;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ro||(Ro={}));var _o;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(_o||(_o={}));var wo;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(wo||(wo={}));var Po;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Po||(Po={}));var Do;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Do||(Do={}));var No;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(No||(No={}));var bo;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(bo||(bo={}));var ko;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(ko||(ko={}));var Lo;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Lo||(Lo={}));var Fo;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Fo||(Fo={}));var Uo;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Uo||(Uo={}));var Vo;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Vo||(Vo={}));var Go;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Go||(Go={}));var qo;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(qo||(qo={}));var Bo;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Bo||(Bo={}));var Ho;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ho||(Ho={}));var $o;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})($o||($o={}));var Jo;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Jo||(Jo={}));var Yo;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Yo||(Yo={}));var Fe;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Fe||(Fe={}));class dn{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class tt{get text(){var e,n,o,s,l,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const m of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,v]of Object.entries(m))h!=="text"&&h!=="thought"&&(v!==null||v!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,o,s,l,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,o,s,l,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,o,s,l,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,o,s,l,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class Wo{}class Ko{}class pa{}class ma{}class ga{}class ha{}class zo{}class Xo{}class Oo{}class ya{}class Qo{}class Zo{}class jo{}class ei{}class va{}class Ca{}class Ta{}class ti{}class xa{get text(){var e,n,o;let s="",l=!1;const a=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,s+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,n,o;let s="";const l=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Lt{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const o=new Lt;if(o.name=e.name,o.metadata=e.metadata,o.done=e.done,o.error=e.error,n){const s=e.response;if(s){const l=new Qo,a=s.videos;l.generatedVideos=a==null?void 0:a.map(u=>({video:{uri:u.gcsUri,videoBytes:u.bytesBase64Encoded?un(u.bytesBase64Encoded):void 0,mimeType:u.mimeType}})),l.raiMediaFilteredCount=s.raiMediaFilteredCount,l.raiMediaFilteredReasons=s.raiMediaFilteredReasons,o.response=l}}else{const s=e.response;if(s){const l=new Qo,a=s.generateVideoResponse,u=a==null?void 0:a.generatedSamples;l.generatedVideos=u==null?void 0:u.map(d=>{const c=d.video;return{video:{uri:c==null?void 0:c.uri,videoBytes:c!=null&&c.encodedVideo?un(c==null?void 0:c.encodedVideo):void 0,mimeType:d.encoding}}}),l.raiMediaFilteredCount=a==null?void 0:a.raiMediaFilteredCount,l.raiMediaFilteredReasons=a==null?void 0:a.raiMediaFilteredReasons,o.response=l}}return o}}class Sa{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tr(t,e){const n=L(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function nr(t){return Array.isArray(t)?t.map(e=>Ft(e)):[Ft(t)]}function Ft(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function or(t){const e=Ft(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ir(t){const e=Ft(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ni(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function rr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ni(e)):[ni(t)]}function fn(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function oi(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ii(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function J(t){if(t==null)throw new Error("ContentUnion is required");return fn(t)?t:{role:"user",parts:rr(t)}}function sr(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=J(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=J(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>J(n)):[J(e)]}function oe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(oi(t)||ii(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[J(t)]}const e=[],n=[],o=fn(t[0]);for(const s of t){const l=fn(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(oi(s)||ii(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:rr(n)}),e}function Ea(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Ie).includes(n[0].toUpperCase())?n[0].toUpperCase():Ie.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Ie).includes(o.toUpperCase())?o.toUpperCase():Ie.TYPE_UNSPECIFIED})}}function Ve(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&Ea(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Ie).includes(u.toUpperCase())?u.toUpperCase():Ie.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Ve(u);else if(o.includes(a)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(Ve(c))}e[a]=d}else if(s.includes(a)){const d={};for(const[c,f]of Object.entries(u))d[c]=Ve(f);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function wn(t){return Ve(t)}function Pn(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Dn(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Je(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ve(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ve(e.response));return t}function Ye(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Ia(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function me(t,e){if(typeof e!="string")throw new Error("name must be a string");return Ia(t,e,"cachedContents")}function lr(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function we(t){return un(t)}function Ma(t){return t!=null&&typeof t=="object"&&"name"in t}function Aa(t){return t!=null&&typeof t=="object"&&"video"in t}function Ra(t){return t!=null&&typeof t=="object"&&"uri"in t}function ar(t){var e;let n;if(Ma(t)&&(n=t.name),!(Ra(t)&&(n=t.uri,n===void 0))&&!(Aa(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ur(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function cr(t){for(const e of["models","tunedModels","publisherModels"])if(_a(t,e))return t[e];return[]}function _a(t,e){return t!==null&&typeof t=="object"&&e in t}function wa(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Pa(t,e={}){const n=[],o=new Set;for(const s of t){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=wa(s,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function dr(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Da(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function We(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function fr(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Na(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function ba(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function ka(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function La(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Na(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],ba(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],ka(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function pr(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>La(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Fa(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["enum"]);l!=null&&r(e,["enum"],l);const a=i(t,["example"]);a!=null&&r(e,["example"],a);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const p=i(t,["maxProperties"]);p!=null&&r(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&r(e,["maximum"],m);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const v=i(t,["minLength"]);v!=null&&r(e,["minLength"],v);const y=i(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const T=i(t,["minimum"]);T!=null&&r(e,["minimum"],T);const E=i(t,["nullable"]);E!=null&&r(e,["nullable"],E);const I=i(t,["pattern"]);I!=null&&r(e,["pattern"],I);const M=i(t,["properties"]);M!=null&&r(e,["properties"],M);const R=i(t,["propertyOrdering"]);R!=null&&r(e,["propertyOrdering"],R);const S=i(t,["required"]);S!=null&&r(e,["required"],S);const _=i(t,["title"]);_!=null&&r(e,["title"],_);const A=i(t,["type"]);return A!=null&&r(e,["type"],A),e}function Ua(t){const e={};if(i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["category"]);n!=null&&r(e,["category"],n);const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function Va(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function Ga(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function qa(t){const e={},n=i(t,["timeRangeFilter"]);if(n!=null&&r(e,["timeRangeFilter"],Ga(n)),i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ba(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Ha(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Ba(n)),e}function $a(){return{}}function Ja(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Ya(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Va(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],qa(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],Ha(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],$a());const a=i(t,["computerUse"]);a!=null&&r(e,["computerUse"],Ja(a));const u=i(t,["codeExecution"]);return u!=null&&r(e,["codeExecution"],u),e}function Wa(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function Ka(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function za(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],Ka(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function Xa(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Wa(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],za(o)),e}function Oa(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function mr(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],Oa(n)),e}function Qa(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],mr(o)),e}function Za(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Qa(s))),r(e,["speakerVoiceConfigs"],o)}return e}function ja(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],mr(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],Za(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function eu(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function tu(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],pr(J(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const v=i(e,["frequencyPenalty"]);v!=null&&r(o,["frequencyPenalty"],v);const y=i(e,["seed"]);y!=null&&r(o,["seed"],y);const T=i(e,["responseMimeType"]);T!=null&&r(o,["responseMimeType"],T);const E=i(e,["responseSchema"]);E!=null&&r(o,["responseSchema"],Fa(wn(E)));const I=i(e,["responseJsonSchema"]);if(I!=null&&r(o,["responseJsonSchema"],I),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=i(e,["safetySettings"]);if(n!==void 0&&M!=null){let N=M;Array.isArray(N)&&(N=N.map(G=>Ua(G))),r(n,["safetySettings"],N)}const R=i(e,["tools"]);if(n!==void 0&&R!=null){let N=Ye(R);Array.isArray(N)&&(N=N.map(G=>Ya(Je(G)))),r(n,["tools"],N)}const S=i(e,["toolConfig"]);if(n!==void 0&&S!=null&&r(n,["toolConfig"],Xa(S)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=i(e,["cachedContent"]);n!==void 0&&_!=null&&r(n,["cachedContent"],me(t,_));const A=i(e,["responseModalities"]);A!=null&&r(o,["responseModalities"],A);const P=i(e,["mediaResolution"]);P!=null&&r(o,["mediaResolution"],P);const w=i(e,["speechConfig"]);if(w!=null&&r(o,["speechConfig"],ja(Pn(w))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=i(e,["thinkingConfig"]);return b!=null&&r(o,["thinkingConfig"],eu(b)),o}function nu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["request","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>pr(u))),r(n,["request","contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["request","generationConfig"],tu(t,l,n)),n}function ou(t,e){const n={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&r(n,["fileName"],o);const s=i(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>nu(t,a))),r(n,["requests","requests"],l)}return n}function iu(t,e){const n={},o=i(t,["displayName"]);if(e!==void 0&&o!=null&&r(e,["batch","displayName"],o),i(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ri(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["src"]);s!=null&&r(n,["batch","inputConfig"],ou(t,dr(t,s)));const l=i(e,["config"]);return l!=null&&r(n,["config"],iu(l,n)),n}function ru(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function su(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function lu(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);if(e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),i(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function au(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],lu(n,e)),e}function uu(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function cu(t){const e={},n=i(t,["format"]);n!=null&&r(e,["instancesFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsSource","uris"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigquerySource","inputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function du(t){const e={},n=i(t,["format"]);n!=null&&r(e,["predictionsFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsDestination","outputUriPrefix"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigqueryDestination","outputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function fu(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["dest"]);return e!==void 0&&s!=null&&r(e,["outputConfig"],du(Da(s))),n}function pu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],L(t,o));const s=i(e,["src"]);s!=null&&r(n,["inputConfig"],cu(dr(t,s)));const l=i(e,["config"]);return l!=null&&r(n,["config"],fu(l,n)),n}function mu(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function gu(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function hu(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),n}function yu(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],hu(n,e)),e}function vu(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Cu(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Tu(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function xu(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Su(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Cu(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Tu(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],xu(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Eu(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Su(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Iu(t){const e={},n=i(t,["citationSources"]);return n!=null&&r(e,["citations"],n),e}function Mu(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function Au(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Mu(s))),r(e,["urlMetadata"],o)}return e}function Ru(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],Eu(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],Iu(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&r(e,["urlContextMetadata"],Au(a));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const p=i(t,["safetyRatings"]);return p!=null&&r(e,["safetyRatings"],p),e}function _u(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>Ru(c))),r(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&r(e,["modelVersion"],s);const l=i(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const a=i(t,["responseId"]);a!=null&&r(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function gr(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["code"]);o!=null&&r(e,["code"],o);const s=i(t,["message"]);return s!=null&&r(e,["message"],s),e}function wu(t){const e={},n=i(t,["response"]);n!=null&&r(e,["response"],_u(n));const o=i(t,["error"]);return o!=null&&r(e,["error"],gr(o)),e}function Pu(t){const e={},n=i(t,["responsesFile"]);n!=null&&r(e,["fileName"],n);const o=i(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>wu(l))),r(e,["inlinedResponses"],s)}return e}function Mt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata","displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["metadata","state"]);s!=null&&r(e,["state"],fr(s));const l=i(t,["metadata","createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["metadata","endTime"]);a!=null&&r(e,["endTime"],a);const u=i(t,["metadata","updateTime"]);u!=null&&r(e,["updateTime"],u);const d=i(t,["metadata","model"]);d!=null&&r(e,["model"],d);const c=i(t,["metadata","output"]);return c!=null&&r(e,["dest"],Pu(c)),e}function Du(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Mt(a))),r(e,["batchJobs"],l)}return e}function Nu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);return l!=null&&r(e,["error"],gr(l)),e}function hr(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["code"]);o!=null&&r(e,["code"],o);const s=i(t,["message"]);return s!=null&&r(e,["message"],s),e}function bu(t){const e={},n=i(t,["instancesFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsSource","uris"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigquerySource","inputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function ku(t){const e={},n=i(t,["predictionsFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsDestination","outputUriPrefix"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigqueryDestination","outputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function pn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["state"]);s!=null&&r(e,["state"],fr(s));const l=i(t,["error"]);l!=null&&r(e,["error"],hr(l));const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const u=i(t,["startTime"]);u!=null&&r(e,["startTime"],u);const d=i(t,["endTime"]);d!=null&&r(e,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&r(e,["updateTime"],c);const f=i(t,["model"]);f!=null&&r(e,["model"],f);const p=i(t,["inputConfig"]);p!=null&&r(e,["src"],bu(p));const m=i(t,["outputConfig"]);return m!=null&&r(e,["dest"],ku(m)),e}function Lu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>pn(a))),r(e,["batchJobs"],l)}return e}function Fu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);return l!=null&&r(e,["error"],hr(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Re;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Re||(Re={}));class mt{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uu extends _e{constructor(e){super(),this.apiClient=e,this.create=async n=>{var o,s;if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${a}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let l="",a={};const u=ri(this.apiClient,n);l=D("{model}:batchGenerateContent",u._url),a=u._query;const f=u.batch.inputConfig.requests,p=f.requests,m=[];for(const v of p){const y=v;if(y.systemInstruction){const T=y.systemInstruction;delete y.systemInstruction;const E=y.request;E.systemInstruction=T,y.request=E}m.push(y)}return f.requests=m,delete u.config,delete u._url,delete u._query,this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()).then(v=>Mt(v))}return await this.createInternal(n)},this.list=async(n={})=>new mt(Re.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}async createInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=pu(this.apiClient,e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>pn(f))}else{const c=ri(this.apiClient,e);return u=D("{model}:batchGenerateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Mt(f))}}async get(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=mu(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>pn(f))}else{const c=ru(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Mt(f))}}async cancel(e){var n,o,s,l;let a="",u={};if(this.apiClient.isVertexAI()){const d=gu(this.apiClient,e);a=D("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=su(this.apiClient,e);a=D("batches/{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=yu(e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Lu(f),m=new ti;return Object.assign(m,p),m})}else{const c=au(e);return u=D("batches",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Du(f),m=new ti;return Object.assign(m,p),m})}}async delete(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=vu(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Fu(f))}else{const c=uu(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Nu(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vu(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Gu(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function qu(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Bu(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Vu(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Gu(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],qu(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function si(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Bu(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Hu(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function $u(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Ju(t){const e={},n=i(t,["timeRangeFilter"]);if(n!=null&&r(e,["timeRangeFilter"],$u(n)),i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Yu(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Wu(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Yu(n)),e}function Ku(){return{}}function zu(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Xu(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Hu(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],Ju(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],Wu(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],Ku());const a=i(t,["computerUse"]);a!=null&&r(e,["computerUse"],zu(a));const u=i(t,["codeExecution"]);return u!=null&&r(e,["codeExecution"],u),e}function Ou(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function Qu(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function Zu(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],Qu(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function ju(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Ou(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],Zu(o)),e}function ec(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let f=oe(a);Array.isArray(f)&&(f=f.map(p=>si(p))),r(e,["contents"],f)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],si(J(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(p=>Xu(p))),r(e,["tools"],f)}const c=i(t,["toolConfig"]);if(e!==void 0&&c!=null&&r(e,["toolConfig"],ju(c)),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function tc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],tr(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],ec(s,n)),n}function nc(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function oc(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function ic(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function rc(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],ic(s,n)),n}function sc(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function lc(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],sc(n,e)),e}function ac(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function uc(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function cc(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function dc(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],ac(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],uc(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],cc(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function li(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>dc(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function fc(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function pc(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function mc(t){const e={},n=i(t,["timeRangeFilter"]);n!=null&&r(e,["timeRangeFilter"],pc(n));const o=i(t,["excludeDomains"]);return o!=null&&r(e,["excludeDomains"],o),e}function gc(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function hc(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],gc(n)),e}function yc(t){const e={},n=i(t,["excludeDomains"]);return n!=null&&r(e,["excludeDomains"],n),e}function vc(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function Cc(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],vc(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const l=i(t,["httpBasicAuthConfig"]);l!=null&&r(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&r(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function Tc(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],Cc(n)),e}function xc(){return{}}function Sc(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Ec(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>fc(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],mc(s));const l=i(t,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],hc(l));const a=i(t,["enterpriseWebSearch"]);a!=null&&r(e,["enterpriseWebSearch"],yc(a));const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Tc(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],xc());const c=i(t,["computerUse"]);c!=null&&r(e,["computerUse"],Sc(c));const f=i(t,["codeExecution"]);return f!=null&&r(e,["codeExecution"],f),e}function Ic(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function Mc(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function Ac(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],Mc(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function Rc(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Ic(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],Ac(o)),e}function _c(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let p=oe(a);Array.isArray(p)&&(p=p.map(m=>li(m))),r(e,["contents"],p)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],li(J(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>Ec(m))),r(e,["tools"],p)}const c=i(t,["toolConfig"]);e!==void 0&&c!=null&&r(e,["toolConfig"],Rc(c));const f=i(t,["kmsKeyName"]);return e!==void 0&&f!=null&&r(e,["encryption_spec","kmsKeyName"],f),n}function wc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],tr(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],_c(s,n)),n}function Pc(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Dc(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Nc(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function bc(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Nc(s,n)),n}function kc(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function Lc(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],kc(n,e)),e}function At(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["model"]);s!=null&&r(e,["model"],s);const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["updateTime"]);a!=null&&r(e,["updateTime"],a);const u=i(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const d=i(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function Fc(){return{}}function Uc(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>At(a))),r(e,["cachedContents"],l)}return e}function Rt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["model"]);s!=null&&r(e,["model"],s);const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["updateTime"]);a!=null&&r(e,["updateTime"],a);const u=i(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const d=i(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function Vc(){return{}}function Gc(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Rt(a))),r(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qc extends _e{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mt(Re.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=wc(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Rt(f))}else{const c=tc(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>At(f))}}async get(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Pc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Rt(f))}else{const c=nc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>At(f))}}async delete(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Dc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Vc(),p=new jo;return Object.assign(p,f),p})}else{const c=oc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Fc(),p=new jo;return Object.assign(p,f),p})}}async update(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=bc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Rt(f))}else{const c=rc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>At(f))}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Lc(e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Gc(f),m=new ei;return Object.assign(m,p),m})}else{const c=lc(e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Uc(f),m=new ei;return Object.assign(m,p),m})}}}function ai(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(t){return this instanceof U?(this.v=t,this):new U(t)}function Ge(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(h){return function(v){return Promise.resolve(v).then(h,p)}}function u(h,v){o[h]&&(s[h]=function(y){return new Promise(function(T,E){l.push([h,y,T,E])>1||d(h,y)})},v&&(s[h]=v(s[h])))}function d(h,v){try{c(o[h](v))}catch(y){m(l[0][3],y)}}function c(h){h.value instanceof U?Promise.resolve(h.value.v).then(f,p):m(l[0][2],h)}function f(h){d("next",h)}function p(h){d("throw",h)}function m(h,v){h(v),l.shift(),l.length&&d(l[0][0],l[0][1])}}function st(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ai=="function"?ai(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(a){return new Promise(function(u,d){a=t[l](a),s(u,d,a.done,a.value)})}}function s(l,a,u,d){Promise.resolve(d).then(function(c){l({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bc(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:yr(n)}function yr(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Hc(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ui(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let l=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),l&&!yr(t[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class $c{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Jc(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Jc{constructor(e,n,o,s={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),Hc(l)}async sendMessage(e){var n;await this.sendPromise;const o=J(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,a,u;const d=await s,c=(a=(l=d.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const h=c?[c]:[];this.recordHistory(o,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=J(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?ui(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var o,s;return Ge(this,arguments,function*(){var a,u,d,c;const f=[];try{for(var p=!0,m=st(e),h;h=yield U(m.next()),a=h.done,!a;p=!0){c=h.value,p=!1;const v=c;if(Bc(v)){const y=(s=(o=v.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content;y!==void 0&&f.push(y)}yield yield U(v)}}catch(v){u={error:v}}finally{try{!p&&!a&&(d=m.return)&&(yield U(d.call(m)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(l=>l.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ui(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jt extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Jt.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yc(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function Wc(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],Yc(n,e)),e}function Kc(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["message"]);o!=null&&r(e,["message"],o);const s=i(t,["code"]);return s!=null&&r(e,["code"],s),e}function zc(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["mimeType"]);s!=null&&r(e,["mimeType"],s);const l=i(t,["sizeBytes"]);l!=null&&r(e,["sizeBytes"],l);const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const u=i(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const f=i(t,["uri"]);f!=null&&r(e,["uri"],f);const p=i(t,["downloadUri"]);p!=null&&r(e,["downloadUri"],p);const m=i(t,["state"]);m!=null&&r(e,["state"],m);const h=i(t,["source"]);h!=null&&r(e,["source"],h);const v=i(t,["videoMetadata"]);v!=null&&r(e,["videoMetadata"],v);const y=i(t,["error"]);return y!=null&&r(e,["error"],Kc(y)),e}function Xc(t){const e={},n=i(t,["file"]);n!=null&&r(e,["file"],zc(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function Oc(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","file"],ar(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function Qc(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","file"],ar(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function Zc(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["message"]);o!=null&&r(e,["message"],o);const s=i(t,["code"]);return s!=null&&r(e,["code"],s),e}function mn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["mimeType"]);s!=null&&r(e,["mimeType"],s);const l=i(t,["sizeBytes"]);l!=null&&r(e,["sizeBytes"],l);const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const u=i(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const f=i(t,["uri"]);f!=null&&r(e,["uri"],f);const p=i(t,["downloadUri"]);p!=null&&r(e,["downloadUri"],p);const m=i(t,["state"]);m!=null&&r(e,["state"],m);const h=i(t,["source"]);h!=null&&r(e,["source"],h);const v=i(t,["videoMetadata"]);v!=null&&r(e,["videoMetadata"],v);const y=i(t,["error"]);return y!=null&&r(e,["error"],Zc(y)),e}function jc(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>mn(a))),r(e,["files"],l)}return e}function ed(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function td(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nd extends _e{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mt(Re.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>mn(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wc(e);return l=D("files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=jc(d),f=new va;return Object.assign(f,c),f})}}async createInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Xc(e);return l=D("upload/v1beta/files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=ed(d),f=new Ca;return Object.assign(f,c),f})}}async get(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Oc(e);return l=D("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>mn(d))}}async delete(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Qc(e);return l=D("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=td(),c=new Ta;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function od(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function vr(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],od(n)),e}function id(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],vr(o)),e}function rd(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>id(s))),r(e,["speakerVoiceConfigs"],o)}return e}function sd(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],vr(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],rd(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function ld(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function ad(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function ud(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function cd(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],ld(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],ad(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],ud(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function dd(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>cd(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function fd(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function pd(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function md(t){const e={},n=i(t,["timeRangeFilter"]);if(n!=null&&r(e,["timeRangeFilter"],pd(n)),i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function gd(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function hd(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],gd(n)),e}function yd(){return{}}function vd(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Cd(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>fd(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],md(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],hd(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],yd());const a=i(t,["computerUse"]);a!=null&&r(e,["computerUse"],vd(a));const u=i(t,["codeExecution"]);return u!=null&&r(e,["codeExecution"],u),e}function Td(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ci(){return{}}function xd(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const l=i(t,["prefixPaddingMs"]);l!=null&&r(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&r(e,["silenceDurationMs"],a),e}function Sd(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],xd(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function Ed(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Id(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],Ed(o)),e}function Md(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function Ad(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],sd(Dn(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],dd(J(h)));const v=i(t,["tools"]);if(e!==void 0&&v!=null){let S=Ye(v);Array.isArray(S)&&(S=S.map(_=>Cd(Je(_)))),r(e,["setup","tools"],S)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],Td(y));const T=i(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","inputAudioTranscription"],ci());const E=i(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","outputAudioTranscription"],ci());const I=i(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&r(e,["setup","realtimeInputConfig"],Sd(I));const M=i(t,["contextWindowCompression"]);e!==void 0&&M!=null&&r(e,["setup","contextWindowCompression"],Id(M));const R=i(t,["proactivity"]);return e!==void 0&&R!=null&&r(e,["setup","proactivity"],Md(R)),n}function Rd(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Ad(s,n)),n}function _d(){return{}}function wd(){return{}}function Pd(t){const e={},n=i(t,["media"]);n!=null&&r(e,["mediaChunks"],nr(n));const o=i(t,["audio"]);o!=null&&r(e,["audio"],ir(o));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const l=i(t,["video"]);l!=null&&r(e,["video"],or(l));const a=i(t,["text"]);return a!=null&&r(e,["text"],a),i(t,["activityStart"])!=null&&r(e,["activityStart"],_d()),i(t,["activityEnd"])!=null&&r(e,["activityEnd"],wd()),e}function Cr(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["weight"]);return o!=null&&r(e,["weight"],o),e}function Dd(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Cr(s))),r(e,["weightedPrompts"],o)}return e}function Tr(t){const e={},n=i(t,["temperature"]);n!=null&&r(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&r(e,["topK"],o);const s=i(t,["seed"]);s!=null&&r(e,["seed"],s);const l=i(t,["guidance"]);l!=null&&r(e,["guidance"],l);const a=i(t,["bpm"]);a!=null&&r(e,["bpm"],a);const u=i(t,["density"]);u!=null&&r(e,["density"],u);const d=i(t,["brightness"]);d!=null&&r(e,["brightness"],d);const c=i(t,["scale"]);c!=null&&r(e,["scale"],c);const f=i(t,["muteBass"]);f!=null&&r(e,["muteBass"],f);const p=i(t,["muteDrums"]);p!=null&&r(e,["muteDrums"],p);const m=i(t,["onlyBassAndDrums"]);m!=null&&r(e,["onlyBassAndDrums"],m);const h=i(t,["musicGenerationMode"]);return h!=null&&r(e,["musicGenerationMode"],h),e}function Nd(t){const e={},n=i(t,["musicGenerationConfig"]);return n!=null&&r(e,["musicGenerationConfig"],Tr(n)),e}function xr(t){const e={},n=i(t,["model"]);return n!=null&&r(e,["model"],n),e}function Sr(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Cr(s))),r(e,["weightedPrompts"],o)}return e}function gn(t){const e={},n=i(t,["setup"]);n!=null&&r(e,["setup"],xr(n));const o=i(t,["clientContent"]);o!=null&&r(e,["clientContent"],Sr(o));const s=i(t,["musicGenerationConfig"]);s!=null&&r(e,["musicGenerationConfig"],Tr(s));const l=i(t,["playbackControl"]);return l!=null&&r(e,["playbackControl"],l),e}function bd(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function kd(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],bd(n)),e}function Ld(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],kd(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function Fd(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Ud(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Vd(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Gd(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Fd(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Ud(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Vd(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function qd(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Gd(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Bd(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function Hd(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function $d(t){const e={},n=i(t,["timeRangeFilter"]);n!=null&&r(e,["timeRangeFilter"],Hd(n));const o=i(t,["excludeDomains"]);return o!=null&&r(e,["excludeDomains"],o),e}function Jd(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Yd(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Jd(n)),e}function Wd(t){const e={},n=i(t,["excludeDomains"]);return n!=null&&r(e,["excludeDomains"],n),e}function Kd(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function zd(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],Kd(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const l=i(t,["httpBasicAuthConfig"]);l!=null&&r(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&r(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function Xd(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],zd(n)),e}function Od(){return{}}function Qd(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Zd(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Bd(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],$d(s));const l=i(t,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],Yd(l));const a=i(t,["enterpriseWebSearch"]);a!=null&&r(e,["enterpriseWebSearch"],Wd(a));const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Xd(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],Od());const c=i(t,["computerUse"]);c!=null&&r(e,["computerUse"],Qd(c));const f=i(t,["codeExecution"]);return f!=null&&r(e,["codeExecution"],f),e}function jd(t){const e={},n=i(t,["handle"]);n!=null&&r(e,["handle"],n);const o=i(t,["transparent"]);return o!=null&&r(e,["transparent"],o),e}function di(){return{}}function ef(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const l=i(t,["prefixPaddingMs"]);l!=null&&r(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&r(e,["silenceDurationMs"],a),e}function tf(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],ef(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function nf(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function of(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],nf(o)),e}function rf(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function sf(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],Ld(Dn(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],qd(J(h)));const v=i(t,["tools"]);if(e!==void 0&&v!=null){let S=Ye(v);Array.isArray(S)&&(S=S.map(_=>Zd(Je(_)))),r(e,["setup","tools"],S)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],jd(y));const T=i(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","inputAudioTranscription"],di());const E=i(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","outputAudioTranscription"],di());const I=i(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&r(e,["setup","realtimeInputConfig"],tf(I));const M=i(t,["contextWindowCompression"]);e!==void 0&&M!=null&&r(e,["setup","contextWindowCompression"],of(M));const R=i(t,["proactivity"]);return e!==void 0&&R!=null&&r(e,["setup","proactivity"],rf(R)),n}function lf(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],sf(s,n)),n}function af(){return{}}function uf(){return{}}function cf(t){const e={},n=i(t,["media"]);n!=null&&r(e,["mediaChunks"],nr(n));const o=i(t,["audio"]);o!=null&&r(e,["audio"],ir(o));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const l=i(t,["video"]);l!=null&&r(e,["video"],or(l));const a=i(t,["text"]);return a!=null&&r(e,["text"],a),i(t,["activityStart"])!=null&&r(e,["activityStart"],af()),i(t,["activityEnd"])!=null&&r(e,["activityEnd"],uf()),e}function df(){return{}}function ff(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function pf(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function mf(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function gf(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],ff(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],pf(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],mf(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function hf(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>gf(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function fi(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["finished"]);return o!=null&&r(e,["finished"],o),e}function yf(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function vf(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>yf(s))),r(e,["urlMetadata"],o)}return e}function Cf(t){const e={},n=i(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],hf(n));const o=i(t,["turnComplete"]);o!=null&&r(e,["turnComplete"],o);const s=i(t,["interrupted"]);s!=null&&r(e,["interrupted"],s);const l=i(t,["groundingMetadata"]);l!=null&&r(e,["groundingMetadata"],l);const a=i(t,["generationComplete"]);a!=null&&r(e,["generationComplete"],a);const u=i(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],fi(u));const d=i(t,["outputTranscription"]);d!=null&&r(e,["outputTranscription"],fi(d));const c=i(t,["urlContextMetadata"]);return c!=null&&r(e,["urlContextMetadata"],vf(c)),e}function Tf(t){const e={},n=i(t,["id"]);n!=null&&r(e,["id"],n);const o=i(t,["args"]);o!=null&&r(e,["args"],o);const s=i(t,["name"]);return s!=null&&r(e,["name"],s),e}function xf(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Tf(s))),r(e,["functionCalls"],o)}return e}function Sf(t){const e={},n=i(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function St(t){const e={},n=i(t,["modality"]);n!=null&&r(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&r(e,["tokenCount"],o),e}function Ef(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&r(e,["cachedContentTokenCount"],o);const s=i(t,["responseTokenCount"]);s!=null&&r(e,["responseTokenCount"],s);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&r(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&r(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>St(h))),r(e,["promptTokensDetails"],m)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>St(h))),r(e,["cacheTokensDetails"],m)}const f=i(t,["responseTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>St(h))),r(e,["responseTokensDetails"],m)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>St(h))),r(e,["toolUsePromptTokensDetails"],m)}return e}function If(t){const e={},n=i(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function Mf(t){const e={},n=i(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&r(e,["resumable"],o);const s=i(t,["lastConsumedClientMessageIndex"]);return s!=null&&r(e,["lastConsumedClientMessageIndex"],s),e}function Af(t){const e={};i(t,["setupComplete"])!=null&&r(e,["setupComplete"],df());const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],Cf(o));const s=i(t,["toolCall"]);s!=null&&r(e,["toolCall"],xf(s));const l=i(t,["toolCallCancellation"]);l!=null&&r(e,["toolCallCancellation"],Sf(l));const a=i(t,["usageMetadata"]);a!=null&&r(e,["usageMetadata"],Ef(a));const u=i(t,["goAway"]);u!=null&&r(e,["goAway"],If(u));const d=i(t,["sessionResumptionUpdate"]);return d!=null&&r(e,["sessionResumptionUpdate"],Mf(d)),e}function Rf(){return{}}function _f(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["weight"]);return o!=null&&r(e,["weight"],o),e}function wf(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>_f(s))),r(e,["weightedPrompts"],o)}return e}function Pf(t){const e={},n=i(t,["temperature"]);n!=null&&r(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&r(e,["topK"],o);const s=i(t,["seed"]);s!=null&&r(e,["seed"],s);const l=i(t,["guidance"]);l!=null&&r(e,["guidance"],l);const a=i(t,["bpm"]);a!=null&&r(e,["bpm"],a);const u=i(t,["density"]);u!=null&&r(e,["density"],u);const d=i(t,["brightness"]);d!=null&&r(e,["brightness"],d);const c=i(t,["scale"]);c!=null&&r(e,["scale"],c);const f=i(t,["muteBass"]);f!=null&&r(e,["muteBass"],f);const p=i(t,["muteDrums"]);p!=null&&r(e,["muteDrums"],p);const m=i(t,["onlyBassAndDrums"]);m!=null&&r(e,["onlyBassAndDrums"],m);const h=i(t,["musicGenerationMode"]);return h!=null&&r(e,["musicGenerationMode"],h),e}function Df(t){const e={},n=i(t,["clientContent"]);n!=null&&r(e,["clientContent"],wf(n));const o=i(t,["musicGenerationConfig"]);return o!=null&&r(e,["musicGenerationConfig"],Pf(o)),e}function Nf(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);o!=null&&r(e,["mimeType"],o);const s=i(t,["sourceMetadata"]);return s!=null&&r(e,["sourceMetadata"],Df(s)),e}function bf(t){const e={},n=i(t,["audioChunks"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Nf(s))),r(e,["audioChunks"],o)}return e}function kf(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["filteredReason"]);return o!=null&&r(e,["filteredReason"],o),e}function Lf(t){const e={};i(t,["setupComplete"])!=null&&r(e,["setupComplete"],Rf());const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],bf(o));const s=i(t,["filteredPrompt"]);return s!=null&&r(e,["filteredPrompt"],kf(s)),e}function Ff(t){const e={},n=i(t,["sessionId"]);return n!=null&&r(e,["sessionId"],n),e}function Uf(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Vf(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Gf(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function qf(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Uf(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Vf(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Gf(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Bf(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>qf(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function pi(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["finished"]);return o!=null&&r(e,["finished"],o),e}function Hf(t){const e={},n=i(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],Bf(n));const o=i(t,["turnComplete"]);o!=null&&r(e,["turnComplete"],o);const s=i(t,["interrupted"]);s!=null&&r(e,["interrupted"],s);const l=i(t,["groundingMetadata"]);l!=null&&r(e,["groundingMetadata"],l);const a=i(t,["generationComplete"]);a!=null&&r(e,["generationComplete"],a);const u=i(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],pi(u));const d=i(t,["outputTranscription"]);return d!=null&&r(e,["outputTranscription"],pi(d)),e}function $f(t){const e={},n=i(t,["args"]);n!=null&&r(e,["args"],n);const o=i(t,["name"]);return o!=null&&r(e,["name"],o),e}function Jf(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>$f(s))),r(e,["functionCalls"],o)}return e}function Yf(t){const e={},n=i(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function Et(t){const e={},n=i(t,["modality"]);n!=null&&r(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&r(e,["tokenCount"],o),e}function Wf(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&r(e,["cachedContentTokenCount"],o);const s=i(t,["candidatesTokenCount"]);s!=null&&r(e,["responseTokenCount"],s);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&r(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&r(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(v=>Et(v))),r(e,["promptTokensDetails"],h)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(v=>Et(v))),r(e,["cacheTokensDetails"],h)}const f=i(t,["candidatesTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(v=>Et(v))),r(e,["responseTokensDetails"],h)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(v=>Et(v))),r(e,["toolUsePromptTokensDetails"],h)}const m=i(t,["trafficType"]);return m!=null&&r(e,["trafficType"],m),e}function Kf(t){const e={},n=i(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function zf(t){const e={},n=i(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&r(e,["resumable"],o);const s=i(t,["lastConsumedClientMessageIndex"]);return s!=null&&r(e,["lastConsumedClientMessageIndex"],s),e}function Xf(t){const e={},n=i(t,["setupComplete"]);n!=null&&r(e,["setupComplete"],Ff(n));const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],Hf(o));const s=i(t,["toolCall"]);s!=null&&r(e,["toolCall"],Jf(s));const l=i(t,["toolCallCancellation"]);l!=null&&r(e,["toolCallCancellation"],Yf(l));const a=i(t,["usageMetadata"]);a!=null&&r(e,["usageMetadata"],Wf(a));const u=i(t,["goAway"]);u!=null&&r(e,["goAway"],Kf(u));const d=i(t,["sessionResumptionUpdate"]);return d!=null&&r(e,["sessionResumptionUpdate"],zf(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Of(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Qf(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Zf(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function jf(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Of(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Qf(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Zf(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Yt(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>jf(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function ep(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["enum"]);l!=null&&r(e,["enum"],l);const a=i(t,["example"]);a!=null&&r(e,["example"],a);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const p=i(t,["maxProperties"]);p!=null&&r(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&r(e,["maximum"],m);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const v=i(t,["minLength"]);v!=null&&r(e,["minLength"],v);const y=i(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const T=i(t,["minimum"]);T!=null&&r(e,["minimum"],T);const E=i(t,["nullable"]);E!=null&&r(e,["nullable"],E);const I=i(t,["pattern"]);I!=null&&r(e,["pattern"],I);const M=i(t,["properties"]);M!=null&&r(e,["properties"],M);const R=i(t,["propertyOrdering"]);R!=null&&r(e,["propertyOrdering"],R);const S=i(t,["required"]);S!=null&&r(e,["required"],S);const _=i(t,["title"]);_!=null&&r(e,["title"],_);const A=i(t,["type"]);return A!=null&&r(e,["type"],A),e}function tp(t){const e={};if(i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["category"]);n!=null&&r(e,["category"],n);const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function np(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function op(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function ip(t){const e={},n=i(t,["timeRangeFilter"]);if(n!=null&&r(e,["timeRangeFilter"],op(n)),i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function rp(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function sp(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],rp(n)),e}function lp(){return{}}function ap(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function up(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>np(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],ip(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],sp(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],lp());const a=i(t,["computerUse"]);a!=null&&r(e,["computerUse"],ap(a));const u=i(t,["codeExecution"]);return u!=null&&r(e,["codeExecution"],u),e}function cp(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function dp(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function fp(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],dp(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function pp(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],cp(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],fp(o)),e}function mp(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Er(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],mp(n)),e}function gp(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],Er(o)),e}function hp(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>gp(s))),r(e,["speakerVoiceConfigs"],o)}return e}function yp(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Er(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],hp(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function vp(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function Cp(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],Yt(J(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const v=i(e,["frequencyPenalty"]);v!=null&&r(o,["frequencyPenalty"],v);const y=i(e,["seed"]);y!=null&&r(o,["seed"],y);const T=i(e,["responseMimeType"]);T!=null&&r(o,["responseMimeType"],T);const E=i(e,["responseSchema"]);E!=null&&r(o,["responseSchema"],ep(wn(E)));const I=i(e,["responseJsonSchema"]);if(I!=null&&r(o,["responseJsonSchema"],I),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=i(e,["safetySettings"]);if(n!==void 0&&M!=null){let N=M;Array.isArray(N)&&(N=N.map(G=>tp(G))),r(n,["safetySettings"],N)}const R=i(e,["tools"]);if(n!==void 0&&R!=null){let N=Ye(R);Array.isArray(N)&&(N=N.map(G=>up(Je(G)))),r(n,["tools"],N)}const S=i(e,["toolConfig"]);if(n!==void 0&&S!=null&&r(n,["toolConfig"],pp(S)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=i(e,["cachedContent"]);n!==void 0&&_!=null&&r(n,["cachedContent"],me(t,_));const A=i(e,["responseModalities"]);A!=null&&r(o,["responseModalities"],A);const P=i(e,["mediaResolution"]);P!=null&&r(o,["mediaResolution"],P);const w=i(e,["speechConfig"]);if(w!=null&&r(o,["speechConfig"],yp(Pn(w))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=i(e,["thinkingConfig"]);return b!=null&&r(o,["thinkingConfig"],vp(b)),o}function mi(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>Yt(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["generationConfig"],Cp(t,l,n)),n}function Tp(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["requests[]","title"],s);const l=i(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&r(e,["requests[]","outputDimensionality"],l),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function xp(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);s!=null&&r(n,["requests[]","content"],sr(t,s));const l=i(e,["config"]);l!=null&&r(n,["config"],Tp(l,n));const a=i(e,["model"]);return a!==void 0&&r(n,["requests[]","model"],L(t,a)),n}function Sp(t,e){const n={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["aspectRatio"]);e!==void 0&&s!=null&&r(e,["parameters","aspectRatio"],s);const l=i(t,["guidanceScale"]);if(e!==void 0&&l!=null&&r(e,["parameters","guidanceScale"],l),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&r(e,["parameters","safetySetting"],a);const u=i(t,["personGeneration"]);e!==void 0&&u!=null&&r(e,["parameters","personGeneration"],u);const d=i(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&r(e,["parameters","includeSafetyAttributes"],d);const c=i(t,["includeRaiReason"]);e!==void 0&&c!=null&&r(e,["parameters","includeRaiReason"],c);const f=i(t,["language"]);e!==void 0&&f!=null&&r(e,["parameters","language"],f);const p=i(t,["outputMimeType"]);e!==void 0&&p!=null&&r(e,["parameters","outputOptions","mimeType"],p);const m=i(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&r(e,["parameters","outputOptions","compressionQuality"],m),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const h=i(t,["imageSize"]);if(e!==void 0&&h!=null&&r(e,["parameters","sampleImageSize"],h),i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Ep(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&r(n,["config"],Sp(l,n)),n}function Ip(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Mp(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&r(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&r(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],ur(t,u)),o}function Ap(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],Mp(t,o,n)),n}function Rp(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),n}function _p(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Rp(s,n)),n}function wp(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Pp(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Dp(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>Yt(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["config"],Pp(l)),n}function Np(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["imageBytes"]);n!=null&&r(e,["bytesBase64Encoded"],we(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function bp(t,e){const n={},o=i(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=i(t,["durationSeconds"]);if(e!==void 0&&s!=null&&r(e,["parameters","durationSeconds"],s),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(t,["aspectRatio"]);if(e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l),i(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=i(t,["personGeneration"]);if(e!==void 0&&a!=null&&r(e,["parameters","personGeneration"],a),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=i(t,["negativePrompt"]);e!==void 0&&u!=null&&r(e,["parameters","negativePrompt"],u);const d=i(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&r(e,["parameters","enhancePrompt"],d),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(i(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(i(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(i(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function kp(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["image"]);if(l!=null&&r(n,["instances[0]","image"],Np(l)),i(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=i(e,["config"]);return a!=null&&r(n,["config"],bp(a,n)),n}function Lp(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Fp(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Up(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Vp(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Lp(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Fp(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Up(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Ke(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Vp(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Gp(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["enum"]);l!=null&&r(e,["enum"],l);const a=i(t,["example"]);a!=null&&r(e,["example"],a);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const p=i(t,["maxProperties"]);p!=null&&r(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&r(e,["maximum"],m);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const v=i(t,["minLength"]);v!=null&&r(e,["minLength"],v);const y=i(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const T=i(t,["minimum"]);T!=null&&r(e,["minimum"],T);const E=i(t,["nullable"]);E!=null&&r(e,["nullable"],E);const I=i(t,["pattern"]);I!=null&&r(e,["pattern"],I);const M=i(t,["properties"]);M!=null&&r(e,["properties"],M);const R=i(t,["propertyOrdering"]);R!=null&&r(e,["propertyOrdering"],R);const S=i(t,["required"]);S!=null&&r(e,["required"],S);const _=i(t,["title"]);_!=null&&r(e,["title"],_);const A=i(t,["type"]);return A!=null&&r(e,["type"],A),e}function qp(t){const e={},n=i(t,["featureSelectionPreference"]);return n!=null&&r(e,["featureSelectionPreference"],n),e}function Bp(t){const e={},n=i(t,["method"]);n!=null&&r(e,["method"],n);const o=i(t,["category"]);o!=null&&r(e,["category"],o);const s=i(t,["threshold"]);return s!=null&&r(e,["threshold"],s),e}function Hp(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function $p(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Jp(t){const e={},n=i(t,["timeRangeFilter"]);n!=null&&r(e,["timeRangeFilter"],$p(n));const o=i(t,["excludeDomains"]);return o!=null&&r(e,["excludeDomains"],o),e}function Yp(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Wp(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Yp(n)),e}function Kp(t){const e={},n=i(t,["excludeDomains"]);return n!=null&&r(e,["excludeDomains"],n),e}function zp(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function Xp(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],zp(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const l=i(t,["httpBasicAuthConfig"]);l!=null&&r(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&r(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function Op(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],Xp(n)),e}function Qp(){return{}}function Zp(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Ir(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Hp(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],Jp(s));const l=i(t,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],Wp(l));const a=i(t,["enterpriseWebSearch"]);a!=null&&r(e,["enterpriseWebSearch"],Kp(a));const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Op(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],Qp());const c=i(t,["computerUse"]);c!=null&&r(e,["computerUse"],Zp(c));const f=i(t,["codeExecution"]);return f!=null&&r(e,["codeExecution"],f),e}function jp(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function em(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function tm(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],em(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function nm(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],jp(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],tm(o)),e}function om(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function im(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],om(n)),e}function rm(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],im(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function sm(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function lm(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],Ke(J(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const v=i(e,["frequencyPenalty"]);v!=null&&r(o,["frequencyPenalty"],v);const y=i(e,["seed"]);y!=null&&r(o,["seed"],y);const T=i(e,["responseMimeType"]);T!=null&&r(o,["responseMimeType"],T);const E=i(e,["responseSchema"]);E!=null&&r(o,["responseSchema"],Gp(wn(E)));const I=i(e,["responseJsonSchema"]);I!=null&&r(o,["responseJsonSchema"],I);const M=i(e,["routingConfig"]);M!=null&&r(o,["routingConfig"],M);const R=i(e,["modelSelectionConfig"]);R!=null&&r(o,["modelConfig"],qp(R));const S=i(e,["safetySettings"]);if(n!==void 0&&S!=null){let Y=S;Array.isArray(Y)&&(Y=Y.map(he=>Bp(he))),r(n,["safetySettings"],Y)}const _=i(e,["tools"]);if(n!==void 0&&_!=null){let Y=Ye(_);Array.isArray(Y)&&(Y=Y.map(he=>Ir(Je(he)))),r(n,["tools"],Y)}const A=i(e,["toolConfig"]);n!==void 0&&A!=null&&r(n,["toolConfig"],nm(A));const P=i(e,["labels"]);n!==void 0&&P!=null&&r(n,["labels"],P);const w=i(e,["cachedContent"]);n!==void 0&&w!=null&&r(n,["cachedContent"],me(t,w));const b=i(e,["responseModalities"]);b!=null&&r(o,["responseModalities"],b);const N=i(e,["mediaResolution"]);N!=null&&r(o,["mediaResolution"],N);const G=i(e,["speechConfig"]);G!=null&&r(o,["speechConfig"],rm(Pn(G)));const K=i(e,["audioTimestamp"]);K!=null&&r(o,["audioTimestamp"],K);const X=i(e,["thinkingConfig"]);return X!=null&&r(o,["thinkingConfig"],sm(X)),o}function gi(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>Ke(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["generationConfig"],lm(t,l,n)),n}function am(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["instances[]","task_type"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["instances[]","title"],s);const l=i(t,["outputDimensionality"]);e!==void 0&&l!=null&&r(e,["parameters","outputDimensionality"],l);const a=i(t,["mimeType"]);e!==void 0&&a!=null&&r(e,["instances[]","mimeType"],a);const u=i(t,["autoTruncate"]);return e!==void 0&&u!=null&&r(e,["parameters","autoTruncate"],u),n}function um(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);s!=null&&r(n,["instances[]","content"],sr(t,s));const l=i(e,["config"]);return l!=null&&r(n,["config"],am(l,n)),n}function cm(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&r(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&r(e,["parameters","includeRaiReason"],m);const h=i(t,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const v=i(t,["outputMimeType"]);e!==void 0&&v!=null&&r(e,["parameters","outputOptions","mimeType"],v);const y=i(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&r(e,["parameters","outputOptions","compressionQuality"],y);const T=i(t,["addWatermark"]);e!==void 0&&T!=null&&r(e,["parameters","addWatermark"],T);const E=i(t,["imageSize"]);e!==void 0&&E!=null&&r(e,["parameters","sampleImageSize"],E);const I=i(t,["enhancePrompt"]);return e!==void 0&&I!=null&&r(e,["parameters","enhancePrompt"],I),n}function dm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&r(n,["config"],cm(l,n)),n}function ge(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["imageBytes"]);o!=null&&r(e,["bytesBase64Encoded"],we(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function fm(t){const e={},n=i(t,["maskMode"]);n!=null&&r(e,["maskMode"],n);const o=i(t,["segmentationClasses"]);o!=null&&r(e,["maskClasses"],o);const s=i(t,["maskDilation"]);return s!=null&&r(e,["dilation"],s),e}function pm(t){const e={},n=i(t,["controlType"]);n!=null&&r(e,["controlType"],n);const o=i(t,["enableControlImageComputation"]);return o!=null&&r(e,["computeControl"],o),e}function mm(t){const e={},n=i(t,["styleDescription"]);return n!=null&&r(e,["styleDescription"],n),e}function gm(t){const e={},n=i(t,["subjectType"]);n!=null&&r(e,["subjectType"],n);const o=i(t,["subjectDescription"]);return o!=null&&r(e,["subjectDescription"],o),e}function hm(t){const e={},n=i(t,["referenceImage"]);n!=null&&r(e,["referenceImage"],ge(n));const o=i(t,["referenceId"]);o!=null&&r(e,["referenceId"],o);const s=i(t,["referenceType"]);s!=null&&r(e,["referenceType"],s);const l=i(t,["maskImageConfig"]);l!=null&&r(e,["maskImageConfig"],fm(l));const a=i(t,["controlImageConfig"]);a!=null&&r(e,["controlImageConfig"],pm(a));const u=i(t,["styleImageConfig"]);u!=null&&r(e,["styleImageConfig"],mm(u));const d=i(t,["subjectImageConfig"]);return d!=null&&r(e,["subjectImageConfig"],gm(d)),e}function ym(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&r(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&r(e,["parameters","includeRaiReason"],m);const h=i(t,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const v=i(t,["outputMimeType"]);e!==void 0&&v!=null&&r(e,["parameters","outputOptions","mimeType"],v);const y=i(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&r(e,["parameters","outputOptions","compressionQuality"],y);const T=i(t,["addWatermark"]);e!==void 0&&T!=null&&r(e,["parameters","addWatermark"],T);const E=i(t,["editMode"]);e!==void 0&&E!=null&&r(e,["parameters","editMode"],E);const I=i(t,["baseSteps"]);return e!==void 0&&I!=null&&r(e,["parameters","editConfig","baseSteps"],I),n}function vm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>hm(d))),r(n,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&r(n,["config"],ym(a,n)),n}function Cm(t,e){const n={},o=i(t,["includeRaiReason"]);e!==void 0&&o!=null&&r(e,["parameters","includeRaiReason"],o);const s=i(t,["outputMimeType"]);e!==void 0&&s!=null&&r(e,["parameters","outputOptions","mimeType"],s);const l=i(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&r(e,["parameters","outputOptions","compressionQuality"],l);const a=i(t,["enhanceInputImage"]);e!==void 0&&a!=null&&r(e,["parameters","upscaleConfig","enhanceInputImage"],a);const u=i(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&r(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const d=i(t,["numberOfImages"]);e!==void 0&&d!=null&&r(e,["parameters","sampleCount"],d);const c=i(t,["mode"]);return e!==void 0&&c!=null&&r(e,["parameters","mode"],c),n}function Tm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["image"]);s!=null&&r(n,["instances[0]","image"],ge(s));const l=i(e,["upscaleFactor"]);l!=null&&r(n,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&r(n,["config"],Cm(a,n)),n}function xm(t){const e={},n=i(t,["productImage"]);return n!=null&&r(e,["image"],ge(n)),e}function Sm(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["personImage"]);e!==void 0&&s!=null&&r(e,["instances[0]","personImage","image"],ge(s));const l=i(t,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>xm(u))),r(e,["instances[0]","productImages"],a)}return n}function Em(t,e){const n={},o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["baseSteps"]);e!==void 0&&s!=null&&r(e,["parameters","editConfig","baseSteps"],s);const l=i(t,["outputGcsUri"]);e!==void 0&&l!=null&&r(e,["parameters","storageUri"],l);const a=i(t,["seed"]);e!==void 0&&a!=null&&r(e,["parameters","seed"],a);const u=i(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&r(e,["parameters","safetySetting"],u);const d=i(t,["personGeneration"]);e!==void 0&&d!=null&&r(e,["parameters","personGeneration"],d);const c=i(t,["outputMimeType"]);e!==void 0&&c!=null&&r(e,["parameters","outputOptions","mimeType"],c);const f=i(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&r(e,["parameters","outputOptions","compressionQuality"],f);const p=i(t,["enhancePrompt"]);return e!==void 0&&p!=null&&r(e,["parameters","enhancePrompt"],p),n}function Im(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["source"]);s!=null&&r(n,["config"],Sm(s,n));const l=i(e,["config"]);return l!=null&&r(n,["config"],Em(l,n)),n}function Mm(t){const e={},n=i(t,["image"]);return n!=null&&r(e,["image"],ge(n)),e}function Am(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&r(e,["instances[0]","image"],ge(s));const l=i(t,["scribbleImage"]);return e!==void 0&&l!=null&&r(e,["instances[0]","scribble"],Mm(l)),n}function Rm(t,e){const n={},o=i(t,["mode"]);e!==void 0&&o!=null&&r(e,["parameters","mode"],o);const s=i(t,["maxPredictions"]);e!==void 0&&s!=null&&r(e,["parameters","maxPredictions"],s);const l=i(t,["confidenceThreshold"]);e!==void 0&&l!=null&&r(e,["parameters","confidenceThreshold"],l);const a=i(t,["maskDilation"]);e!==void 0&&a!=null&&r(e,["parameters","maskDilation"],a);const u=i(t,["binaryColorThreshold"]);return e!==void 0&&u!=null&&r(e,["parameters","binaryColorThreshold"],u),n}function _m(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["source"]);s!=null&&r(n,["config"],Am(s,n));const l=i(e,["config"]);return l!=null&&r(n,["config"],Rm(l,n)),n}function wm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Pm(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&r(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&r(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],ur(t,u)),o}function Dm(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],Pm(t,o,n)),n}function Nm(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),n}function bm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Nm(s,n)),n}function km(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Lm(t,e){const n={},o=i(t,["systemInstruction"]);e!==void 0&&o!=null&&r(e,["systemInstruction"],Ke(J(o)));const s=i(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Ir(u))),r(e,["tools"],a)}const l=i(t,["generationConfig"]);return e!==void 0&&l!=null&&r(e,["generationConfig"],l),n}function Fm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>Ke(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["config"],Lm(l,n)),n}function Um(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>Ke(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["config"],l),n}function Vm(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["videoBytes"]);o!=null&&r(e,["bytesBase64Encoded"],we(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Gm(t){const e={},n=i(t,["image"]);n!=null&&r(e,["image"],ge(n));const o=i(t,["referenceType"]);return o!=null&&r(e,["referenceType"],o),e}function qm(t,e){const n={},o=i(t,["numberOfVideos"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["outputGcsUri"]);e!==void 0&&s!=null&&r(e,["parameters","storageUri"],s);const l=i(t,["fps"]);e!==void 0&&l!=null&&r(e,["parameters","fps"],l);const a=i(t,["durationSeconds"]);e!==void 0&&a!=null&&r(e,["parameters","durationSeconds"],a);const u=i(t,["seed"]);e!==void 0&&u!=null&&r(e,["parameters","seed"],u);const d=i(t,["aspectRatio"]);e!==void 0&&d!=null&&r(e,["parameters","aspectRatio"],d);const c=i(t,["resolution"]);e!==void 0&&c!=null&&r(e,["parameters","resolution"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["pubsubTopic"]);e!==void 0&&p!=null&&r(e,["parameters","pubsubTopic"],p);const m=i(t,["negativePrompt"]);e!==void 0&&m!=null&&r(e,["parameters","negativePrompt"],m);const h=i(t,["enhancePrompt"]);e!==void 0&&h!=null&&r(e,["parameters","enhancePrompt"],h);const v=i(t,["generateAudio"]);e!==void 0&&v!=null&&r(e,["parameters","generateAudio"],v);const y=i(t,["lastFrame"]);e!==void 0&&y!=null&&r(e,["instances[0]","lastFrame"],ge(y));const T=i(t,["referenceImages"]);if(e!==void 0&&T!=null){let I=T;Array.isArray(I)&&(I=I.map(M=>Gm(M))),r(e,["instances[0]","referenceImages"],I)}const E=i(t,["compressionQuality"]);return e!==void 0&&E!=null&&r(e,["parameters","compressionQuality"],E),n}function Bm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["image"]);l!=null&&r(n,["instances[0]","image"],ge(l));const a=i(e,["video"]);a!=null&&r(n,["instances[0]","video"],Vm(a));const u=i(e,["config"]);return u!=null&&r(n,["config"],qm(u,n)),n}function Hm(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function $m(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Jm(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Ym(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Hm(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],$m(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Jm(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Wm(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Ym(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Km(t){const e={},n=i(t,["citationSources"]);return n!=null&&r(e,["citations"],n),e}function zm(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function Xm(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>zm(s))),r(e,["urlMetadata"],o)}return e}function Om(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],Wm(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],Km(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&r(e,["urlContextMetadata"],Xm(a));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const p=i(t,["safetyRatings"]);return p!=null&&r(e,["safetyRatings"],p),e}function hi(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>Om(c))),r(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&r(e,["modelVersion"],s);const l=i(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const a=i(t,["responseId"]);a!=null&&r(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function Qm(t){const e={},n=i(t,["values"]);return n!=null&&r(e,["values"],n),e}function Zm(){return{}}function jm(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Qm(a))),r(e,["embeddings"],l)}return i(t,["metadata"])!=null&&r(e,["metadata"],Zm()),e}function eg(t){const e={},n=i(t,["bytesBase64Encoded"]);n!=null&&r(e,["imageBytes"],we(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Mr(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function tg(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],eg(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);return s!=null&&r(e,["safetyAttributes"],Mr(s)),e}function ng(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>tg(a))),r(e,["generatedImages"],l)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],Mr(s)),e}function og(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function hn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["version"]);l!=null&&r(e,["version"],l);const a=i(t,["_self"]);a!=null&&r(e,["tunedModelInfo"],og(a));const u=i(t,["inputTokenLimit"]);u!=null&&r(e,["inputTokenLimit"],u);const d=i(t,["outputTokenLimit"]);d!=null&&r(e,["outputTokenLimit"],d);const c=i(t,["supportedGenerationMethods"]);return c!=null&&r(e,["supportedActions"],c),e}function ig(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let l=cr(s);Array.isArray(l)&&(l=l.map(a=>hn(a))),r(e,["models"],l)}return e}function rg(){return{}}function sg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);o!=null&&r(e,["totalTokens"],o);const s=i(t,["cachedContentTokenCount"]);return s!=null&&r(e,["cachedContentTokenCount"],s),e}function lg(t){const e={},n=i(t,["video","uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["video","encodedVideo"]);o!=null&&r(e,["videoBytes"],we(o));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function ag(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],lg(n)),e}function ug(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>ag(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function cg(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&r(e,["response"],ug(a)),e}function dg(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function fg(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function pg(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function mg(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],dg(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],fg(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],pg(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function gg(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>mg(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function hg(t){const e={},n=i(t,["citations"]);return n!=null&&r(e,["citations"],n),e}function yg(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function vg(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>yg(s))),r(e,["urlMetadata"],o)}return e}function Cg(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],gg(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],hg(o));const s=i(t,["finishMessage"]);s!=null&&r(e,["finishMessage"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&r(e,["urlContextMetadata"],vg(a));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const p=i(t,["safetyRatings"]);return p!=null&&r(e,["safetyRatings"],p),e}function yi(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>Cg(f))),r(e,["candidates"],c)}const s=i(t,["createTime"]);s!=null&&r(e,["createTime"],s);const l=i(t,["modelVersion"]);l!=null&&r(e,["modelVersion"],l);const a=i(t,["promptFeedback"]);a!=null&&r(e,["promptFeedback"],a);const u=i(t,["responseId"]);u!=null&&r(e,["responseId"],u);const d=i(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function Tg(t){const e={},n=i(t,["truncated"]);n!=null&&r(e,["truncated"],n);const o=i(t,["token_count"]);return o!=null&&r(e,["tokenCount"],o),e}function xg(t){const e={},n=i(t,["values"]);n!=null&&r(e,["values"],n);const o=i(t,["statistics"]);return o!=null&&r(e,["statistics"],Tg(o)),e}function Sg(t){const e={},n=i(t,["billableCharacterCount"]);return n!=null&&r(e,["billableCharacterCount"],n),e}function Eg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>xg(a))),r(e,["embeddings"],l)}const s=i(t,["metadata"]);return s!=null&&r(e,["metadata"],Sg(s)),e}function Ar(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["imageBytes"],we(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Rr(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function Wt(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],Ar(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);s!=null&&r(e,["safetyAttributes"],Rr(s));const l=i(t,["prompt"]);return l!=null&&r(e,["enhancedPrompt"],l),e}function Ig(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Wt(a))),r(e,["generatedImages"],l)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],Rr(s)),e}function Mg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Wt(l))),r(e,["generatedImages"],s)}return e}function Ag(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Wt(l))),r(e,["generatedImages"],s)}return e}function Rg(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Wt(s))),r(e,["generatedImages"],o)}return e}function _g(t){const e={},n=i(t,["label"]);n!=null&&r(e,["label"],n);const o=i(t,["score"]);return o!=null&&r(e,["score"],o),e}function wg(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["mask"],Ar(n));const o=i(t,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>_g(l))),r(e,["labels"],s)}return e}function Pg(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>wg(s))),r(e,["generatedMasks"],o)}return e}function Dg(t){const e={},n=i(t,["endpoint"]);n!=null&&r(e,["name"],n);const o=i(t,["deployedModelId"]);return o!=null&&r(e,["deployedModelId"],o),e}function Ng(t){const e={},n=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function bg(t){const e={},n=i(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&r(e,["epoch"],o);const s=i(t,["step"]);return s!=null&&r(e,["step"],s),e}function yn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["versionId"]);l!=null&&r(e,["version"],l);const a=i(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>Dg(m))),r(e,["endpoints"],p)}const u=i(t,["labels"]);u!=null&&r(e,["labels"],u);const d=i(t,["_self"]);d!=null&&r(e,["tunedModelInfo"],Ng(d));const c=i(t,["defaultCheckpointId"]);c!=null&&r(e,["defaultCheckpointId"],c);const f=i(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>bg(m))),r(e,["checkpoints"],p)}return e}function kg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let l=cr(s);Array.isArray(l)&&(l=l.map(a=>yn(a))),r(e,["models"],l)}return e}function Lg(){return{}}function Fg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);return o!=null&&r(e,["totalTokens"],o),e}function Ug(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["tokensInfo"]);return o!=null&&r(e,["tokensInfo"],o),e}function Vg(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["videoBytes"],we(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Gg(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],Vg(n)),e}function qg(t){const e={},n=i(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Gg(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function Bg(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],qg(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hg="Content-Type",$g="X-Server-Timeout",Jg="User-Agent",vn="x-goog-api-client",Yg="1.15.0",Wg=`google-genai-sdk/${Yg}`,Kg="v1beta1",zg="v1beta",vi=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Xg{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Kg,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:zg,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))s.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(n))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o){if(n&&n.timeout||o){const s=new AbortController,l=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=l}return n&&n.extraBody!==null&&Og(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await Ci(s),new dn(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await Ci(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Ge(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:d}=yield U(s.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=l.decode(d,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),h=m.status,v=m.code,y=`got status: ${h}. ${JSON.stringify(p)}`;if(v>=400&&v<600)throw new Jt({message:y,status:v})}}catch(p){if(p.name==="ApiError")throw p}a+=c;let f=a.match(vi);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield U(new dn(m)),a=a.slice(f[0].length),f=a.match(vi)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=Wg+" "+this.clientOptions.userAgentExtra;return e[Jg]=n,e[vn]=n,e[Hg]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[o,s]of Object.entries(e.headers))n.append(o,s);e.timeout&&e.timeout>0&&n.append($g,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);s.sizeBytes=String(a.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const d=await this.fetchUploadUrl(s,n);return l.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var o;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:D("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:s});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=a==null?void 0:a.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Ci(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new Jt({message:s,status:n}):new Error(s)}}function Og(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const u=Object.assign({},l);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const c=a[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const s=o(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qg="mcp_used/unknown";let Zg=!1;function _r(t){for(const e of t)if(jg(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Zg}function wr(t){var e;const n=(e=t[vn])!==null&&e!==void 0?e:"";t[vn]=(n+` ${Qg}`).trimStart()}function jg(t){return t!==null&&typeof t=="object"&&t instanceof Nn}function eh(t,e=100){return Ge(this,arguments,function*(){let o,s=0;for(;s<e;){const l=yield U(t.listTools({cursor:o}));for(const a of l.tools)yield yield U(a),s++;if(!l.nextCursor)break;o=l.nextCursor}})}class Nn{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Nn(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const l={},a=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,st(eh(f))),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const p=s;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=f}}catch(p){n={error:p}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Pa(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await s.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function th(t,e,n){const o=new Sa;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data);const l=Lf(s);Object.assign(o,l),e(o)}class nh{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=rh(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(M=>{c=M}),p=e.callbacks,m=function(){c({})},h=this.apiClient,v={onopen:m,onmessage:M=>{th(h,p.onmessage,M)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(M){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(M){}},y=this.webSocketFactory.create(d,ih(a),v);y.connect(),await f;const T=L(this.apiClient,e.model),E=xr({model:T}),I=gn({setup:E});return y.send(JSON.stringify(I)),new oh(y,this.apiClient)}}class oh{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Dd(e),o=Sr(n);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Nd(e),o=gn(n);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const n=gn({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Fe.PLAY)}pause(){this.sendPlaybackControl(Fe.PAUSE)}stop(){this.sendPlaybackControl(Fe.STOP)}resetContext(){this.sendPlaybackControl(Fe.RESET_CONTEXT)}close(){this.conn.close()}}function ih(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function rh(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sh="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function lh(t,e,n){const o=new xa;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const l=JSON.parse(s);if(t.isVertexAI()){const a=Xf(l);Object.assign(o,a)}else{const a=Af(l);Object.assign(o,a)}e(o)}class ah{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new nh(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,l,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&_r(e.config.tools)&&wr(p);const m=fh(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const w=this.apiClient.getApiKey();let b="BidiGenerateContent",N="key";w!=null&&w.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",N="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${b}?${N}=${w}`}let h=()=>{};const v=new Promise(w=>{h=w}),y=e.callbacks,T=function(){var w;(w=y==null?void 0:y.onopen)===null||w===void 0||w.call(y),h({})},E=this.apiClient,I={onopen:T,onmessage:w=>{lh(E,y.onmessage,w)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(w){},onclose:(o=y==null?void 0:y.onclose)!==null&&o!==void 0?o:function(w){}},M=this.webSocketFactory.create(f,dh(m),I);M.connect(),await v;let R=L(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const w=this.apiClient.getProject(),b=this.apiClient.getLocation();R=`projects/${w}/locations/${b}/`+R}let S={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[kt.AUDIO]}:e.config.responseModalities=[kt.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],A=[];for(const w of _)if(this.isCallableTool(w)){const b=w;A.push(await b.tool())}else A.push(w);A.length>0&&(e.config.tools=A);const P={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?S=lf(this.apiClient,P):S=Rd(this.apiClient,P),delete S.config,M.send(JSON.stringify(S)),new ch(M,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const uh={turnComplete:!0};class ch{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=oe(n.turns),e.isVertexAI()?o=o.map(s=>Ke(s)):o=o.map(s=>Yt(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(sh)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},uh),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:cf(e)}:n={realtimeInput:Pd(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function dh(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function fh(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ti=10;function xi(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(qe(a)){s=!0;break}if(!s)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function qe(t){return"callTool"in t&&typeof t.callTool=="function"}function ph(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>qe(s)))!==null&&o!==void 0?o:!1}function mh(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!qe(s)))!==null&&o!==void 0?o:!1}function Si(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gh extends _e{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,l,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!ph(n)||xi(n.config))return await this.generateContentInternal(d);if(mh(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const p=oe(d.contents),m=(l=(s=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:Ti;let h=0;for(;h<m&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const v=c.candidates[0].content,y=[];for(const T of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(qe(T)){const I=await T.callTool(c.functionCalls);y.push(...I)}h++,f={role:"user",parts:y},d.contents=oe(d.contents),d.contents.push(v),d.contents.push(f),Si(d.config)&&(p.push(v),p.push(f))}return Si(d.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),xi(n.config)){const o=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let l;const a=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=d==null?void 0:d.safetyAttributes:a.push(d);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new mt(Re.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,s;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const a=await Promise.all(l.map(async d=>qe(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&_r(e.config.tools)){const d=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),wr(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,o,s;const l=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(qe(a)){const u=a,d=await u.tool();for(const c of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(l.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);l.set(c.name,u)}}return l}async processAfcStream(e){var n,o,s;const l=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Ti;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return(function(c,f,p){var m,h;return Ge(this,arguments,function*(){for(var v,y,T,E;u<l;){a&&(u++,a=!1);const S=yield U(c.processParamsMaybeAddMcpUsage(p)),_=yield U(c.generateContentStreamInternal(S)),A=[],P=[];try{for(var I=!0,M=(y=void 0,st(_)),R;R=yield U(M.next()),v=R.done,!v;I=!0){E=R.value,I=!1;const w=E;if(yield yield U(w),w.candidates&&(!((m=w.candidates[0])===null||m===void 0)&&m.content)){P.push(w.candidates[0].content);for(const b of(h=w.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<l&&b.functionCall){if(!b.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(b.functionCall.name)){const N=yield U(f.get(b.functionCall.name).callTool([b.functionCall]));A.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${b.functionCall.name}`)}}}}catch(w){y={error:w}}finally{try{!I&&!v&&(T=M.return)&&(yield U(T.call(M)))}finally{if(y)throw y.error}}if(A.length>0){a=!0;const w=new tt;w.candidates=[{content:{role:"user",parts:A}}],yield yield U(w);const b=[];b.push(...P),b.push({role:"user",parts:A});const N=oe(p.contents).concat(b);p.contents=N}else break}})})(this,d,e)}async generateContentInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=gi(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=yi(f),m=new tt;return Object.assign(m,p),m})}else{const c=mi(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=hi(f),m=new tt;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=gi(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return Ge(this,arguments,function*(){var m,h,v,y;try{for(var T=!0,E=st(p),I;I=yield U(E.next()),m=I.done,!m;T=!0){y=I.value,T=!1;const M=y,R=yi(yield U(M.json()));R.sdkHttpResponse={headers:M.headers};const S=new tt;Object.assign(S,R),yield yield U(S)}}catch(M){h={error:M}}finally{try{!T&&!m&&(v=E.return)&&(yield U(v.call(E)))}finally{if(h)throw h.error}}})})}else{const c=mi(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return Ge(this,arguments,function*(){var m,h,v,y;try{for(var T=!0,E=st(p),I;I=yield U(E.next()),m=I.done,!m;T=!0){y=I.value,T=!1;const M=y,R=hi(yield U(M.json()));R.sdkHttpResponse={headers:M.headers};const S=new tt;Object.assign(S,R),yield yield U(S)}}catch(M){h={error:M}}finally{try{!T&&!m&&(v=E.return)&&(yield U(v.call(E)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=um(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Eg(f),m=new Wo;return Object.assign(m,p),m})}else{const c=xp(this.apiClient,e);return u=D("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=jm(f),m=new Wo;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=dm(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ig(f),m=new Ko;return Object.assign(m,p),m})}else{const c=Ep(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=ng(f),m=new Ko;return Object.assign(m,p),m})}}async editImageInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=vm(this.apiClient,e);return l=D("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Mg(d),f=new pa;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Tm(this.apiClient,e);return l=D("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Ag(d),f=new ma;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Im(this.apiClient,e);return l=D("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Rg(d),f=new ga;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=_m(this.apiClient,e);return l=D("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Pg(d),f=new ha;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=wm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>yn(f))}else{const c=Ip(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>hn(f))}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Dm(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=kg(f),m=new zo;return Object.assign(m,p),m})}else{const c=Ap(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=ig(f),m=new zo;return Object.assign(m,p),m})}}async update(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=bm(this.apiClient,e);return u=D("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>yn(f))}else{const c=_p(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>hn(f))}}async delete(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=km(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Lg(),p=new Xo;return Object.assign(p,f),p})}else{const c=wp(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=rg(),p=new Xo;return Object.assign(p,f),p})}}async countTokens(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Fm(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Fg(f),m=new Oo;return Object.assign(m,p),m})}else{const c=Dp(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=sg(f),m=new Oo;return Object.assign(m,p),m})}}async computeTokens(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Um(this.apiClient,e);return l=D("{model}:computeTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Ug(d),f=new ya;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Bm(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Bg(f),m=new Lt;return Object.assign(m,p),m})}else{const c=kp(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=cg(f),m=new Lt;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hh(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function yh(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function vh(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["operationName"],n);const o=i(t,["resourceName"]);o!=null&&r(e,["_url","resourceName"],o);const s=i(t,["config"]);return s!=null&&r(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ch extends _e{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=yh(e);return u=D("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a}else{const c=hh(e);return u=D("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=vh(e);return l=D("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Th(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Pr(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],Th(n)),e}function xh(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],Pr(o)),e}function Sh(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>xh(s))),r(e,["speakerVoiceConfigs"],o)}return e}function Eh(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Pr(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],Sh(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function Ih(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Mh(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Ah(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Rh(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Ih(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Mh(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Ah(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function _h(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Rh(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function wh(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function Ph(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Dh(t){const e={},n=i(t,["timeRangeFilter"]);if(n!=null&&r(e,["timeRangeFilter"],Ph(n)),i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Nh(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function bh(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Nh(n)),e}function kh(){return{}}function Lh(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Fh(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>wh(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],Dh(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],bh(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],kh());const a=i(t,["computerUse"]);a!=null&&r(e,["computerUse"],Lh(a));const u=i(t,["codeExecution"]);return u!=null&&r(e,["codeExecution"],u),e}function Uh(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ei(){return{}}function Vh(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const l=i(t,["prefixPaddingMs"]);l!=null&&r(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&r(e,["silenceDurationMs"],a),e}function Gh(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],Vh(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function qh(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Bh(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],qh(o)),e}function Hh(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function $h(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],Eh(Dn(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],_h(J(h)));const v=i(t,["tools"]);if(e!==void 0&&v!=null){let S=Ye(v);Array.isArray(S)&&(S=S.map(_=>Fh(Je(_)))),r(e,["setup","tools"],S)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],Uh(y));const T=i(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","inputAudioTranscription"],Ei());const E=i(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&r(e,["setup","outputAudioTranscription"],Ei());const I=i(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&r(e,["setup","realtimeInputConfig"],Gh(I));const M=i(t,["contextWindowCompression"]);e!==void 0&&M!=null&&r(e,["setup","contextWindowCompression"],Bh(M));const R=i(t,["proactivity"]);return e!==void 0&&R!=null&&r(e,["setup","proactivity"],Hh(R)),n}function Jh(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],$h(s,n)),n}function Yh(t,e,n){const o={},s=i(e,["expireTime"]);n!==void 0&&s!=null&&r(n,["expireTime"],s);const l=i(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&r(n,["newSessionExpireTime"],l);const a=i(e,["uses"]);n!==void 0&&a!=null&&r(n,["uses"],a);const u=i(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&r(n,["bidiGenerateContentSetup"],Jh(t,u));const d=i(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&r(n,["fieldMask"],d),o}function Wh(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],Yh(t,o,n)),n}function Kh(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zh(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${n}.${l}`);e.push(...s)}else e.push(n)}return e.join(",")}function Xh(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const l=zh(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(c=>a.includes(c)?`generationConfig.${c}`:c));const d=[];l&&d.push(l),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class Oh extends _e{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Wh(this.apiClient,e);l=D("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=Xh(u,e.config);return s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>Kh(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qh(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function Zh(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),n}function jh(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],Zh(n,e)),e}function ey(t){const e={},n=i(t,["textInput"]);n!=null&&r(e,["textInput"],n);const o=i(t,["output"]);return o!=null&&r(e,["output"],o),e}function ty(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=i(t,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ey(s))),r(e,["examples","examples"],o)}return e}function ny(t,e){const n={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=i(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&r(e,["displayName"],o),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=i(t,["epochCount"]);e!==void 0&&s!=null&&r(e,["tuningTask","hyperparameters","epochCount"],s);const l=i(t,["learningRateMultiplier"]);if(l!=null&&r(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=i(t,["batchSize"]);e!==void 0&&a!=null&&r(e,["tuningTask","hyperparameters","batchSize"],a);const u=i(t,["learningRate"]);return e!==void 0&&u!=null&&r(e,["tuningTask","hyperparameters","learningRate"],u),n}function oy(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["preTunedModel"]);o!=null&&r(e,["preTunedModel"],o);const s=i(t,["trainingDataset"]);s!=null&&r(e,["tuningTask","trainingData"],ty(s));const l=i(t,["config"]);return l!=null&&r(e,["config"],ny(l,e)),e}function iy(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function ry(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),n}function sy(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],ry(n,e)),e}function ly(t,e){const n={},o=i(t,["gcsUri"]);e!==void 0&&o!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],o);const s=i(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],s),i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function ay(t,e){const n={},o=i(t,["gcsUri"]);o!=null&&r(n,["validationDatasetUri"],o);const s=i(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}function uy(t,e){const n={},o=i(t,["validationDataset"]);e!==void 0&&o!=null&&r(e,["supervisedTuningSpec"],ay(o,n));const s=i(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&r(e,["tunedModelDisplayName"],s);const l=i(t,["description"]);e!==void 0&&l!=null&&r(e,["description"],l);const a=i(t,["epochCount"]);e!==void 0&&a!=null&&r(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const u=i(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&r(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const d=i(t,["exportLastCheckpointOnly"]);e!==void 0&&d!=null&&r(e,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const c=i(t,["preTunedModelCheckpointId"]);c!=null&&r(n,["preTunedModel","checkpointId"],c);const f=i(t,["adapterSize"]);if(e!==void 0&&f!=null&&r(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function cy(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["preTunedModel"]);o!=null&&r(e,["preTunedModel"],o);const s=i(t,["trainingDataset"]);s!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],ly(s,e));const l=i(t,["config"]);return l!=null&&r(e,["config"],uy(l,e)),e}function dy(t){const e={},n=i(t,["name"]);n!=null&&r(e,["model"],n);const o=i(t,["name"]);return o!=null&&r(e,["endpoint"],o),e}function Dr(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["state"]);s!=null&&r(e,["state"],lr(s));const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["tuningTask","startTime"]);a!=null&&r(e,["startTime"],a);const u=i(t,["tuningTask","completeTime"]);u!=null&&r(e,["endTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["description"]);c!=null&&r(e,["description"],c);const f=i(t,["baseModel"]);f!=null&&r(e,["baseModel"],f);const p=i(t,["_self"]);p!=null&&r(e,["tunedModel"],dy(p));const m=i(t,["customBaseModel"]);m!=null&&r(e,["customBaseModel"],m);const h=i(t,["experiment"]);h!=null&&r(e,["experiment"],h);const v=i(t,["labels"]);v!=null&&r(e,["labels"],v);const y=i(t,["outputUri"]);y!=null&&r(e,["outputUri"],y);const T=i(t,["pipelineJob"]);T!=null&&r(e,["pipelineJob"],T);const E=i(t,["serviceAccount"]);E!=null&&r(e,["serviceAccount"],E);const I=i(t,["tunedModelDisplayName"]);return I!=null&&r(e,["tunedModelDisplayName"],I),e}function fy(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["tunedModels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Dr(a))),r(e,["tuningJobs"],l)}return e}function py(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["metadata"]);s!=null&&r(e,["metadata"],s);const l=i(t,["done"]);l!=null&&r(e,["done"],l);const a=i(t,["error"]);return a!=null&&r(e,["error"],a),e}function my(t){const e={},n=i(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&r(e,["epoch"],o);const s=i(t,["step"]);s!=null&&r(e,["step"],s);const l=i(t,["endpoint"]);return l!=null&&r(e,["endpoint"],l),e}function gy(t){const e={},n=i(t,["model"]);n!=null&&r(e,["model"],n);const o=i(t,["endpoint"]);o!=null&&r(e,["endpoint"],o);const s=i(t,["checkpoints"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>my(a))),r(e,["checkpoints"],l)}return e}function Cn(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["state"]);s!=null&&r(e,["state"],lr(s));const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["startTime"]);a!=null&&r(e,["startTime"],a);const u=i(t,["endTime"]);u!=null&&r(e,["endTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["error"]);c!=null&&r(e,["error"],c);const f=i(t,["description"]);f!=null&&r(e,["description"],f);const p=i(t,["baseModel"]);p!=null&&r(e,["baseModel"],p);const m=i(t,["tunedModel"]);m!=null&&r(e,["tunedModel"],gy(m));const h=i(t,["preTunedModel"]);h!=null&&r(e,["preTunedModel"],h);const v=i(t,["supervisedTuningSpec"]);v!=null&&r(e,["supervisedTuningSpec"],v);const y=i(t,["tuningDataStats"]);y!=null&&r(e,["tuningDataStats"],y);const T=i(t,["encryptionSpec"]);T!=null&&r(e,["encryptionSpec"],T);const E=i(t,["partnerModelTuningSpec"]);E!=null&&r(e,["partnerModelTuningSpec"],E);const I=i(t,["customBaseModel"]);I!=null&&r(e,["customBaseModel"],I);const M=i(t,["experiment"]);M!=null&&r(e,["experiment"],M);const R=i(t,["labels"]);R!=null&&r(e,["labels"],R);const S=i(t,["outputUri"]);S!=null&&r(e,["outputUri"],S);const _=i(t,["pipelineJob"]);_!=null&&r(e,["pipelineJob"],_);const A=i(t,["serviceAccount"]);A!=null&&r(e,["serviceAccount"],A);const P=i(t,["tunedModelDisplayName"]);return P!=null&&r(e,["tunedModelDisplayName"],P),e}function hy(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["tuningJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Cn(a))),r(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yy extends _e{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new mt(Re.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel},s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let l="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?l=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(l=s.name.split("/operations/")[0]),{name:l,state:cn.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=iy(e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Cn(f))}else{const c=Qh(e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Dr(f))}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=sy(e);return u=D("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=hy(f),m=new Zo;return Object.assign(m,p),m})}else{const c=jh(e);return u=D("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=fy(f),m=new Zo;return Object.assign(m,p),m})}}async tuneInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=cy(e);return l=D("tuningJobs",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>Cn(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=oy(e);return l=D("tunedModels",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>py(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vy{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Cy=1024*1024*8,Ty=3,xy=1e3,Sy=2,tn="x-goog-upload-status";async function Ey(t,e,n){var o,s,l;let a=0,u=0,d=new dn(new Response),c="upload";for(a=t.size;u<a;){const p=Math.min(Cy,a-u),m=t.slice(u,u+p);u+p>=a&&(c+=", finalize");let h=0,v=xy;for(;h<Ty&&(d=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[tn]));)h++,await My(v),v=v*Sy;if(u+=p,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[tn])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((l=d==null?void 0:d.headers)===null||l===void 0?void 0:l[tn])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Iy(t){return{size:t.size,type:t.type}}function My(t){return new Promise(e=>setTimeout(e,t))}class Ay{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ey(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Iy(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ry{create(e,n,o){return new _y(e,n,o)}}class _y{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ii="x-goog-api-key";class wy{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Ii)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ii,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Py="gl-node/";class Dy{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=fa(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const s=new wy(this.apiKey);this.apiClient=new Xg({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Py+"web",uploader:new Ay,downloader:new vy}),this.models=new gh(this.apiClient),this.live=new ah(this.apiClient,s,new Ry),this.batches=new Uu(this.apiClient),this.chats=new $c(this.models,this.apiClient),this.caches=new qc(this.apiClient),this.files=new nd(this.apiClient),this.operations=new Ch(this.apiClient),this.authTokens=new Oh(this.apiClient),this.tunings=new yy(this.apiClient)}}const Ny="PLACEHOLDER_API_KEY";let Ut=null;Ut=new Dy({apiKey:Ny});const nn=!!Ut,by=async t=>{if(!Ut)return Promise.resolve("AI features are disabled. Please configure your API_KEY.");try{const e=`Generate a short, engaging, and professional bio (max 160 characters) for a 'link-in-bio' page. The bio should be based on these keywords: "${t}". The tone should be friendly yet professional. Do not use hashtags.`;return(await Ut.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{maxOutputTokens:50,temperature:.7}})).text.trim().replace(/^"|"$/g,"")}catch(e){return console.error("Error generating bio:",e),"Failed to generate bio. Please try again."}},ky=({currentImageUrl:t,onImageUploaded:e,className:n=""})=>{const[o,s]=C.useState(!1),[l,a]=C.useState(null),u=C.useRef(null),d=async h=>{if(h){if(!h.type.startsWith("image/")){a("Please select an image file");return}if(h.size>5*1024*1024){a("File size must be less than 5MB");return}s(!0),a(null);try{const v=new FormData;v.append("image",h);const T=await(await fetch("/api/upload-image",{method:"POST",body:v})).json();T.success&&T.imageUrl?e(T.imageUrl):a(T.error||"Failed to upload image")}catch(v){console.error("Upload error:",v),a("Failed to upload image")}finally{s(!1)}}},c=h=>{h.preventDefault();const v=h.dataTransfer.files[0];v&&d(v)},f=h=>{h.preventDefault()},p=()=>{var h;(h=u.current)==null||h.click()},m=h=>{var y;const v=(y=h.target.files)==null?void 0:y[0];v&&d(v)};return g.jsxs("div",{className:n,children:[g.jsxs("div",{onClick:p,onDrop:c,onDragOver:f,className:`
          relative w-24 h-24 mx-auto rounded-full border-2 border-dashed border-gray-600 
          hover:border-gray-500 transition-colors cursor-pointer group overflow-hidden
          ${o?"pointer-events-none opacity-50":""}
        `,children:[t?g.jsxs("div",{className:"relative w-full h-full",children:[g.jsx("img",{src:t,alt:"Profile",className:"w-full h-full object-cover rounded-full"}),g.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(Hn,{size:16,className:"text-white"})})]}):g.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-500 group-hover:text-gray-400 transition-colors",children:[g.jsx(Hn,{size:20,className:"mb-1"}),g.jsx("span",{className:"text-xs",children:"Upload"})]}),o&&g.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:g.jsx(Kr,{size:16,className:"text-white animate-spin"})})]}),g.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:m,className:"hidden"}),l&&g.jsx("p",{className:"text-red-400 text-sm mt-2 text-center",children:l}),g.jsxs("p",{className:"text-gray-500 text-xs mt-2 text-center",children:["Click or drag image to upload",g.jsx("br",{}),"Max 5MB, JPG/PNG"]})]})},Ly=({userData:t,setUserData:e})=>{const[n,o]=C.useState(""),[s,l]=C.useState(!1),a=(d,c)=>{e(f=>({...f,profile:{...f.profile,[d]:c}}))},u=async()=>{if(!n)return;l(!0);const d=await by(n);a("bio",d),l(!1)};return g.jsx("div",{className:"space-y-6",children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-4",children:"Profile Picture"}),g.jsx(ky,{currentImageUrl:t.profile.imageUrl,onImageUploaded:d=>a("imageUrl",d),className:"flex flex-col items-center"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"profile-name",className:"block text-sm font-medium text-gray-400 mb-2",children:"Profile Title"}),g.jsx("input",{id:"profile-name",type:"text",value:t.profile.name,onChange:d=>a("name",d.target.value),placeholder:"Your name or title","aria-label":"Profile title",className:"w-full px-4 py-2.5 bg-gray-900 border border-gray-700 rounded-lg text-white focus:ring-blue-500 focus:border-blue-500 transition"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"profile-bio",className:"block text-sm font-medium text-gray-400 mb-2",children:"Bio"}),g.jsx("textarea",{id:"profile-bio",value:t.profile.bio,onChange:d=>a("bio",d.target.value),rows:3,placeholder:"Tell your audience about yourself","aria-label":"Profile bio",className:"w-full px-4 py-2.5 bg-gray-900 border border-gray-700 rounded-lg text-white focus:ring-blue-500 focus:border-blue-500 transition"})]}),g.jsxs("div",{className:"p-4 bg-gray-900 rounded-lg border border-gray-800",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Generate Bio with AI"}),g.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Describe yourself in a few keywords."}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx("input",{type:"text",placeholder:"e.g., 'React developer, coffee lover'",value:n,onChange:d=>o(d.target.value),disabled:!nn||s,className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-800/50"}),g.jsx("button",{onClick:u,disabled:!nn||s||!n,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-purple-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 w-40",children:s?g.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):g.jsxs(g.Fragment,{children:[g.jsx(rs,{className:"w-5 h-5"})," Generate"]})})]}),!nn&&g.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"AI features disabled. Set API_KEY to enable."})]})]})})},Fy=({userData:t,setUserData:e})=>{const{themeSettings:n}=t,[o,s]=C.useState("colors"),l=(u,d)=>{e(c=>({...c,themeSettings:{...c.themeSettings,[u]:d}}))},a=()=>{e(u=>({...u,themeSettings:Qr}))};return g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Theme Settings"}),g.jsx("p",{className:"text-sm text-gray-400",children:"Customize the appearance of your page"})]}),g.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",children:"Reset Defaults"})]}),g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(ss,{className:"w-6 h-6 text-gray-400"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Dark Mode"}),g.jsx("p",{className:"text-sm text-gray-500",children:"Switch between light and dark theme"})]})]}),g.jsx("label",{htmlFor:"dark-mode-toggle",className:"flex items-center cursor-pointer",title:"Toggle dark mode",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"checkbox",id:"dark-mode-toggle",className:"sr-only",checked:n.isDarkMode,onChange:u=>l("isDarkMode",u.target.checked),"aria-label":"Toggle dark mode",title:"Toggle dark mode"}),g.jsx("div",{className:"block bg-gray-700 w-12 h-7 rounded-full"}),g.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-5 h-5 rounded-full transition-transform ${n.isDarkMode?"translate-x-5":""}`})]})})]}),g.jsxs("div",{className:"p-1 flex space-x-1 bg-gray-900 rounded-lg",children:[g.jsx("button",{onClick:()=>s("colors"),className:`w-full py-2 text-sm font-semibold rounded-md ${o==="colors"?"bg-gray-800":"hover:bg-gray-800/50"}`,children:"Colors"}),g.jsx("button",{onClick:()=>s("background"),className:`w-full py-2 text-sm font-semibold rounded-md ${o==="background"?"bg-gray-800":"hover:bg-gray-800/50"}`,children:"Background"}),g.jsx("button",{onClick:()=>s("effects"),className:`w-full py-2 text-sm font-semibold rounded-md ${o==="effects"?"bg-gray-800":"hover:bg-gray-800/50"}`,children:"Effects"})]}),o==="colors"&&g.jsxs("div",{className:"space-y-8 animate-fade-in",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Color Theme"}),g.jsx("div",{className:"grid grid-cols-4 gap-4 mt-3",children:Ot.map(u=>{const d=n.isDarkMode?u.dark:u.light;return g.jsxs("button",{onClick:()=>l("colorPaletteId",u.id),className:`text-center space-y-2 p-3 rounded-lg border-2 transition-colors focus:outline-none ${n.colorPaletteId===u.id?"border-blue-500 bg-gray-900":"border-gray-800 bg-gray-900/50 hover:border-gray-700"}`,children:[g.jsxs("div",{className:"w-10 h-10 mx-auto rounded-full overflow-hidden flex items-center justify-center border border-white/10",children:[g.jsx("div",{style:{backgroundColor:d.primary},className:"w-1/2 h-full"}),g.jsx("div",{className:"w-[3px] h-full bg-gray-900"}),g.jsx("div",{style:{backgroundColor:d.secondary},className:"w-1/2 h-full"})]}),g.jsx("p",{className:"text-sm font-medium capitalize",children:u.name})]},u.id)})})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Theme Preview"}),g.jsx("div",{className:"p-4 bg-gray-900 rounded-lg mt-3 space-y-4 border border-gray-800",children:(()=>{const u=Ot.find(f=>f.id===n.colorPaletteId)||Ot[0],d=n.isDarkMode?u.dark:u.light;return[{label:"Primary",color:d.primary},{label:"Secondary",color:d.secondary},{label:"Accent",color:d.accent}].map(f=>g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{style:{backgroundColor:f.color},className:"w-8 h-8 rounded-full border-2 border-white/10"}),g.jsx("span",{className:"text-sm text-gray-300",children:f.label})]},f.label))})()})]})]}),o==="background"&&g.jsxs("div",{className:"space-y-6 animate-fade-in",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Page Background Color"}),g.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Choose a background color for your page"}),g.jsx("div",{className:"grid grid-cols-4 gap-4",children:zr.map(u=>g.jsx("button",{onClick:()=>l("backgroundColorId",u.id),className:`w-full h-12 rounded-lg border-2 ${n.backgroundColorId===u.id?"border-blue-500":"border-gray-700 hover:border-gray-500"} ${n.isDarkMode?u.dark:u.light}`,"aria-label":`Select background color ${u.id}`,title:`Select background color ${u.id}`},u.id))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Background Pattern"}),g.jsx("div",{className:"grid grid-cols-2 gap-4 mt-3",children:Object.entries(Ri).map(([u,d])=>g.jsxs("button",{onClick:()=>l("backgroundPattern",u),className:`p-3 rounded-lg border-2 text-left ${n.backgroundPattern===u?"border-blue-500":"border-gray-800 bg-gray-900 hover:border-gray-700"}`,children:[g.jsx("div",{className:`h-16 rounded-md bg-gray-800 mb-2 ${d.class}`}),g.jsx("h5",{className:"font-medium text-white",children:d.name}),g.jsx("p",{className:"text-xs text-gray-500",children:d.description})]},u))})]})]}),o==="effects"&&g.jsxs("div",{className:"space-y-6 animate-fade-in",children:[g.jsxs("div",{className:"flex justify-between items-center bg-gray-900 p-3 rounded-lg border border-gray-800",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Card Shadow"}),g.jsx("p",{className:"text-sm text-gray-500",children:"Add shadows to cards for depth"})]}),g.jsx("label",{htmlFor:"shadow-toggle",className:"flex items-center cursor-pointer",title:"Toggle card shadow",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"checkbox",id:"shadow-toggle",className:"sr-only",checked:n.cardShadow,onChange:u=>l("cardShadow",u.target.checked),"aria-label":"Toggle card shadow",title:"Toggle card shadow"}),g.jsx("div",{className:"block bg-gray-700 w-12 h-7 rounded-full"}),g.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-5 h-5 rounded-full transition-transform ${n.cardShadow?"translate-x-5":""}`})]})})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white mb-2",children:"Border Radius"}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:Xr.map(u=>g.jsx("button",{onClick:()=>l("borderRadius",u.id),className:`py-2 text-sm font-semibold rounded-md ${n.borderRadius===u.id?"bg-blue-600 text-white":"bg-gray-800 hover:bg-gray-700"}`,children:u.name},u.id))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white mb-2",children:"Font Family"}),g.jsx("div",{className:"space-y-3",children:Or.map(u=>g.jsxs("button",{onClick:()=>l("fontFamily",u.id),className:`block w-full text-left p-4 rounded-lg border-2 ${n.fontFamily===u.id?"border-blue-500 bg-gray-900":"border-gray-800 bg-gray-900 hover:border-gray-700"}`,children:[g.jsx("p",{className:`text-lg font-medium text-white ${u.class}`,children:u.name}),g.jsx("p",{className:`text-sm text-gray-400 mt-1 ${u.class}`,children:u.previewText}),g.jsx("p",{className:"text-xs text-gray-500 mt-2",children:u.description})]},u.id))})]})]})]})},x=(t,e,n)=>{const o={isDarkMode:!0,colorPaletteId:"default",backgroundColorId:"default",backgroundPattern:"none",cardShadow:!0,borderRadius:"md",fontFamily:"sans"};return{id:`${t}-${e}`,name:`${t.charAt(0).toUpperCase()+t.slice(1)} #${e}`,description:`A unique design from the ${t} collection.`,themeSettings:{...o,...n}}},on=[{id:"minimal",name:"Minimal & Clean",description:"Simple, modern, and professional designs with a focus on typography and whitespace.",templates:[x("minimal",1,{isDarkMode:!1,colorPaletteId:"default",borderRadius:"sm",fontFamily:"sans"}),x("minimal",2,{isDarkMode:!0,colorPaletteId:"stone",backgroundColorId:"slate",borderRadius:"md",fontFamily:"sans"}),x("minimal",3,{isDarkMode:!1,colorPaletteId:"silver",cardShadow:!1,borderRadius:"none",fontFamily:"sans"}),x("minimal",4,{isDarkMode:!0,colorPaletteId:"slate",backgroundPattern:"dots",borderRadius:"sm",fontFamily:"sans"}),x("minimal",5,{isDarkMode:!1,colorPaletteId:"default",backgroundColorId:"blue",borderRadius:"lg",fontFamily:"serif"}),x("minimal",6,{isDarkMode:!0,colorPaletteId:"silver",backgroundColorId:"default",cardShadow:!1,borderRadius:"md",fontFamily:"sans"}),x("minimal",7,{isDarkMode:!1,colorPaletteId:"stone",borderRadius:"none",fontFamily:"serif"}),x("minimal",8,{isDarkMode:!0,colorPaletteId:"default",backgroundPattern:"lines",borderRadius:"sm",fontFamily:"sans"}),x("minimal",9,{isDarkMode:!1,colorPaletteId:"slate",backgroundColorId:"slate",borderRadius:"md",fontFamily:"sans"}),x("minimal",10,{isDarkMode:!0,colorPaletteId:"indigo",cardShadow:!0,borderRadius:"lg",fontFamily:"sans"}),x("minimal",11,{isDarkMode:!1,colorPaletteId:"mint",borderRadius:"sm",fontFamily:"sans"}),x("minimal",12,{isDarkMode:!0,colorPaletteId:"default",backgroundColorId:"slate",borderRadius:"none",fontFamily:"serif"}),x("minimal",13,{isDarkMode:!1,colorPaletteId:"stone",cardShadow:!1,borderRadius:"lg",fontFamily:"sans"}),x("minimal",14,{isDarkMode:!0,colorPaletteId:"silver",backgroundPattern:"dots",borderRadius:"md",fontFamily:"sans"}),x("minimal",15,{isDarkMode:!1,colorPaletteId:"sky",borderRadius:"sm",fontFamily:"serif"})]},{id:"bold",name:"Bold & Vibrant",description:"High-contrast, energetic themes that make a strong statement with vivid colors.",templates:[x("bold",1,{colorPaletteId:"rose",backgroundPattern:"lines",borderRadius:"none"}),x("bold",2,{isDarkMode:!1,colorPaletteId:"crimson",backgroundColorId:"orange",borderRadius:"sm"}),x("bold",3,{colorPaletteId:"lemon",backgroundColorId:"yellow",borderRadius:"lg"}),x("bold",4,{isDarkMode:!1,colorPaletteId:"coral",fontFamily:"serif",borderRadius:"md"}),x("bold",5,{colorPaletteId:"orange",backgroundPattern:"waves",borderRadius:"none"}),x("bold",6,{colorPaletteId:"gold",backgroundColorId:"orange",borderRadius:"lg"}),x("bold",7,{isDarkMode:!1,colorPaletteId:"pink",borderRadius:"sm",cardShadow:!1}),x("bold",8,{colorPaletteId:"crimson",backgroundPattern:"dots",borderRadius:"md",fontFamily:"serif"}),x("bold",9,{isDarkMode:!1,colorPaletteId:"rose",backgroundColorId:"pink",borderRadius:"lg"}),x("bold",10,{colorPaletteId:"lemon",borderRadius:"none"}),x("bold",11,{isDarkMode:!0,colorPaletteId:"coral",backgroundColorId:"default",borderRadius:"sm"}),x("bold",12,{isDarkMode:!1,colorPaletteId:"orange",backgroundPattern:"lines",borderRadius:"md"}),x("bold",13,{colorPaletteId:"gold",fontFamily:"serif",borderRadius:"lg"}),x("bold",14,{isDarkMode:!1,colorPaletteId:"pink",cardShadow:!1,borderRadius:"none"}),x("bold",15,{colorPaletteId:"crimson",backgroundColorId:"slate",borderRadius:"md"})]},{id:"elegant",name:"Elegant & Professional",description:"Sophisticated and polished themes, perfect for corporate or personal branding.",templates:[x("elegant",1,{isDarkMode:!0,colorPaletteId:"navy",fontFamily:"serif",borderRadius:"sm"}),x("elegant",2,{isDarkMode:!1,colorPaletteId:"indigo",backgroundColorId:"blue",borderRadius:"md"}),x("elegant",3,{isDarkMode:!0,colorPaletteId:"chocolate",fontFamily:"serif",borderRadius:"none"}),x("elegant",4,{isDarkMode:!1,colorPaletteId:"gold",backgroundColorId:"yellow",cardShadow:!1,borderRadius:"lg"}),x("elegant",5,{isDarkMode:!0,colorPaletteId:"slate",backgroundPattern:"dots",borderRadius:"sm"}),x("elegant",6,{isDarkMode:!1,colorPaletteId:"default",fontFamily:"serif",borderRadius:"md"}),x("elegant",7,{isDarkMode:!0,colorPaletteId:"stone",backgroundColorId:"slate",borderRadius:"sm"}),x("elegant",8,{isDarkMode:!1,colorPaletteId:"silver",cardShadow:!1,borderRadius:"lg",fontFamily:"serif"}),x("elegant",9,{isDarkMode:!0,colorPaletteId:"navy",backgroundPattern:"lines",borderRadius:"none"}),x("elegant",10,{isDarkMode:!1,colorPaletteId:"chocolate",backgroundColorId:"orange",borderRadius:"md"}),x("elegant",11,{isDarkMode:!0,colorPaletteId:"indigo",fontFamily:"serif",borderRadius:"sm"}),x("elegant",12,{isDarkMode:!1,colorPaletteId:"gold",borderRadius:"lg"}),x("elegant",13,{isDarkMode:!0,colorPaletteId:"default",backgroundColorId:"default",borderRadius:"sm",fontFamily:"serif"}),x("elegant",14,{isDarkMode:!1,colorPaletteId:"slate",backgroundPattern:"dots",borderRadius:"md"}),x("elegant",15,{isDarkMode:!0,colorPaletteId:"stone",cardShadow:!1,borderRadius:"none"})]},{id:"dark",name:"Dark & Moody",description:"Atmospheric and immersive themes using deep, rich colors and high contrast.",templates:[x("dark",1,{colorPaletteId:"purple",backgroundColorId:"purple",backgroundPattern:"waves"}),x("dark",2,{colorPaletteId:"crimson",backgroundColorId:"slate",borderRadius:"none"}),x("dark",3,{colorPaletteId:"teal",backgroundColorId:"default",cardShadow:!1}),x("dark",4,{colorPaletteId:"indigo",backgroundColorId:"slate",backgroundPattern:"lines",borderRadius:"sm"}),x("dark",5,{colorPaletteId:"navy",backgroundColorId:"blue",borderRadius:"lg",fontFamily:"serif"}),x("dark",6,{colorPaletteId:"chocolate",backgroundColorId:"orange",borderRadius:"md"}),x("dark",7,{colorPaletteId:"slate",backgroundColorId:"slate",backgroundPattern:"dots",borderRadius:"sm"}),x("dark",8,{colorPaletteId:"emerald",backgroundColorId:"green",fontFamily:"serif"}),x("dark",9,{colorPaletteId:"rose",backgroundColorId:"pink",borderRadius:"none"}),x("dark",10,{colorPaletteId:"purple",backgroundPattern:"lines",borderRadius:"sm",cardShadow:!1}),x("dark",11,{colorPaletteId:"crimson",backgroundColorId:"default",borderRadius:"md"}),x("dark",12,{colorPaletteId:"teal",backgroundColorId:"slate",fontFamily:"serif"}),x("dark",13,{colorPaletteId:"indigo",backgroundPattern:"waves",borderRadius:"lg"}),x("dark",14,{colorPaletteId:"navy",backgroundColorId:"default",borderRadius:"sm"}),x("dark",15,{colorPaletteId:"chocolate",cardShadow:!1,borderRadius:"none"})]},{id:"playful",name:"Playful & Creative",description:"Fun, quirky, and imaginative themes perfect for artists, creators, and streamers.",templates:[x("playful",1,{isDarkMode:!1,colorPaletteId:"sky",backgroundColorId:"blue",borderRadius:"lg",backgroundPattern:"dots"}),x("playful",2,{colorPaletteId:"lemon",backgroundColorId:"yellow",borderRadius:"lg",cardShadow:!1}),x("playful",3,{isDarkMode:!0,colorPaletteId:"pink",borderRadius:"lg",fontFamily:"serif",backgroundPattern:"waves"}),x("playful",4,{isDarkMode:!1,colorPaletteId:"coral",backgroundColorId:"orange",borderRadius:"lg"}),x("playful",5,{colorPaletteId:"lavender",backgroundColorId:"purple",borderRadius:"lg",fontFamily:"serif"}),x("playful",6,{isDarkMode:!1,colorPaletteId:"mint",backgroundColorId:"green",borderRadius:"lg"}),x("playful",7,{colorPaletteId:"peach",backgroundColorId:"orange",borderRadius:"lg",backgroundPattern:"dots"}),x("playful",8,{isDarkMode:!1,colorPaletteId:"rose",borderRadius:"lg",cardShadow:!1,fontFamily:"serif"}),x("playful",9,{colorPaletteId:"sky",backgroundColorId:"slate",borderRadius:"lg",backgroundPattern:"lines"}),x("playful",10,{isDarkMode:!1,colorPaletteId:"lemon",borderRadius:"lg"}),x("playful",11,{colorPaletteId:"pink",backgroundColorId:"pink",borderRadius:"lg"}),x("playful",12,{isDarkMode:!1,colorPaletteId:"coral",borderRadius:"lg",fontFamily:"serif"}),x("playful",13,{colorPaletteId:"lavender",backgroundPattern:"waves",borderRadius:"lg"}),x("playful",14,{isDarkMode:!1,colorPaletteId:"mint",cardShadow:!1,borderRadius:"lg"}),x("playful",15,{colorPaletteId:"peach",backgroundColorId:"default",borderRadius:"lg",fontFamily:"serif"})]},{id:"natural",name:"Natural & Earthy",description:"Calm and organic themes inspired by nature, featuring earthy tones and textures.",templates:[x("natural",1,{colorPaletteId:"green",backgroundColorId:"green",fontFamily:"serif"}),x("natural",2,{isDarkMode:!1,colorPaletteId:"olive",backgroundColorId:"yellow",borderRadius:"sm"}),x("natural",3,{colorPaletteId:"stone",backgroundColorId:"slate",backgroundPattern:"waves",fontFamily:"serif"}),x("natural",4,{isDarkMode:!1,colorPaletteId:"peach",backgroundColorId:"orange",borderRadius:"md"}),x("natural",5,{colorPaletteId:"chocolate",backgroundColorId:"default",fontFamily:"serif",borderRadius:"sm"}),x("natural",6,{isDarkMode:!1,colorPaletteId:"mint",backgroundColorId:"green",cardShadow:!1,borderRadius:"lg"}),x("natural",7,{colorPaletteId:"emerald",backgroundColorId:"green",backgroundPattern:"dots"}),x("natural",8,{isDarkMode:!1,colorPaletteId:"stone",fontFamily:"serif",borderRadius:"sm"}),x("natural",9,{colorPaletteId:"olive",backgroundColorId:"slate",borderRadius:"md"}),x("natural",10,{isDarkMode:!1,colorPaletteId:"green",backgroundPattern:"waves",borderRadius:"lg"}),x("natural",11,{colorPaletteId:"peach",backgroundColorId:"default",fontFamily:"serif"}),x("natural",12,{isDarkMode:!1,colorPaletteId:"chocolate",borderRadius:"sm",cardShadow:!1}),x("natural",13,{colorPaletteId:"mint",backgroundColorId:"slate",fontFamily:"serif"}),x("natural",14,{isDarkMode:!1,colorPaletteId:"emerald",backgroundPattern:"dots",borderRadius:"md"}),x("natural",15,{colorPaletteId:"stone",backgroundColorId:"green",borderRadius:"lg"})]},{id:"futuristic",name:"Futuristic & Tech",description:"Sleek, modern, and high-tech designs with sharp lines and cool color palettes.",templates:[x("futuristic",1,{colorPaletteId:"blue",backgroundColorId:"slate",borderRadius:"none",backgroundPattern:"lines"}),x("futuristic",2,{colorPaletteId:"sky",backgroundColorId:"blue",cardShadow:!1,borderRadius:"sm"}),x("futuristic",3,{colorPaletteId:"indigo",backgroundColorId:"purple",borderRadius:"none"}),x("futuristic",4,{colorPaletteId:"teal",backgroundColorId:"default",backgroundPattern:"dots",borderRadius:"sm"}),x("futuristic",5,{colorPaletteId:"slate",backgroundColorId:"slate",fontFamily:"sans",borderRadius:"none"}),x("futuristic",6,{colorPaletteId:"purple",backgroundColorId:"purple",backgroundPattern:"lines",borderRadius:"none"}),x("futuristic",7,{colorPaletteId:"navy",backgroundColorId:"blue",cardShadow:!1,borderRadius:"sm"}),x("futuristic",8,{isDarkMode:!1,colorPaletteId:"silver",borderRadius:"none",fontFamily:"sans"}),x("futuristic",9,{colorPaletteId:"blue",backgroundPattern:"waves",borderRadius:"sm"}),x("futuristic",10,{colorPaletteId:"sky",backgroundColorId:"slate",borderRadius:"none"}),x("futuristic",11,{colorPaletteId:"indigo",cardShadow:!1,borderRadius:"sm"}),x("futuristic",12,{colorPaletteId:"teal",backgroundPattern:"lines",borderRadius:"none"}),x("futuristic",13,{colorPaletteId:"slate",backgroundColorId:"default",borderRadius:"sm"}),x("futuristic",14,{colorPaletteId:"purple",cardShadow:!1,borderRadius:"none"}),x("futuristic",15,{colorPaletteId:"navy",backgroundPattern:"dots",borderRadius:"sm"})]},{id:"soft",name:"Soft & Pastel",description:"Gentle, light, and dreamy themes featuring soft color palettes and a calming aesthetic.",templates:[x("soft",1,{isDarkMode:!1,colorPaletteId:"lavender",backgroundColorId:"purple",borderRadius:"lg",cardShadow:!1}),x("soft",2,{isDarkMode:!1,colorPaletteId:"peach",backgroundColorId:"orange",borderRadius:"lg",fontFamily:"serif"}),x("soft",3,{isDarkMode:!1,colorPaletteId:"pink",backgroundColorId:"pink",backgroundPattern:"dots",borderRadius:"lg"}),x("soft",4,{isDarkMode:!1,colorPaletteId:"mint",backgroundColorId:"green",borderRadius:"lg"}),x("soft",5,{isDarkMode:!1,colorPaletteId:"sky",backgroundColorId:"blue",borderRadius:"lg",fontFamily:"serif"}),x("soft",6,{isDarkMode:!1,colorPaletteId:"rose",backgroundColorId:"pink",cardShadow:!1,borderRadius:"lg"}),x("soft",7,{isDarkMode:!1,colorPaletteId:"coral",backgroundColorId:"orange",backgroundPattern:"waves",borderRadius:"lg"}),x("soft",8,{isDarkMode:!1,colorPaletteId:"default",backgroundColorId:"default",borderRadius:"lg",fontFamily:"serif"}),x("soft",9,{isDarkMode:!1,colorPaletteId:"lavender",backgroundPattern:"dots",borderRadius:"lg"}),x("soft",10,{isDarkMode:!1,colorPaletteId:"peach",cardShadow:!1,borderRadius:"lg"}),x("soft",11,{isDarkMode:!1,colorPaletteId:"pink",fontFamily:"serif",borderRadius:"lg"}),x("soft",12,{isDarkMode:!1,colorPaletteId:"mint",backgroundColorId:"default",borderRadius:"lg"}),x("soft",13,{isDarkMode:!1,colorPaletteId:"sky",backgroundPattern:"waves",borderRadius:"lg",cardShadow:!1}),x("soft",14,{isDarkMode:!1,colorPaletteId:"rose",backgroundColorId:"default",borderRadius:"lg",fontFamily:"serif"}),x("soft",15,{isDarkMode:!1,colorPaletteId:"coral",backgroundColorId:"pink",borderRadius:"lg"})]}],Uy=({themeSettings:t})=>{const{backgroundClass:e,buttonClass:n,borderRadiusClass:o,shadowClass:s}=Ai(t),l=Ri[t.backgroundPattern].class,u=(d=>d?"bg-gray-400/50":"bg-gray-600/50")(t.isDarkMode);return g.jsxs("div",{className:`relative w-full h-40 overflow-hidden ${e}`,children:[g.jsx("div",{className:`absolute inset-0 ${l}`}),g.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-start pt-6 h-full w-full",children:[g.jsx("div",{className:`w-10 h-10 rounded-full mb-2 ${u} opacity-50`}),g.jsx("div",{className:`h-3 w-16 rounded-sm mb-1 ${u} opacity-80`}),g.jsx("div",{className:`h-2 w-24 rounded-sm ${u} opacity-60 mb-3`}),g.jsxs("div",{className:"space-y-1.5 w-full px-8",children:[g.jsx("div",{className:`h-5 w-full ${n} ${o} ${s}`}),g.jsx("div",{className:`h-5 w-full ${n} ${o} ${s}`})]})]})]})},Vy=({onApply:t})=>{const[e,n]=C.useState(on[0].id),o=on.find(s=>s.id===e);return g.jsxs("div",{className:"flex gap-8 h-[70vh]",children:[g.jsxs("aside",{className:"w-1/4 xl:w-1/5 pr-4 border-r border-gray-800 space-y-2 overflow-y-auto",children:[g.jsx("h3",{className:"text-base font-semibold text-white px-2 mb-4",children:"Categories"}),on.map(s=>g.jsx("button",{onClick:()=>n(s.id),className:`w-full text-left px-3 py-2.5 rounded-lg text-sm transition-colors ${e===s.id?"bg-blue-600 text-white font-semibold":"text-gray-300 hover:bg-gray-800"}`,children:s.name},s.id))]}),g.jsx("main",{className:"w-3/4 xl:w-4/5 overflow-y-auto pl-4",children:o&&g.jsxs(g.Fragment,{children:[g.jsx("h4",{className:"font-bold text-white text-2xl mb-2",children:o.name}),g.jsx("p",{className:"text-gray-400 mb-6 max-w-2xl",children:o.description}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.templates.map(s=>g.jsxs("div",{className:"bg-gray-900 rounded-lg border border-gray-800 overflow-hidden group transition-all hover:border-blue-500/50 hover:shadow-2xl hover:shadow-blue-500/10",children:[g.jsx(Uy,{themeSettings:s.themeSettings}),g.jsxs("div",{className:"p-4",children:[g.jsx("h4",{className:"font-semibold text-white text-lg",children:s.name}),g.jsx("p",{className:"text-sm text-gray-400 mt-1 mb-4",children:s.description}),g.jsx("button",{onClick:()=>t(s.themeSettings),className:"w-full py-2.5 px-4 text-sm font-semibold rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-950",children:"Apply Template"})]})]},s.id))})]})})]})},Gy=({children:t,onClose:e})=>g.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 animate-fade-in",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"template-modal-title",children:g.jsxs("div",{className:"bg-gray-950 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col border border-gray-800",onClick:n=>n.stopPropagation(),children:[g.jsxs("div",{className:"sticky top-0 bg-gray-950/80 backdrop-blur-sm p-6 border-b border-gray-800 flex justify-between items-center z-10 flex-shrink-0",children:[g.jsx("h2",{id:"template-modal-title",className:"text-2xl font-bold text-white",children:"Templates"}),g.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-white rounded-full hover:bg-gray-800 transition-colors","aria-label":"Close templates dialog",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsx("div",{className:"p-6 md:p-8 flex-grow overflow-y-hidden",children:t})]})}),rn=({isActive:t,onClick:e,children:n})=>g.jsx("button",{onClick:e,className:`w-full py-2.5 px-1 flex items-center justify-center gap-2 text-sm font-semibold rounded-md transition-colors ${t?"bg-gray-800 text-white":"text-gray-400 hover:text-white"}`,children:n}),Jy=qr(function(){const e=Br(),[n,o]=C.useState(e),[s,l]=C.useState("profile"),[a,u]=C.useState(!1),[d,c]=C.useState(!1),[f,p]=C.useState(null),[m,h]=C.useState(!1),v=T=>{o(E=>({...E,themeSettings:T})),u(!1)},y=async()=>{c(!0);try{const T=await $r.saveUserData(n);p(T),T.success&&(h(!0),setTimeout(()=>h(!1),3e3))}catch(T){p({success:!1,error:T instanceof Error?T.message:"Failed to save"})}finally{c(!1)}};return g.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-300",children:[g.jsx("header",{className:"bg-gray-950/80 backdrop-blur-sm border-b border-gray-800 sticky top-0 z-20",children:g.jsxs("div",{className:"container mx-auto px-6 py-3 flex justify-between items-center",children:[g.jsx("h1",{className:"text-xl font-bold text-white",children:"AI Link-in-Bio"}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm font-semibold shadow-md flex items-center gap-2",children:[g.jsx(ls,{className:"w-5 h-5"}),"Templates"]}),g.jsx("button",{onClick:y,disabled:d,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-semibold shadow-md",children:d?"Saving...":"Save"}),g.jsx(Hr,{to:"/",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-semibold shadow-md",children:"View Homepage"})]})]})}),g.jsxs("main",{className:"container mx-auto p-4 md:p-6 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[g.jsxs("div",{className:"lg:col-span-2 bg-black rounded-xl shadow-2xl p-6",children:[g.jsx("div",{className:"mb-6",children:g.jsxs("div",{className:"p-1 flex space-x-1 bg-gray-900/80 rounded-lg",children:[g.jsxs(rn,{isActive:s==="profile",onClick:()=>l("profile"),children:[g.jsx(es,{className:"w-5 h-5"})," Profile"]}),g.jsxs(rn,{isActive:s==="links",onClick:()=>l("links"),children:[g.jsx(jr,{className:"w-5 h-5"})," Links"]}),g.jsxs(rn,{isActive:s==="theme",onClick:()=>l("theme"),children:[g.jsx(ts,{className:"w-5 h-5"})," Theme"]})]})}),s==="profile"&&g.jsx(Ly,{userData:n,setUserData:o}),s==="links"&&g.jsx(aa,{userData:n,setUserData:o}),s==="theme"&&g.jsx(Fy,{userData:n,setUserData:o})]}),g.jsx("div",{className:"lg:col-span-1",children:g.jsx("div",{className:"sticky top-24",children:g.jsxs("div",{className:"relative mx-auto border-gray-800 bg-gray-800 border-[14px] rounded-[2.5rem] h-[650px] w-[375px] shadow-2xl shadow-blue-500/10",children:[g.jsx("div",{className:"w-[160px] h-[18px] bg-gray-800 top-0 rounded-b-[1rem] left-1/2 -translate-x-1/2 absolute"}),g.jsx("div",{className:"h-[46px] w-[3px] bg-gray-800 absolute -start-[17px] top-[124px] rounded-s-lg"}),g.jsx("div",{className:"h-[46px] w-[3px] bg-gray-800 absolute -start-[17px] top-[178px] rounded-s-lg"}),g.jsx("div",{className:"h-[64px] w-[3px] bg-gray-800 absolute -end-[17px] top-[142px] rounded-e-lg"}),g.jsx("div",{className:"rounded-[2rem] overflow-hidden w-full h-full bg-white",children:g.jsx(Zr,{userData:n,isPreview:!0})})]})})})]}),m&&(f==null?void 0:f.success)&&g.jsxs("div",{className:"fixed top-20 right-4 bg-green-600 text-white p-4 rounded-lg shadow-lg z-30 max-w-sm",children:[g.jsx("div",{className:"font-semibold",children:"Page saved successfully!"}),f.error&&g.jsx("div",{className:"text-sm mt-1 opacity-80",children:f.error})]}),f&&!f.success&&g.jsxs("div",{className:"fixed top-20 right-4 bg-red-600 text-white p-4 rounded-lg shadow-lg z-30 max-w-sm",children:[g.jsx("div",{className:"font-semibold mb-1",children:"Save failed"}),g.jsx("div",{className:"text-sm",children:f.error})]}),a&&g.jsx(Gy,{onClose:()=>u(!1),children:g.jsx(Vy,{onApply:v})})]})});export{Jy as default};
