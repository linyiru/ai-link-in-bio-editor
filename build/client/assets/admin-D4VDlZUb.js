import{r as v,j as g,R as V,w as Hr,b as $r}from"./chunk-UH6JLGW7-BWGKVKdm.js";import{I as Jr,D as Mi,X as Yr,S as Wr,L as Ai,C as Kr,a as Bn,g as Ri,U as Hn,b as zr,c as Ot,d as Xr,e as _i,f as Or,F as Qr,B as Zr}from"./BioLinkPage-CKfBq8JX.js";import{D as wi}from"./dataService-Bzs1NMx2.js";import{a as nt}from"./index-DvEMbgo5.js";const jr=()=>{const[t,e]=v.useState(Jr),[n,o]=v.useState(!0);return v.useEffect(()=>{(async()=>{try{const l=await wi.loadUserData();l&&(l.themeSettings={...Mi,...l.themeSettings||{}},e(l))}catch(l){console.error("Failed to load user data from server:",l)}finally{o(!1)}})()},[]),[t,e,n]},es=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),ts=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),ns=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h8a2 2 0 002-2v-4a2 2 0 00-2-2h-8a2 2 0 00-2 2v4a2 2 0 002 2z"})}),os=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),is=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),rs=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),ss=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m1-12a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1h-6a1 1 0 01-1-1V6zM17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),ls=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})}),as=({className:t})=>g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 8.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 8.25 20.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6A2.25 2.25 0 0 1 15.75 3.75h2.25A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25A2.25 2.25 0 0 1 13.5 8.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25h2.25a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})}),us=({className:t})=>g.jsxs("svg",{className:t,viewBox:"0 0 20 20",fill:"currentColor",children:[g.jsx("circle",{cx:"7",cy:"5",r:"1.5"}),g.jsx("circle",{cx:"13",cy:"5",r:"1.5"}),g.jsx("circle",{cx:"7",cy:"10",r:"1.5"}),g.jsx("circle",{cx:"13",cy:"10",r:"1.5"}),g.jsx("circle",{cx:"7",cy:"15",r:"1.5"}),g.jsx("circle",{cx:"13",cy:"15",r:"1.5"})]});function cs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return v.useMemo(()=>o=>{e.forEach(s=>s(o))},e)}const Vt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Be(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Tn(t){return"nodeType"in t}function W(t){var e,n;return t?Be(t)?t:Tn(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function xn(t){const{Document:e}=W(t);return t instanceof e}function ct(t){return Be(t)?!1:t instanceof W(t).HTMLElement}function Pi(t){return t instanceof W(t).SVGElement}function He(t){return t?Be(t)?t.document:Tn(t)?xn(t)?t:ct(t)||Pi(t)?t.ownerDocument:document:document:document}const ie=Vt?v.useLayoutEffect:v.useEffect;function Gt(t){const e=v.useRef(t);return ie(()=>{e.current=t}),v.useCallback(function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e.current==null?void 0:e.current(...o)},[])}function ds(){const t=v.useRef(null),e=v.useCallback((o,s)=>{t.current=setInterval(o,s)},[]),n=v.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function lt(t,e){e===void 0&&(e=[t]);const n=v.useRef(t);return ie(()=>{n.current!==t&&(n.current=t)},e),n}function dt(t,e){const n=v.useRef();return v.useMemo(()=>{const o=t(n.current);return n.current=o,o},[...e])}function _t(t){const e=Gt(t),n=v.useRef(null),o=v.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,o]}function wt(t){const e=v.useRef();return v.useEffect(()=>{e.current=t},[t]),e.current}let Qt={};function ft(t,e){return v.useMemo(()=>{if(e)return e;const n=Qt[t]==null?0:Qt[t]+1;return Qt[t]=n,t+"-"+n},[t,e])}function Di(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return o.reduce((l,a)=>{const u=Object.entries(a);for(const[d,c]of u){const f=l[d];f!=null&&(l[d]=f+t*c)}return l},{...e})}}const Ue=Di(1),at=Di(-1);function fs(t){return"clientX"in t&&"clientY"in t}function qt(t){if(!t)return!1;const{KeyboardEvent:e}=W(t.target);return e&&t instanceof e}function ps(t){if(!t)return!1;const{TouchEvent:e}=W(t.target);return e&&t instanceof e}function Pt(t){if(ps(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return fs(t)?{x:t.clientX,y:t.clientY}:null}const Me=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Me.Translate.toString(t),Me.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:o}=t;return e+" "+n+"ms "+o}}}),$n="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ms(t){return t.matches($n)?t:t.querySelector($n)}const gs={display:"none"};function hs(t){let{id:e,value:n}=t;return V.createElement("div",{id:e,style:gs},n)}function ys(t){let{id:e,announcement:n,ariaLiveType:o="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return V.createElement("div",{id:e,style:s,role:"status","aria-live":o,"aria-atomic":!0},n)}function vs(){const[t,e]=v.useState("");return{announce:v.useCallback(o=>{o!=null&&e(o)},[]),announcement:t}}const Ni=v.createContext(null);function Cs(t){const e=v.useContext(Ni);v.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Ts(){const[t]=v.useState(()=>new Set),e=v.useCallback(o=>(t.add(o),()=>t.delete(o)),[t]);return[v.useCallback(o=>{let{type:s,event:l}=o;t.forEach(a=>{var u;return(u=a[s])==null?void 0:u.call(a,l)})},[t]),e]}const xs={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ss={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Is(t){let{announcements:e=Ss,container:n,hiddenTextDescribedById:o,screenReaderInstructions:s=xs}=t;const{announce:l,announcement:a}=vs(),u=ft("DndLiveRegion"),[d,c]=v.useState(!1);if(v.useEffect(()=>{c(!0)},[]),Cs(v.useMemo(()=>({onDragStart(p){let{active:m}=p;l(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:h}=p;e.onDragMove&&l(e.onDragMove({active:m,over:h}))},onDragOver(p){let{active:m,over:h}=p;l(e.onDragOver({active:m,over:h}))},onDragEnd(p){let{active:m,over:h}=p;l(e.onDragEnd({active:m,over:h}))},onDragCancel(p){let{active:m,over:h}=p;l(e.onDragCancel({active:m,over:h}))}}),[l,e])),!d)return null;const f=V.createElement(V.Fragment,null,V.createElement(hs,{id:o,value:s.draggable}),V.createElement(ys,{id:u,announcement:a}));return n?nt.createPortal(f,n):f}var q;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(q||(q={}));function Dt(){}function Jn(t,e){return v.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Es(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return v.useMemo(()=>[...e].filter(o=>o!=null),[...e])}const re=Object.freeze({x:0,y:0});function bi(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ms(t,e){const n=Pt(t);if(!n)return"0 0";const o={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return o.x+"% "+o.y+"%"}function ki(t,e){let{data:{value:n}}=t,{data:{value:o}}=e;return n-o}function As(t,e){let{data:{value:n}}=t,{data:{value:o}}=e;return o-n}function Yn(t){let{left:e,top:n,height:o,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+o},{x:e+s,y:n+o}]}function Li(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Wn(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Rs=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:o}=t;const s=Wn(e,e.left,e.top),l=[];for(const a of o){const{id:u}=a,d=n.get(u);if(d){const c=bi(Wn(d),s);l.push({id:u,data:{droppableContainer:a,value:c}})}}return l.sort(ki)},_s=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:o}=t;const s=Yn(e),l=[];for(const a of o){const{id:u}=a,d=n.get(u);if(d){const c=Yn(d),f=s.reduce((m,h,C)=>m+bi(c[C],h),0),p=Number((f/4).toFixed(4));l.push({id:u,data:{droppableContainer:a,value:p}})}}return l.sort(ki)};function ws(t,e){const n=Math.max(e.top,t.top),o=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),l=Math.min(e.top+e.height,t.top+t.height),a=s-o,u=l-n;if(o<s&&n<l){const d=e.width*e.height,c=t.width*t.height,f=a*u,p=f/(d+c-f);return Number(p.toFixed(4))}return 0}const Ps=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:o}=t;const s=[];for(const l of o){const{id:a}=l,u=n.get(a);if(u){const d=ws(u,e);d>0&&s.push({id:a,data:{droppableContainer:l,value:d}})}}return s.sort(As)};function Ds(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Fi(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:re}function Ns(t){return function(n){for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];return s.reduce((a,u)=>({...a,top:a.top+t*u.y,bottom:a.bottom+t*u.y,left:a.left+t*u.x,right:a.right+t*u.x}),{...n})}}const bs=Ns(1);function Ui(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function ks(t,e,n){const o=Ui(e);if(!o)return t;const{scaleX:s,scaleY:l,x:a,y:u}=o,d=t.left-a-(1-s)*parseFloat(n),c=t.top-u-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?t.width/s:t.width,p=l?t.height/l:t.height;return{width:f,height:p,top:c,right:d+f,bottom:c+p,left:d}}const Ls={ignoreTransform:!1};function $e(t,e){e===void 0&&(e=Ls);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:f}=W(t).getComputedStyle(t);c&&(n=ks(n,c,f))}const{top:o,left:s,width:l,height:a,bottom:u,right:d}=n;return{top:o,left:s,width:l,height:a,bottom:u,right:d}}function Kn(t){return $e(t,{ignoreTransform:!0})}function Fs(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Us(t,e){return e===void 0&&(e=W(t).getComputedStyle(t)),e.position==="fixed"}function Vs(t,e){e===void 0&&(e=W(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=e[s];return typeof l=="string"?n.test(l):!1})}function Bt(t,e){const n=[];function o(s){if(e!=null&&n.length>=e||!s)return n;if(xn(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ct(s)||Pi(s)||n.includes(s))return n;const l=W(t).getComputedStyle(s);return s!==t&&Vs(s,l)&&n.push(s),Us(s,l)?n:o(s.parentNode)}return t?o(t):n}function Vi(t){const[e]=Bt(t,1);return e??null}function Zt(t){return!Vt||!t?null:Be(t)?t:Tn(t)?xn(t)||t===He(t).scrollingElement?window:ct(t)?t:null:null}function Gi(t){return Be(t)?t.scrollX:t.scrollLeft}function qi(t){return Be(t)?t.scrollY:t.scrollTop}function sn(t){return{x:Gi(t),y:qi(t)}}var B;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(B||(B={}));function Bi(t){return!Vt||!t?!1:t===document.scrollingElement}function Hi(t){const e={x:0,y:0},n=Bi(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},o={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,l=t.scrollLeft<=e.x,a=t.scrollTop>=o.y,u=t.scrollLeft>=o.x;return{isTop:s,isLeft:l,isBottom:a,isRight:u,maxScroll:o,minScroll:e}}const Gs={x:.2,y:.2};function qs(t,e,n,o,s){let{top:l,left:a,right:u,bottom:d}=n;o===void 0&&(o=10),s===void 0&&(s=Gs);const{isTop:c,isBottom:f,isLeft:p,isRight:m}=Hi(t),h={x:0,y:0},C={x:0,y:0},y={height:e.height*s.y,width:e.width*s.x};return!c&&l<=e.top+y.height?(h.y=B.Backward,C.y=o*Math.abs((e.top+y.height-l)/y.height)):!f&&d>=e.bottom-y.height&&(h.y=B.Forward,C.y=o*Math.abs((e.bottom-y.height-d)/y.height)),!m&&u>=e.right-y.width?(h.x=B.Forward,C.x=o*Math.abs((e.right-y.width-u)/y.width)):!p&&a<=e.left+y.width&&(h.x=B.Backward,C.x=o*Math.abs((e.left+y.width-a)/y.width)),{direction:h,speed:C}}function Bs(t){if(t===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:e,left:n,right:o,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:o,bottom:s,width:t.clientWidth,height:t.clientHeight}}function $i(t){return t.reduce((e,n)=>Ue(e,sn(n)),re)}function Hs(t){return t.reduce((e,n)=>e+Gi(n),0)}function $s(t){return t.reduce((e,n)=>e+qi(n),0)}function Ji(t,e){if(e===void 0&&(e=$e),!t)return;const{top:n,left:o,bottom:s,right:l}=e(t);Vi(t)&&(s<=0||l<=0||n>=window.innerHeight||o>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Js=[["x",["left","right"],Hs],["y",["top","bottom"],$s]];class Sn{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const o=Bt(n),s=$i(o);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,a,u]of Js)for(const d of a)Object.defineProperty(this,d,{get:()=>{const c=u(o),f=s[l]-c;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ot{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var o;return(o=this.target)==null?void 0:o.removeEventListener(...n)})},this.target=e}add(e,n,o){var s;(s=this.target)==null||s.addEventListener(e,n,o),this.listeners.push([e,n,o])}}function Ys(t){const{EventTarget:e}=W(t);return t instanceof e?t:He(t)}function jt(t,e){const n=Math.abs(t.x),o=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+o**2)>e:"x"in e&&"y"in e?n>e.x&&o>e.y:"x"in e?n>e.x:"y"in e?o>e.y:!1}var ne;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ne||(ne={}));function zn(t){t.preventDefault()}function Ws(t){t.stopPropagation()}var k;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(k||(k={}));const Yi={start:[k.Space,k.Enter],cancel:[k.Esc],end:[k.Space,k.Enter,k.Tab]},Ks=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case k.Right:return{...n,x:n.x+25};case k.Left:return{...n,x:n.x-25};case k.Down:return{...n,y:n.y+25};case k.Up:return{...n,y:n.y-25}}};class In{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new ot(He(n)),this.windowListeners=new ot(W(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ne.Resize,this.handleCancel),this.windowListeners.add(ne.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ne.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,o=e.node.current;o&&Ji(o),n(re)}handleKeyDown(e){if(qt(e)){const{active:n,context:o,options:s}=this.props,{keyboardCodes:l=Yi,coordinateGetter:a=Ks,scrollBehavior:u="smooth"}=s,{code:d}=e;if(l.end.includes(d)){this.handleEnd(e);return}if(l.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:c}=o.current,f=c?{x:c.left,y:c.top}:re;this.referenceCoordinates||(this.referenceCoordinates=f);const p=a(e,{active:n,context:o.current,currentCoordinates:f});if(p){const m=at(p,f),h={x:0,y:0},{scrollableAncestors:C}=o.current;for(const y of C){const T=e.code,{isTop:I,isRight:E,isLeft:M,isBottom:R,maxScroll:S,minScroll:_}=Hi(y),A=Bs(y),P={x:Math.min(T===k.Right?A.right-A.width/2:A.right,Math.max(T===k.Right?A.left:A.left+A.width/2,p.x)),y:Math.min(T===k.Down?A.bottom-A.height/2:A.bottom,Math.max(T===k.Down?A.top:A.top+A.height/2,p.y))},w=T===k.Right&&!E||T===k.Left&&!M,b=T===k.Down&&!R||T===k.Up&&!I;if(w&&P.x!==p.x){const N=y.scrollLeft+m.x,G=T===k.Right&&N<=S.x||T===k.Left&&N>=_.x;if(G&&!m.y){y.scrollTo({left:N,behavior:u});return}G?h.x=y.scrollLeft-N:h.x=T===k.Right?y.scrollLeft-S.x:y.scrollLeft-_.x,h.x&&y.scrollBy({left:-h.x,behavior:u});break}else if(b&&P.y!==p.y){const N=y.scrollTop+m.y,G=T===k.Down&&N<=S.y||T===k.Up&&N>=_.y;if(G&&!m.x){y.scrollTo({top:N,behavior:u});return}G?h.y=y.scrollTop-N:h.y=T===k.Down?y.scrollTop-S.y:y.scrollTop-_.y,h.y&&y.scrollBy({top:-h.y,behavior:u});break}}this.handleMove(e,Ue(at(p,this.referenceCoordinates),h))}}}handleMove(e,n){const{onMove:o}=this.props;e.preventDefault(),o(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}In.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:o=Yi,onActivation:s}=e,{active:l}=n;const{code:a}=t.nativeEvent;if(o.start.includes(a)){const u=l.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Xn(t){return!!(t&&"distance"in t)}function On(t){return!!(t&&"delay"in t)}class En{constructor(e,n,o){var s;o===void 0&&(o=Ys(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:l}=e,{target:a}=l;this.props=e,this.events=n,this.document=He(a),this.documentListeners=new ot(this.document),this.listeners=new ot(o),this.windowListeners=new ot(W(a)),this.initialCoordinates=(s=Pt(l))!=null?s:re,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:o}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ne.Resize,this.handleCancel),this.windowListeners.add(ne.DragStart,zn),this.windowListeners.add(ne.VisibilityChange,this.handleCancel),this.windowListeners.add(ne.ContextMenu,zn),this.documentListeners.add(ne.Keydown,this.handleKeydown),n){if(o!=null&&o({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(On(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Xn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:o,onPending:s}=this.props;s(o,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ne.Click,Ws,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ne.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:o,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:u}}=l;if(!s)return;const d=(n=Pt(e))!=null?n:re,c=at(s,d);if(!o&&u){if(Xn(u)){if(u.tolerance!=null&&jt(c,u.tolerance))return this.handleCancel();if(jt(c,u.distance))return this.handleStart()}if(On(u)&&jt(c,u.tolerance))return this.handleCancel();this.handlePending(u,c);return}e.cancelable&&e.preventDefault(),a(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===k.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const zs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Mn extends En{constructor(e){const{event:n}=e,o=He(n.target);super(e,zs,o)}}Mn.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;return!n.isPrimary||n.button!==0?!1:(o==null||o({event:n}),!0)}}];const Xs={move:{name:"mousemove"},end:{name:"mouseup"}};var ln;(function(t){t[t.RightClick=2]="RightClick"})(ln||(ln={}));class Os extends En{constructor(e){super(e,Xs,He(e.event.target))}}Os.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;return n.button===ln.RightClick?!1:(o==null||o({event:n}),!0)}}];const en={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Qs extends En{constructor(e){super(e,en)}static setup(){return window.addEventListener(en.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(en.move.name,e)};function e(){}}}Qs.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:o}=e;const{touches:s}=n;return s.length>1?!1:(o==null||o({event:n}),!0)}}];var it;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(it||(it={}));var Nt;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Nt||(Nt={}));function Zs(t){let{acceleration:e,activator:n=it.Pointer,canScroll:o,draggingRect:s,enabled:l,interval:a=5,order:u=Nt.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:f,delta:p,threshold:m}=t;const h=el({delta:p,disabled:!l}),[C,y]=ds(),T=v.useRef({x:0,y:0}),I=v.useRef({x:0,y:0}),E=v.useMemo(()=>{switch(n){case it.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case it.DraggableRect:return s}},[n,s,d]),M=v.useRef(null),R=v.useCallback(()=>{const _=M.current;if(!_)return;const A=T.current.x*I.current.x,P=T.current.y*I.current.y;_.scrollBy(A,P)},[]),S=v.useMemo(()=>u===Nt.TreeOrder?[...c].reverse():c,[u,c]);v.useEffect(()=>{if(!l||!c.length||!E){y();return}for(const _ of S){if((o==null?void 0:o(_))===!1)continue;const A=c.indexOf(_),P=f[A];if(!P)continue;const{direction:w,speed:b}=qs(_,P,E,e,m);for(const N of["x","y"])h[N][w[N]]||(b[N]=0,w[N]=0);if(b.x>0||b.y>0){y(),M.current=_,C(R,a),T.current=b,I.current=w;return}}T.current={x:0,y:0},I.current={x:0,y:0},y()},[e,R,o,y,l,a,JSON.stringify(E),JSON.stringify(h),C,c,S,f,JSON.stringify(m)])}const js={x:{[B.Backward]:!1,[B.Forward]:!1},y:{[B.Backward]:!1,[B.Forward]:!1}};function el(t){let{delta:e,disabled:n}=t;const o=wt(e);return dt(s=>{if(n||!o||!s)return js;const l={x:Math.sign(e.x-o.x),y:Math.sign(e.y-o.y)};return{x:{[B.Backward]:s.x[B.Backward]||l.x===-1,[B.Forward]:s.x[B.Forward]||l.x===1},y:{[B.Backward]:s.y[B.Backward]||l.y===-1,[B.Forward]:s.y[B.Forward]||l.y===1}}},[n,e,o])}function tl(t,e){const n=e!=null?t.get(e):void 0,o=n?n.node.current:null;return dt(s=>{var l;return e==null?null:(l=o??s)!=null?l:null},[o,e])}function nl(t,e){return v.useMemo(()=>t.reduce((n,o)=>{const{sensor:s}=o,l=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,o)}));return[...n,...l]},[]),[t,e])}var ut;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ut||(ut={}));var an;(function(t){t.Optimized="optimized"})(an||(an={}));const Qn=new Map;function ol(t,e){let{dragging:n,dependencies:o,config:s}=e;const[l,a]=v.useState(null),{frequency:u,measure:d,strategy:c}=s,f=v.useRef(t),p=T(),m=lt(p),h=v.useCallback(function(I){I===void 0&&(I=[]),!m.current&&a(E=>E===null?I:E.concat(I.filter(M=>!E.includes(M))))},[m]),C=v.useRef(null),y=dt(I=>{if(p&&!n)return Qn;if(!I||I===Qn||f.current!==t||l!=null){const E=new Map;for(let M of t){if(!M)continue;if(l&&l.length>0&&!l.includes(M.id)&&M.rect.current){E.set(M.id,M.rect.current);continue}const R=M.node.current,S=R?new Sn(d(R),R):null;M.rect.current=S,S&&E.set(M.id,S)}return E}return I},[t,l,n,p,d]);return v.useEffect(()=>{f.current=t},[t]),v.useEffect(()=>{p||h()},[n,p]),v.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),v.useEffect(()=>{p||typeof u!="number"||C.current!==null||(C.current=setTimeout(()=>{h(),C.current=null},u))},[u,p,h,...o]),{droppableRects:y,measureDroppableContainers:h,measuringScheduled:l!=null};function T(){switch(c){case ut.Always:return!1;case ut.BeforeDragging:return n;default:return!n}}}function An(t,e){return dt(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function il(t,e){return An(t,e)}function rl(t){let{callback:e,disabled:n}=t;const o=Gt(e),s=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(o)},[o,n]);return v.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Ht(t){let{callback:e,disabled:n}=t;const o=Gt(e),s=v.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(o)},[n]);return v.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function sl(t){return new Sn($e(t),t)}function Zn(t,e,n){e===void 0&&(e=sl);const[o,s]=v.useState(null);function l(){s(d=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=d??n)!=null?c:null}const f=e(t);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const a=rl({callback(d){if(t)for(const c of d){const{type:f,target:p}=c;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){l();break}}}}),u=Ht({callback:l});return ie(()=>{l(),t?(u==null||u.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),a==null||a.disconnect())},[t]),o}function ll(t){const e=An(t);return Fi(t,e)}const jn=[];function al(t){const e=v.useRef(t),n=dt(o=>t?o&&o!==jn&&t&&e.current&&t.parentNode===e.current.parentNode?o:Bt(t):jn,[t]);return v.useEffect(()=>{e.current=t},[t]),n}function ul(t){const[e,n]=v.useState(null),o=v.useRef(t),s=v.useCallback(l=>{const a=Zt(l.target);a&&n(u=>u?(u.set(a,sn(a)),new Map(u)):null)},[]);return v.useEffect(()=>{const l=o.current;if(t!==l){a(l);const u=t.map(d=>{const c=Zt(d);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,sn(c)]):null}).filter(d=>d!=null);n(u.length?new Map(u):null),o.current=t}return()=>{a(t),a(l)};function a(u){u.forEach(d=>{const c=Zt(d);c==null||c.removeEventListener("scroll",s)})}},[s,t]),v.useMemo(()=>t.length?e?Array.from(e.values()).reduce((l,a)=>Ue(l,a),re):$i(t):re,[t,e])}function eo(t,e){e===void 0&&(e=[]);const n=v.useRef(null);return v.useEffect(()=>{n.current=null},e),v.useEffect(()=>{const o=t!==re;o&&!n.current&&(n.current=t),!o&&n.current&&(n.current=null)},[t]),n.current?at(t,n.current):re}function cl(t){v.useEffect(()=>{if(!Vt)return;const e=t.map(n=>{let{sensor:o}=n;return o.setup==null?void 0:o.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function dl(t,e){return v.useMemo(()=>t.reduce((n,o)=>{let{eventName:s,handler:l}=o;return n[s]=a=>{l(a,e)},n},{}),[t,e])}function Wi(t){return v.useMemo(()=>t?Fs(t):null,[t])}const to=[];function fl(t,e){e===void 0&&(e=$e);const[n]=t,o=Wi(n?W(n):null),[s,l]=v.useState(to);function a(){l(()=>t.length?t.map(d=>Bi(d)?o:new Sn(e(d),d)):to)}const u=Ht({callback:a});return ie(()=>{u==null||u.disconnect(),a(),t.forEach(d=>u==null?void 0:u.observe(d))},[t]),s}function Ki(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ct(e)?e:t}function pl(t){let{measure:e}=t;const[n,o]=v.useState(null),s=v.useCallback(c=>{for(const{target:f}of c)if(ct(f)){o(p=>{const m=e(f);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),l=Ht({callback:s}),a=v.useCallback(c=>{const f=Ki(c);l==null||l.disconnect(),f&&(l==null||l.observe(f)),o(f?e(f):null)},[e,l]),[u,d]=_t(a);return v.useMemo(()=>({nodeRef:u,rect:n,setRef:d}),[n,u,d])}const ml=[{sensor:Mn,options:{}},{sensor:In,options:{}}],gl={current:{}},Et={draggable:{measure:Kn},droppable:{measure:Kn,strategy:ut.WhileDragging,frequency:an.Optimized},dragOverlay:{measure:$e}};class rt extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,o;return(n=(o=this.get(e))==null?void 0:o.node.current)!=null?n:void 0}}const hl={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Dt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Et,measureDroppableContainers:Dt,windowRect:null,measuringScheduled:!1},zi={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Dt,draggableNodes:new Map,over:null,measureDroppableContainers:Dt},pt=v.createContext(zi),Xi=v.createContext(hl);function yl(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rt}}}function vl(t,e){switch(e.type){case q.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case q.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case q.DragEnd:case q.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case q.RegisterDroppable:{const{element:n}=e,{id:o}=n,s=new rt(t.droppable.containers);return s.set(o,n),{...t,droppable:{...t.droppable,containers:s}}}case q.SetDroppableDisabled:{const{id:n,key:o,disabled:s}=e,l=t.droppable.containers.get(n);if(!l||o!==l.key)return t;const a=new rt(t.droppable.containers);return a.set(n,{...l,disabled:s}),{...t,droppable:{...t.droppable,containers:a}}}case q.UnregisterDroppable:{const{id:n,key:o}=e,s=t.droppable.containers.get(n);if(!s||o!==s.key)return t;const l=new rt(t.droppable.containers);return l.delete(n),{...t,droppable:{...t.droppable,containers:l}}}default:return t}}function Cl(t){let{disabled:e}=t;const{active:n,activatorEvent:o,draggableNodes:s}=v.useContext(pt),l=wt(o),a=wt(n==null?void 0:n.id);return v.useEffect(()=>{if(!e&&!o&&l&&a!=null){if(!qt(l)||document.activeElement===l.target)return;const u=s.get(a);if(!u)return;const{activatorNode:d,node:c}=u;if(!d.current&&!c.current)return;requestAnimationFrame(()=>{for(const f of[d.current,c.current]){if(!f)continue;const p=ms(f);if(p){p.focus();break}}})}},[o,e,s,a,l]),null}function Oi(t,e){let{transform:n,...o}=e;return t!=null&&t.length?t.reduce((s,l)=>l({transform:s,...o}),n):n}function Tl(t){return v.useMemo(()=>({draggable:{...Et.draggable,...t==null?void 0:t.draggable},droppable:{...Et.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Et.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function xl(t){let{activeNode:e,measure:n,initialRect:o,config:s=!0}=t;const l=v.useRef(!1),{x:a,y:u}=typeof s=="boolean"?{x:s,y:s}:s;ie(()=>{if(!a&&!u||!e){l.current=!1;return}if(l.current||!o)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const f=n(c),p=Fi(f,o);if(a||(p.x=0),u||(p.y=0),l.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=Vi(c);m&&m.scrollBy({top:p.y,left:p.x})}},[e,a,u,o,n])}const $t=v.createContext({...re,scaleX:1,scaleY:1});var Ie;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ie||(Ie={}));const Sl=v.memo(function(e){var n,o,s,l;let{id:a,accessibility:u,autoScroll:d=!0,children:c,sensors:f=ml,collisionDetection:p=Ps,measuring:m,modifiers:h,...C}=e;const y=v.useReducer(vl,void 0,yl),[T,I]=y,[E,M]=Ts(),[R,S]=v.useState(Ie.Uninitialized),_=R===Ie.Initialized,{draggable:{active:A,nodes:P,translate:w},droppable:{containers:b}}=T,N=A!=null?P.get(A):null,G=v.useRef({initial:null,translated:null}),K=v.useMemo(()=>{var $;return A!=null?{id:A,data:($=N==null?void 0:N.data)!=null?$:gl,rect:G}:null},[A,N]),X=v.useRef(null),[Y,he]=v.useState(null),[O,gt]=v.useState(null),ue=lt(C,Object.values(C)),ze=ft("DndDescribedBy",a),ht=v.useMemo(()=>b.getEnabled(),[b]),z=Tl(m),{droppableRects:ce,measureDroppableContainers:Ae,measuringScheduled:Xe}=ol(ht,{dragging:_,dependencies:[w.x,w.y],config:z.droppable}),ee=tl(P,A),yt=v.useMemo(()=>O?Pt(O):null,[O]),ye=Br(),de=il(ee,z.draggable.measure);xl({activeNode:A!=null?P.get(A):null,config:ye.layoutShiftCompensation,initialRect:de,measure:z.draggable.measure});const F=Zn(ee,z.draggable.measure,de),Oe=Zn(ee?ee.parentElement:null),se=v.useRef({activatorEvent:null,active:null,activeNode:ee,collisionRect:null,collisions:null,droppableRects:ce,draggableNodes:P,draggingNode:null,draggingNodeRect:null,droppableContainers:b,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Pe=b.getNodeFor((n=se.current.over)==null?void 0:n.id),fe=pl({measure:z.dragOverlay.measure}),De=(o=fe.nodeRef.current)!=null?o:ee,Ne=_?(s=fe.rect)!=null?s:F:null,bn=!!(fe.nodeRef.current&&fe.rect),kn=ll(bn?null:F),Kt=Wi(De?W(De):null),ve=al(_?Pe??ee:null),vt=fl(ve),Ct=Oi(h,{transform:{x:w.x-kn.x,y:w.y-kn.y,scaleX:1,scaleY:1},activatorEvent:O,active:K,activeNodeRect:F,containerNodeRect:Oe,draggingNodeRect:Ne,over:se.current.over,overlayNodeRect:fe.rect,scrollableAncestors:ve,scrollableAncestorRects:vt,windowRect:Kt}),Ln=yt?Ue(yt,w):null,Fn=ul(ve),kr=eo(Fn),Lr=eo(Fn,[F]),be=Ue(Ct,kr),ke=Ne?bs(Ne,Ct):null,Qe=K&&ke?p({active:K,collisionRect:ke,droppableRects:ce,droppableContainers:ht,pointerCoordinates:Ln}):null,Un=Li(Qe,"id"),[Ce,Vn]=v.useState(null),Fr=bn?Ct:Ue(Ct,Lr),Ur=Ds(Fr,(l=Ce==null?void 0:Ce.rect)!=null?l:null,F),zt=v.useRef(null),Gn=v.useCallback(($,Q)=>{let{sensor:Z,options:Te}=Q;if(X.current==null)return;const te=P.get(X.current);if(!te)return;const j=$.nativeEvent,le=new Z({active:X.current,activeNode:te,event:j,options:Te,context:se,onAbort(H){if(!P.get(H))return;const{onDragAbort:ae}=ue.current,pe={id:H};ae==null||ae(pe),E({type:"onDragAbort",event:pe})},onPending(H,xe,ae,pe){if(!P.get(H))return;const{onDragPending:je}=ue.current,Se={id:H,constraint:xe,initialCoordinates:ae,offset:pe};je==null||je(Se),E({type:"onDragPending",event:Se})},onStart(H){const xe=X.current;if(xe==null)return;const ae=P.get(xe);if(!ae)return;const{onDragStart:pe}=ue.current,Ze={activatorEvent:j,active:{id:xe,data:ae.data,rect:G}};nt.unstable_batchedUpdates(()=>{pe==null||pe(Ze),S(Ie.Initializing),I({type:q.DragStart,initialCoordinates:H,active:xe}),E({type:"onDragStart",event:Ze}),he(zt.current),gt(j)})},onMove(H){I({type:q.DragMove,coordinates:H})},onEnd:Le(q.DragEnd),onCancel:Le(q.DragCancel)});zt.current=le;function Le(H){return async function(){const{active:ae,collisions:pe,over:Ze,scrollAdjustedTranslate:je}=se.current;let Se=null;if(ae&&je){const{cancelDrop:et}=ue.current;Se={activatorEvent:j,active:ae,collisions:pe,delta:je,over:Ze},H===q.DragEnd&&typeof et=="function"&&await Promise.resolve(et(Se))&&(H=q.DragCancel)}X.current=null,nt.unstable_batchedUpdates(()=>{I({type:H}),S(Ie.Uninitialized),Vn(null),he(null),gt(null),zt.current=null;const et=H===q.DragEnd?"onDragEnd":"onDragCancel";if(Se){const Xt=ue.current[et];Xt==null||Xt(Se),E({type:et,event:Se})}})}}},[P]),Vr=v.useCallback(($,Q)=>(Z,Te)=>{const te=Z.nativeEvent,j=P.get(Te);if(X.current!==null||!j||te.dndKit||te.defaultPrevented)return;const le={active:j};$(Z,Q.options,le)===!0&&(te.dndKit={capturedBy:Q.sensor},X.current=Te,Gn(Z,Q))},[P,Gn]),qn=nl(f,Vr);cl(f),ie(()=>{F&&R===Ie.Initializing&&S(Ie.Initialized)},[F,R]),v.useEffect(()=>{const{onDragMove:$}=ue.current,{active:Q,activatorEvent:Z,collisions:Te,over:te}=se.current;if(!Q||!Z)return;const j={active:Q,activatorEvent:Z,collisions:Te,delta:{x:be.x,y:be.y},over:te};nt.unstable_batchedUpdates(()=>{$==null||$(j),E({type:"onDragMove",event:j})})},[be.x,be.y]),v.useEffect(()=>{const{active:$,activatorEvent:Q,collisions:Z,droppableContainers:Te,scrollAdjustedTranslate:te}=se.current;if(!$||X.current==null||!Q||!te)return;const{onDragOver:j}=ue.current,le=Te.get(Un),Le=le&&le.rect.current?{id:le.id,rect:le.rect.current,data:le.data,disabled:le.disabled}:null,H={active:$,activatorEvent:Q,collisions:Z,delta:{x:te.x,y:te.y},over:Le};nt.unstable_batchedUpdates(()=>{Vn(Le),j==null||j(H),E({type:"onDragOver",event:H})})},[Un]),ie(()=>{se.current={activatorEvent:O,active:K,activeNode:ee,collisionRect:ke,collisions:Qe,droppableRects:ce,draggableNodes:P,draggingNode:De,draggingNodeRect:Ne,droppableContainers:b,over:Ce,scrollableAncestors:ve,scrollAdjustedTranslate:be},G.current={initial:Ne,translated:ke}},[K,ee,Qe,ke,P,De,Ne,ce,b,Ce,ve,be]),Zs({...ye,delta:w,draggingRect:ke,pointerCoordinates:Ln,scrollableAncestors:ve,scrollableAncestorRects:vt});const Gr=v.useMemo(()=>({active:K,activeNode:ee,activeNodeRect:F,activatorEvent:O,collisions:Qe,containerNodeRect:Oe,dragOverlay:fe,draggableNodes:P,droppableContainers:b,droppableRects:ce,over:Ce,measureDroppableContainers:Ae,scrollableAncestors:ve,scrollableAncestorRects:vt,measuringConfiguration:z,measuringScheduled:Xe,windowRect:Kt}),[K,ee,F,O,Qe,Oe,fe,P,b,ce,Ce,Ae,ve,vt,z,Xe,Kt]),qr=v.useMemo(()=>({activatorEvent:O,activators:qn,active:K,activeNodeRect:F,ariaDescribedById:{draggable:ze},dispatch:I,draggableNodes:P,over:Ce,measureDroppableContainers:Ae}),[O,qn,K,F,I,ze,P,Ce,Ae]);return V.createElement(Ni.Provider,{value:M},V.createElement(pt.Provider,{value:qr},V.createElement(Xi.Provider,{value:Gr},V.createElement($t.Provider,{value:Ur},c)),V.createElement(Cl,{disabled:(u==null?void 0:u.restoreFocus)===!1})),V.createElement(Is,{...u,hiddenTextDescribedById:ze}));function Br(){const $=(Y==null?void 0:Y.autoScrollEnabled)===!1,Q=typeof d=="object"?d.enabled===!1:d===!1,Z=_&&!$&&!Q;return typeof d=="object"?{...d,enabled:Z}:{enabled:Z}}}),Il=v.createContext(null),no="button",El="Draggable";function Ml(t){let{id:e,data:n,disabled:o=!1,attributes:s}=t;const l=ft(El),{activators:a,activatorEvent:u,active:d,activeNodeRect:c,ariaDescribedById:f,draggableNodes:p,over:m}=v.useContext(pt),{role:h=no,roleDescription:C="draggable",tabIndex:y=0}=s??{},T=(d==null?void 0:d.id)===e,I=v.useContext(T?$t:Il),[E,M]=_t(),[R,S]=_t(),_=dl(a,e),A=lt(n);ie(()=>(p.set(e,{id:e,key:l,node:E,activatorNode:R,data:A}),()=>{const w=p.get(e);w&&w.key===l&&p.delete(e)}),[p,e]);const P=v.useMemo(()=>({role:h,tabIndex:y,"aria-disabled":o,"aria-pressed":T&&h===no?!0:void 0,"aria-roledescription":C,"aria-describedby":f.draggable}),[o,h,y,T,C,f.draggable]);return{active:d,activatorEvent:u,activeNodeRect:c,attributes:P,isDragging:T,listeners:o?void 0:_,node:E,over:m,setNodeRef:M,setActivatorNodeRef:S,transform:I}}function Qi(){return v.useContext(Xi)}const Al="Droppable",Rl={timeout:25};function _l(t){let{data:e,disabled:n=!1,id:o,resizeObserverConfig:s}=t;const l=ft(Al),{active:a,dispatch:u,over:d,measureDroppableContainers:c}=v.useContext(pt),f=v.useRef({disabled:n}),p=v.useRef(!1),m=v.useRef(null),h=v.useRef(null),{disabled:C,updateMeasurementsFor:y,timeout:T}={...Rl,...s},I=lt(y??o),E=v.useCallback(()=>{if(!p.current){p.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{c(Array.isArray(I.current)?I.current:[I.current]),h.current=null},T)},[T]),M=Ht({callback:E,disabled:C||!a}),R=v.useCallback((P,w)=>{M&&(w&&(M.unobserve(w),p.current=!1),P&&M.observe(P))},[M]),[S,_]=_t(R),A=lt(e);return v.useEffect(()=>{!M||!S.current||(M.disconnect(),p.current=!1,M.observe(S.current))},[S,M]),v.useEffect(()=>(u({type:q.RegisterDroppable,element:{id:o,key:l,disabled:n,node:S,rect:m,data:A}}),()=>u({type:q.UnregisterDroppable,key:l,id:o})),[o]),v.useEffect(()=>{n!==f.current.disabled&&(u({type:q.SetDroppableDisabled,id:o,key:l,disabled:n}),f.current.disabled=n)},[o,l,n,u]),{active:a,rect:m,isOver:(d==null?void 0:d.id)===o,node:S,over:d,setNodeRef:_}}function wl(t){let{animation:e,children:n}=t;const[o,s]=v.useState(null),[l,a]=v.useState(null),u=wt(n);return!n&&!o&&u&&s(u),ie(()=>{if(!l)return;const d=o==null?void 0:o.key,c=o==null?void 0:o.props.id;if(d==null||c==null){s(null);return}Promise.resolve(e(c,l)).then(()=>{s(null)})},[e,o,l]),V.createElement(V.Fragment,null,n,o?v.cloneElement(o,{ref:a}):null)}const Pl={x:0,y:0,scaleX:1,scaleY:1};function Dl(t){let{children:e}=t;return V.createElement(pt.Provider,{value:zi},V.createElement($t.Provider,{value:Pl},e))}const Nl={position:"fixed",touchAction:"none"},bl=t=>qt(t)?"transform 250ms ease":void 0,kl=v.forwardRef((t,e)=>{let{as:n,activatorEvent:o,adjustScale:s,children:l,className:a,rect:u,style:d,transform:c,transition:f=bl}=t;if(!u)return null;const p=s?c:{...c,scaleX:1,scaleY:1},m={...Nl,width:u.width,height:u.height,top:u.top,left:u.left,transform:Me.Transform.toString(p),transformOrigin:s&&o?Ms(o,u):void 0,transition:typeof f=="function"?f(o):f,...d};return V.createElement(n,{className:a,style:m,ref:e},l)}),Ll=t=>e=>{let{active:n,dragOverlay:o}=e;const s={},{styles:l,className:a}=t;if(l!=null&&l.active)for(const[u,d]of Object.entries(l.active))d!==void 0&&(s[u]=n.node.style.getPropertyValue(u),n.node.style.setProperty(u,d));if(l!=null&&l.dragOverlay)for(const[u,d]of Object.entries(l.dragOverlay))d!==void 0&&o.node.style.setProperty(u,d);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&o.node.classList.add(a.dragOverlay),function(){for(const[d,c]of Object.entries(s))n.node.style.setProperty(d,c);a!=null&&a.active&&n.node.classList.remove(a.active)}},Fl=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Me.Transform.toString(e)},{transform:Me.Transform.toString(n)}]},Ul={duration:250,easing:"ease",keyframes:Fl,sideEffects:Ll({styles:{active:{opacity:"0"}}})};function Vl(t){let{config:e,draggableNodes:n,droppableContainers:o,measuringConfiguration:s}=t;return Gt((l,a)=>{if(e===null)return;const u=n.get(l);if(!u)return;const d=u.node.current;if(!d)return;const c=Ki(a);if(!c)return;const{transform:f}=W(a).getComputedStyle(a),p=Ui(f);if(!p)return;const m=typeof e=="function"?e:Gl(e);return Ji(d,s.draggable.measure),m({active:{id:l,data:u.data,node:d,rect:s.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(c)},droppableContainers:o,measuringConfiguration:s,transform:p})})}function Gl(t){const{duration:e,easing:n,sideEffects:o,keyframes:s}={...Ul,...t};return l=>{let{active:a,dragOverlay:u,transform:d,...c}=l;if(!e)return;const f={x:u.rect.left-a.rect.left,y:u.rect.top-a.rect.top},p={scaleX:d.scaleX!==1?a.rect.width*d.scaleX/u.rect.width:1,scaleY:d.scaleY!==1?a.rect.height*d.scaleY/u.rect.height:1},m={x:d.x-f.x,y:d.y-f.y,...p},h=s({...c,active:a,dragOverlay:u,transform:{initial:d,final:m}}),[C]=h,y=h[h.length-1];if(JSON.stringify(C)===JSON.stringify(y))return;const T=o==null?void 0:o({active:a,dragOverlay:u,...c}),I=u.node.animate(h,{duration:e,easing:n,fill:"forwards"});return new Promise(E=>{I.onfinish=()=>{T==null||T(),E()}})}}let oo=0;function ql(t){return v.useMemo(()=>{if(t!=null)return oo++,oo},[t])}const Bl=V.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:o,style:s,transition:l,modifiers:a,wrapperElement:u="div",className:d,zIndex:c=999}=t;const{activatorEvent:f,active:p,activeNodeRect:m,containerNodeRect:h,draggableNodes:C,droppableContainers:y,dragOverlay:T,over:I,measuringConfiguration:E,scrollableAncestors:M,scrollableAncestorRects:R,windowRect:S}=Qi(),_=v.useContext($t),A=ql(p==null?void 0:p.id),P=Oi(a,{activatorEvent:f,active:p,activeNodeRect:m,containerNodeRect:h,draggingNodeRect:T.rect,over:I,overlayNodeRect:T.rect,scrollableAncestors:M,scrollableAncestorRects:R,transform:_,windowRect:S}),w=An(m),b=Vl({config:o,draggableNodes:C,droppableContainers:y,measuringConfiguration:E}),N=w?T.setRef:void 0;return V.createElement(Dl,null,V.createElement(wl,{animation:b},p&&A?V.createElement(kl,{key:A,id:p.id,ref:N,as:u,activatorEvent:f,adjustScale:e,className:d,transition:l,rect:w,style:{zIndex:c,...s},transform:P},n):null))});function Rn(t,e,n){const o=t.slice();return o.splice(n<0?o.length+n:n,0,o.splice(e,1)[0]),o}function Hl(t,e){return t.reduce((n,o,s)=>{const l=e.get(o);return l&&(n[s]=l),n},Array(t.length))}function Tt(t){return t!==null&&t>=0}function $l(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Jl(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Zi=t=>{let{rects:e,activeIndex:n,overIndex:o,index:s}=t;const l=Rn(e,o,n),a=e[s],u=l[s];return!u||!a?null:{x:u.left-a.left,y:u.top-a.top,scaleX:u.width/a.width,scaleY:u.height/a.height}},xt={scaleX:1,scaleY:1},Yl=t=>{var e;let{activeIndex:n,activeNodeRect:o,index:s,rects:l,overIndex:a}=t;const u=(e=l[n])!=null?e:o;if(!u)return null;if(s===n){const c=l[a];return c?{x:0,y:n<a?c.top+c.height-(u.top+u.height):c.top-u.top,...xt}:null}const d=Wl(l,s,n);return s>n&&s<=a?{x:0,y:-u.height-d,...xt}:s<n&&s>=a?{x:0,y:u.height+d,...xt}:{x:0,y:0,...xt}};function Wl(t,e,n){const o=t[e],s=t[e-1],l=t[e+1];return o?n<e?s?o.top-(s.top+s.height):l?l.top-(o.top+o.height):0:l?l.top-(o.top+o.height):s?o.top-(s.top+s.height):0:0}const ji="Sortable",er=V.createContext({activeIndex:-1,containerId:ji,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Zi,disabled:{draggable:!1,droppable:!1}});function Kl(t){let{children:e,id:n,items:o,strategy:s=Zi,disabled:l=!1}=t;const{active:a,dragOverlay:u,droppableRects:d,over:c,measureDroppableContainers:f}=Qi(),p=ft(ji,n),m=u.rect!==null,h=v.useMemo(()=>o.map(_=>typeof _=="object"&&"id"in _?_.id:_),[o]),C=a!=null,y=a?h.indexOf(a.id):-1,T=c?h.indexOf(c.id):-1,I=v.useRef(h),E=!$l(h,I.current),M=T!==-1&&y===-1||E,R=Jl(l);ie(()=>{E&&C&&f(h)},[E,h,C,f]),v.useEffect(()=>{I.current=h},[h]);const S=v.useMemo(()=>({activeIndex:y,containerId:p,disabled:R,disableTransforms:M,items:h,overIndex:T,useDragOverlay:m,sortedRects:Hl(h,d),strategy:s}),[y,p,R.draggable,R.droppable,M,h,T,d,m,s]);return V.createElement(er.Provider,{value:S},e)}const zl=t=>{let{id:e,items:n,activeIndex:o,overIndex:s}=t;return Rn(n,o,s).indexOf(e)},Xl=t=>{let{containerId:e,isSorting:n,wasDragging:o,index:s,items:l,newIndex:a,previousItems:u,previousContainerId:d,transition:c}=t;return!c||!o||u!==l&&s===a?!1:n?!0:a!==s&&e===d},Ol={duration:200,easing:"ease"},tr="transform",Ql=Me.Transition.toString({property:tr,duration:0,easing:"linear"}),Zl={roleDescription:"sortable"};function jl(t){let{disabled:e,index:n,node:o,rect:s}=t;const[l,a]=v.useState(null),u=v.useRef(n);return ie(()=>{if(!e&&n!==u.current&&o.current){const d=s.current;if(d){const c=$e(o.current,{ignoreTransform:!0}),f={x:d.left-c.left,y:d.top-c.top,scaleX:d.width/c.width,scaleY:d.height/c.height};(f.x||f.y)&&a(f)}}n!==u.current&&(u.current=n)},[e,n,o,s]),v.useEffect(()=>{l&&a(null)},[l]),l}function ea(t){let{animateLayoutChanges:e=Xl,attributes:n,disabled:o,data:s,getNewIndex:l=zl,id:a,strategy:u,resizeObserverConfig:d,transition:c=Ol}=t;const{items:f,containerId:p,activeIndex:m,disabled:h,disableTransforms:C,sortedRects:y,overIndex:T,useDragOverlay:I,strategy:E}=v.useContext(er),M=ta(o,h),R=f.indexOf(a),S=v.useMemo(()=>({sortable:{containerId:p,index:R,items:f},...s}),[p,s,R,f]),_=v.useMemo(()=>f.slice(f.indexOf(a)),[f,a]),{rect:A,node:P,isOver:w,setNodeRef:b}=_l({id:a,data:S,disabled:M.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...d}}),{active:N,activatorEvent:G,activeNodeRect:K,attributes:X,setNodeRef:Y,listeners:he,isDragging:O,over:gt,setActivatorNodeRef:ue,transform:ze}=Ml({id:a,data:S,attributes:{...Zl,...n},disabled:M.draggable}),ht=cs(b,Y),z=!!N,ce=z&&!C&&Tt(m)&&Tt(T),Ae=!I&&O,Xe=Ae&&ce?ze:null,yt=ce?Xe??(u??E)({rects:y,activeNodeRect:K,activeIndex:m,overIndex:T,index:R}):null,ye=Tt(m)&&Tt(T)?l({id:a,items:f,activeIndex:m,overIndex:T}):R,de=N==null?void 0:N.id,F=v.useRef({activeId:de,items:f,newIndex:ye,containerId:p}),Oe=f!==F.current.items,se=e({active:N,containerId:p,isDragging:O,isSorting:z,id:a,index:R,items:f,newIndex:F.current.newIndex,previousItems:F.current.items,previousContainerId:F.current.containerId,transition:c,wasDragging:F.current.activeId!=null}),Pe=jl({disabled:!se,index:R,node:P,rect:A});return v.useEffect(()=>{z&&F.current.newIndex!==ye&&(F.current.newIndex=ye),p!==F.current.containerId&&(F.current.containerId=p),f!==F.current.items&&(F.current.items=f)},[z,ye,p,f]),v.useEffect(()=>{if(de===F.current.activeId)return;if(de&&!F.current.activeId){F.current.activeId=de;return}const De=setTimeout(()=>{F.current.activeId=de},50);return()=>clearTimeout(De)},[de]),{active:N,activeIndex:m,attributes:X,data:S,rect:A,index:R,newIndex:ye,items:f,isOver:w,isSorting:z,isDragging:O,listeners:he,node:P,overIndex:T,over:gt,setNodeRef:ht,setActivatorNodeRef:ue,setDroppableNodeRef:b,setDraggableNodeRef:Y,transform:Pe??yt,transition:fe()};function fe(){if(Pe||Oe&&F.current.newIndex===R)return Ql;if(!(Ae&&!qt(G)||!c)&&(z||se))return Me.Transition.toString({...c,property:tr})}}function ta(t,e){var n,o;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(o=t==null?void 0:t.droppable)!=null?o:e.droppable}}function bt(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const na=[k.Down,k.Right,k.Up,k.Left],oa=(t,e)=>{let{context:{active:n,collisionRect:o,droppableRects:s,droppableContainers:l,over:a,scrollableAncestors:u}}=e;if(na.includes(t.code)){if(t.preventDefault(),!n||!o)return;const d=[];l.getEnabled().forEach(p=>{if(!p||p!=null&&p.disabled)return;const m=s.get(p.id);if(m)switch(t.code){case k.Down:o.top<m.top&&d.push(p);break;case k.Up:o.top>m.top&&d.push(p);break;case k.Left:o.left>m.left&&d.push(p);break;case k.Right:o.left<m.left&&d.push(p);break}});const c=_s({collisionRect:o,droppableRects:s,droppableContainers:d});let f=Li(c,"id");if(f===(a==null?void 0:a.id)&&c.length>1&&(f=c[1].id),f!=null){const p=l.get(n.id),m=l.get(f),h=m?s.get(m.id):null,C=m==null?void 0:m.node.current;if(C&&h&&p&&m){const T=Bt(C).some((_,A)=>u[A]!==_),I=nr(p,m),E=ia(p,m),M=T||!I?{x:0,y:0}:{x:E?o.width-h.width:0,y:E?o.height-h.height:0},R={x:h.left,y:h.top};return M.x&&M.y?R:at(R,M)}}}};function nr(t,e){return!bt(t)||!bt(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function ia(t,e){return!bt(t)||!bt(e)||!nr(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const ra=t=>{let{transform:e}=t;return{...e,x:0}},sa=[{name:"Link",label:"Website"},{name:"Youtube",label:"YouTube"},{name:"Instagram",label:"Instagram"},{name:"Twitter",label:"Twitter/X"},{name:"Facebook",label:"Facebook"},{name:"Linkedin",label:"LinkedIn"},{name:"Github",label:"GitHub"},{name:"Mail",label:"Email"},{name:"MessageCircle",label:"Chat"},{name:"Phone",label:"Phone"},{name:"MapPin",label:"Location"},{name:"Calendar",label:"Calendar"},{name:"Music",label:"Music"},{name:"Camera",label:"Photography"},{name:"ShoppingBag",label:"Shop"},{name:"Heart",label:"Favorite"},{name:"Star",label:"Featured"},{name:"BookOpen",label:"Blog"},{name:"Video",label:"Video"},{name:"Headphones",label:"Podcast"},{name:"Briefcase",label:"Portfolio"},{name:"Globe",label:"Website"},{name:"Zap",label:"Featured"},{name:"Coffee",label:"Support"}],la=({selectedIcon:t,onIconSelect:e,onClose:n})=>{const[o,s]=v.useState(""),l=sa.filter(d=>d.label.toLowerCase().includes(o.toLowerCase())||d.name.toLowerCase().includes(o.toLowerCase())),a=d=>{e(d),n()},u=d=>{const c=Ai[d];return c?g.jsx(c,{size:20}):null};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[500px] overflow-hidden flex flex-col",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Choose an Icon"}),g.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:g.jsx(Yr,{size:20})})]}),g.jsx("div",{className:"mb-4",children:g.jsxs("div",{className:"relative",children:[g.jsx(Wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),g.jsx("input",{type:"text",placeholder:"Search icons...",value:o,onChange:d=>s(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),g.jsx("div",{className:"grid grid-cols-4 gap-2 overflow-y-auto flex-1",children:l.map(d=>g.jsxs("button",{onClick:()=>a(d.name),className:`flex flex-col items-center p-3 rounded-lg border-2 transition-all hover:bg-gray-50 ${t===d.name?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,title:d.label,children:[g.jsx("div",{className:"text-gray-700 mb-1",children:u(d.name)}),g.jsx("span",{className:"text-xs text-gray-500 text-center leading-tight",children:d.label})]},d.name))}),g.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:g.jsx("button",{onClick:()=>a(""),className:"w-full py-2 px-4 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors text-sm",children:"Remove Icon"})})]})})},_n=v.forwardRef(({link:t,isEditing:e,themeStyles:n,onEdit:o,onSave:s,onCancel:l,onDelete:a,onToggleActive:u,style:d,handleAttributes:c,handleListeners:f,showHandle:p=!0},m)=>{const[h,C]=v.useState(t.title),[y,T]=v.useState(t.url),[I,E]=v.useState(t.icon||""),[M,R]=v.useState(!1);v.useEffect(()=>{e&&(C(t.title),T(t.url),E(t.icon||""))},[e,t.title,t.url,t.icon]);const S=()=>{s(t.id,h,y,I)},_=A=>{if(!A)return g.jsx(Bn,{size:20});const P=Ai[A];return P?g.jsx(P,{size:20}):g.jsx(Bn,{size:20})};return g.jsxs("div",{ref:m,style:d,...c,className:`bg-gray-900 rounded-lg transition-all hover:bg-gray-800/50 ${e?"border border-blue-500":""}`,children:[g.jsxs("div",{className:`flex items-center gap-4 ${e?"p-4":"p-3"}`,children:[g.jsx("button",{...f,className:`p-1 cursor-grab text-gray-500 hover:text-white transition-colors focus:outline-none ${!p||e?"hidden":""}`,"aria-label":"Drag to reorder",title:"Drag to reorder",children:g.jsx(us,{className:"w-5 h-5"})}),e?g.jsxs("div",{className:"w-full space-y-4",children:[g.jsx("input",{type:"text",value:h,onChange:A=>C(A.target.value),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md text-white",placeholder:"Link title","aria-label":"Link title"}),g.jsx("input",{type:"url",value:y,onChange:A=>T(A.target.value),className:"w-full px-3 py-2 bg-gray-900 border border-gray-700 rounded-md text-white",placeholder:"Link URL","aria-label":"Link URL"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"text-sm text-gray-300",children:"Icon"}),g.jsxs("button",{type:"button",onClick:()=>R(!0),className:"flex items-center gap-2 w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white hover:bg-gray-700 transition-colors",children:[g.jsx("div",{className:"text-gray-300",children:_(I)}),g.jsx("span",{className:"flex-1 text-left",children:I||"Choose icon..."}),g.jsx(Kr,{size:16,className:"text-gray-400"})]})]}),g.jsxs("div",{className:"flex justify-end gap-2",children:[g.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm font-medium text-gray-300 bg-gray-700 rounded-md hover:bg-gray-600",children:"Cancel"}),g.jsx("button",{onClick:S,className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${n.buttonClass}`,children:"Save"})]})]}):g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full transition-colors ${n.iconWrapperClass}`,children:_(t.icon||"")}),g.jsxs("div",{className:"flex-grow overflow-hidden",children:[g.jsx("p",{className:"font-semibold text-white truncate",children:t.title}),g.jsx("p",{className:"text-sm text-gray-400 truncate",children:t.url})]}),g.jsxs("div",{className:"flex-shrink-0 flex items-center gap-3 ml-auto",children:[g.jsx("label",{htmlFor:`toggle-${t.id}`,className:"flex items-center cursor-pointer",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"checkbox",id:`toggle-${t.id}`,className:"sr-only",checked:t.isActive,onChange:A=>u(A.target.checked),"aria-label":`Toggle ${t.title||"link"} active`,title:`Toggle ${t.title||"link"} active`}),g.jsx("div",{className:`block w-10 h-6 rounded-full transition ${t.isActive?"bg-blue-500":"bg-gray-700"}`}),g.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${t.isActive?"translate-x-4":"translate-x-0"}`})]})}),g.jsx("button",{onClick:()=>o(t.id),className:`p-1 text-gray-400 transition-colors ${n.accentHoverTextClass}`,"aria-label":"Edit link",title:"Edit link",children:g.jsx(rs,{className:"w-5 h-5"})}),g.jsx("button",{onClick:()=>a(t.id),className:"p-1 text-red-500/80 hover:text-red-500 transition-colors","aria-label":"Delete link",title:"Delete link",children:g.jsx(os,{className:"w-5 h-5"})})]})]})]}),M&&g.jsx(la,{selectedIcon:I,onIconSelect:E,onClose:()=>R(!1)})]})});_n.displayName="LinkItem";const aa=t=>{const{attributes:e,listeners:n,setNodeRef:o,transform:s,transition:l,isDragging:a}=ea({id:t.id}),u={transform:Me.Transform.toString(s),transition:l,opacity:a?.1:1,zIndex:a?50:"auto"};return g.jsx(_n,{ref:o,style:u,handleAttributes:e,handleListeners:n,...t})},ua=({userData:t,setUserData:e})=>{const[n,o]=v.useState(""),[s,l]=v.useState(""),[a,u]=v.useState(null),{themeSettings:d}=t,c=v.useMemo(()=>Ri(d),[d]),[f,p]=v.useState(null),m=v.useMemo(()=>t.links.map(S=>S.id),[t.links]),h=Es(Jn(Mn,{activationConstraint:{distance:8}}),Jn(In,{coordinateGetter:oa})),C=()=>{if(!n||!s)return;const S={id:`${Date.now()}`,title:n,url:s,isActive:!0,icon:"Link"};e(_=>({..._,links:[..._.links,S]})),o(""),l("")},y=v.useCallback((S,_,A)=>{e(P=>({...P,links:P.links.map(w=>w.id===S?{...w,[_]:A}:w)}))},[e]),T=v.useCallback(S=>{e(_=>({..._,links:_.links.filter(A=>A.id!==S)}))},[e]),I=(S,_,A,P)=>{y(S,"title",_),y(S,"url",A),P!==void 0&&y(S,"icon",P),u(null)},E=v.useCallback(S=>{p(String(S.active.id))},[]),M=v.useCallback(S=>{p(null)},[]),R=v.useCallback(S=>{const{active:_,over:A}=S;A&&_.id!==A.id&&e(P=>{const w=P.links.findIndex(N=>N.id===_.id),b=P.links.findIndex(N=>N.id===A.id);return w===-1||b===-1?P:{...P,links:Rn(P.links,w,b)}}),p(null)},[e]);return g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Link Title"}),g.jsx("input",{type:"text",placeholder:"e.g. My Website",value:n,onChange:S=>o(S.target.value),className:"w-full px-4 py-2.5 bg-gray-900 border border-gray-700 rounded-lg text-white focus:ring-blue-500 focus:border-blue-500 transition"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"URL"}),g.jsx("input",{type:"url",placeholder:"https://example.com",value:s,onChange:S=>l(S.target.value),className:"w-full px-4 py-2.5 bg-gray-900 border border-gray-700 rounded-lg text-white focus:ring-blue-500 focus:border-blue-500 transition"})]})]}),g.jsxs("button",{onClick:C,className:`w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-semibold rounded-lg transition-colors ${c.buttonClass}`,children:[g.jsx(is,{className:"w-5 h-5"})," Add Link"]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mt-8",children:"Your Links"}),g.jsxs(Sl,{sensors:h,collisionDetection:Rs,modifiers:[ra],onDragStart:E,onDragCancel:M,onDragEnd:R,children:[g.jsx(Kl,{items:m,strategy:Yl,children:g.jsx("div",{className:"space-y-4",children:t.links.map(S=>g.jsx(aa,{id:S.id,link:S,themeStyles:c,isEditing:a===S.id,onEdit:()=>u(S.id),onSave:I,onCancel:()=>u(null),onDelete:T,onToggleActive:_=>y(S.id,"isActive",_)},S.id))})}),g.jsx(Bl,{children:f?(()=>{const S=t.links.find(_=>_.id===f);return S?g.jsx(_n,{link:S,isEditing:!1,themeStyles:c,onEdit:()=>{},onSave:()=>{},onCancel:()=>{},onDelete:()=>{},onToggleActive:()=>{},showHandle:!1}):null})():null})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ca,da;function fa(){return{geminiUrl:ca,vertexUrl:da}}function pa(t,e,n,o){var s,l;if(!(t!=null&&t.baseUrl)){const a=fa();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:n:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _e{}function D(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function r(t,e,n){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[u])){const d=t[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];r(f,e.slice(l+1),n[c])}else for(const c of d)r(c,e.slice(l+1),n)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in t||(t[u]=[{}]);const d=t[u];r(d[0],e.slice(l+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else t[o]=n}function i(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const o=e[n];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in t){const l=t[s];return Array.isArray(l)?l.map(a=>i(a,e.slice(n+1))):void 0}else return}else t=t[o]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function un(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var io;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(io||(io={}));var ro;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ro||(ro={}));var Ee;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ee||(Ee={}));var so;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(so||(so={}));var lo;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(lo||(lo={}));var ao;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ao||(ao={}));var uo;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(uo||(uo={}));var co;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(co||(co={}));var fo;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fo||(fo={}));var po;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(po||(po={}));var mo;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(mo||(mo={}));var go;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(go||(go={}));var ho;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ho||(ho={}));var yo;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(yo||(yo={}));var vo;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(vo||(vo={}));var kt;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(kt||(kt={}));var Co;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Co||(Co={}));var cn;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cn||(cn={}));var To;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(To||(To={}));var xo;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(xo||(xo={}));var So;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(So||(So={}));var Io;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Io||(Io={}));var Eo;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Eo||(Eo={}));var Mo;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Mo||(Mo={}));var Ao;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Ao||(Ao={}));var Ro;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ro||(Ro={}));var _o;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(_o||(_o={}));var wo;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(wo||(wo={}));var Po;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Po||(Po={}));var Do;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Do||(Do={}));var No;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(No||(No={}));var bo;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(bo||(bo={}));var ko;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(ko||(ko={}));var Lo;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Lo||(Lo={}));var Fo;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Fo||(Fo={}));var Uo;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Uo||(Uo={}));var Vo;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Vo||(Vo={}));var Go;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Go||(Go={}));var qo;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(qo||(qo={}));var Bo;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Bo||(Bo={}));var Ho;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ho||(Ho={}));var $o;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})($o||($o={}));var Jo;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Jo||(Jo={}));var Yo;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Yo||(Yo={}));var Fe;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Fe||(Fe={}));class dn{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class tt{get text(){var e,n,o,s,l,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const m of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,C]of Object.entries(m))h!=="text"&&h!=="thought"&&(C!==null||C!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,n,o,s,l,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[m,h]of Object.entries(p))m!=="inlineData"&&(h!==null||h!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,o,s,l,a,u,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,o,s,l,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,o,s,l,a,u,d,c;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class Wo{}class Ko{}class ma{}class ga{}class ha{}class ya{}class zo{}class Xo{}class Oo{}class va{}class Qo{}class Zo{}class jo{}class ei{}class Ca{}class Ta{}class xa{}class ti{}class Sa{get text(){var e,n,o;let s="",l=!1;const a=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&a.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,s+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,n,o;let s="";const l=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,d]of Object.entries(a))u!=="inlineData"&&d!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Lt{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const o=new Lt;if(o.name=e.name,o.metadata=e.metadata,o.done=e.done,o.error=e.error,n){const s=e.response;if(s){const l=new Qo,a=s.videos;l.generatedVideos=a==null?void 0:a.map(u=>({video:{uri:u.gcsUri,videoBytes:u.bytesBase64Encoded?un(u.bytesBase64Encoded):void 0,mimeType:u.mimeType}})),l.raiMediaFilteredCount=s.raiMediaFilteredCount,l.raiMediaFilteredReasons=s.raiMediaFilteredReasons,o.response=l}}else{const s=e.response;if(s){const l=new Qo,a=s.generateVideoResponse,u=a==null?void 0:a.generatedSamples;l.generatedVideos=u==null?void 0:u.map(d=>{const c=d.video;return{video:{uri:c==null?void 0:c.uri,videoBytes:c!=null&&c.encodedVideo?un(c==null?void 0:c.encodedVideo):void 0,mimeType:d.encoding}}}),l.raiMediaFilteredCount=a==null?void 0:a.raiMediaFilteredCount,l.raiMediaFilteredReasons=a==null?void 0:a.raiMediaFilteredReasons,o.response=l}}return o}}class Ia{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function or(t,e){const n=L(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ir(t){return Array.isArray(t)?t.map(e=>Ft(e)):[Ft(t)]}function Ft(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function rr(t){const e=Ft(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function sr(t){const e=Ft(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ni(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function lr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ni(e)):[ni(t)]}function fn(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function oi(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ii(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function J(t){if(t==null)throw new Error("ContentUnion is required");return fn(t)?t:{role:"user",parts:lr(t)}}function ar(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=J(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=J(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>J(n)):[J(e)]}function oe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(oi(t)||ii(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[J(t)]}const e=[],n=[],o=fn(t[0]);for(const s of t){const l=fn(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(oi(s)||ii(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:lr(n)}),e}function Ea(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Ee).includes(n[0].toUpperCase())?n[0].toUpperCase():Ee.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Ee).includes(o.toUpperCase())?o.toUpperCase():Ee.TYPE_UNSPECIFIED})}}function Ve(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&Ea(t.type,e);for(const[a,u]of Object.entries(t))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Ee).includes(u.toUpperCase())?u.toUpperCase():Ee.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Ve(u);else if(o.includes(a)){const d=[];for(const c of u){if(c.type=="null"){e.nullable=!0;continue}d.push(Ve(c))}e[a]=d}else if(s.includes(a)){const d={};for(const[c,f]of Object.entries(u))d[c]=Ve(f);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=u}return e}function wn(t){return Ve(t)}function Pn(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Dn(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Je(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ve(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ve(e.response));return t}function Ye(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Ma(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function me(t,e){if(typeof e!="string")throw new Error("name must be a string");return Ma(t,e,"cachedContents")}function ur(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function we(t){return un(t)}function Aa(t){return t!=null&&typeof t=="object"&&"name"in t}function Ra(t){return t!=null&&typeof t=="object"&&"video"in t}function _a(t){return t!=null&&typeof t=="object"&&"uri"in t}function cr(t){var e;let n;if(Aa(t)&&(n=t.name),!(_a(t)&&(n=t.uri,n===void 0))&&!(Ra(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function dr(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function fr(t){for(const e of["models","tunedModels","publisherModels"])if(wa(t,e))return t[e];return[]}function wa(t,e){return t!==null&&typeof t=="object"&&e in t}function Pa(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Da(t,e={}){const n=[],o=new Set;for(const s of t){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=Pa(s,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function pr(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Na(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function We(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function mr(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ba(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function ka(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function La(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Fa(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],ba(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],ka(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],La(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function gr(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Fa(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Ua(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["enum"]);l!=null&&r(e,["enum"],l);const a=i(t,["example"]);a!=null&&r(e,["example"],a);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const p=i(t,["maxProperties"]);p!=null&&r(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&r(e,["maximum"],m);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const C=i(t,["minLength"]);C!=null&&r(e,["minLength"],C);const y=i(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const T=i(t,["minimum"]);T!=null&&r(e,["minimum"],T);const I=i(t,["nullable"]);I!=null&&r(e,["nullable"],I);const E=i(t,["pattern"]);E!=null&&r(e,["pattern"],E);const M=i(t,["properties"]);M!=null&&r(e,["properties"],M);const R=i(t,["propertyOrdering"]);R!=null&&r(e,["propertyOrdering"],R);const S=i(t,["required"]);S!=null&&r(e,["required"],S);const _=i(t,["title"]);_!=null&&r(e,["title"],_);const A=i(t,["type"]);return A!=null&&r(e,["type"],A),e}function Va(t){const e={};if(i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["category"]);n!=null&&r(e,["category"],n);const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function Ga(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function qa(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Ba(t){const e={},n=i(t,["timeRangeFilter"]);if(n!=null&&r(e,["timeRangeFilter"],qa(n)),i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ha(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function $a(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Ha(n)),e}function Ja(){return{}}function Ya(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Wa(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Ga(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],Ba(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],$a(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],Ja());const a=i(t,["computerUse"]);a!=null&&r(e,["computerUse"],Ya(a));const u=i(t,["codeExecution"]);return u!=null&&r(e,["codeExecution"],u),e}function Ka(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function za(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function Xa(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],za(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function Oa(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Ka(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],Xa(o)),e}function Qa(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function hr(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],Qa(n)),e}function Za(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],hr(o)),e}function ja(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Za(s))),r(e,["speakerVoiceConfigs"],o)}return e}function eu(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],hr(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],ja(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function tu(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function nu(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],gr(J(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const C=i(e,["frequencyPenalty"]);C!=null&&r(o,["frequencyPenalty"],C);const y=i(e,["seed"]);y!=null&&r(o,["seed"],y);const T=i(e,["responseMimeType"]);T!=null&&r(o,["responseMimeType"],T);const I=i(e,["responseSchema"]);I!=null&&r(o,["responseSchema"],Ua(wn(I)));const E=i(e,["responseJsonSchema"]);if(E!=null&&r(o,["responseJsonSchema"],E),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=i(e,["safetySettings"]);if(n!==void 0&&M!=null){let N=M;Array.isArray(N)&&(N=N.map(G=>Va(G))),r(n,["safetySettings"],N)}const R=i(e,["tools"]);if(n!==void 0&&R!=null){let N=Ye(R);Array.isArray(N)&&(N=N.map(G=>Wa(Je(G)))),r(n,["tools"],N)}const S=i(e,["toolConfig"]);if(n!==void 0&&S!=null&&r(n,["toolConfig"],Oa(S)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=i(e,["cachedContent"]);n!==void 0&&_!=null&&r(n,["cachedContent"],me(t,_));const A=i(e,["responseModalities"]);A!=null&&r(o,["responseModalities"],A);const P=i(e,["mediaResolution"]);P!=null&&r(o,["mediaResolution"],P);const w=i(e,["speechConfig"]);if(w!=null&&r(o,["speechConfig"],eu(Pn(w))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=i(e,["thinkingConfig"]);return b!=null&&r(o,["thinkingConfig"],tu(b)),o}function ou(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["request","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>gr(u))),r(n,["request","contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["request","generationConfig"],nu(t,l,n)),n}function iu(t,e){const n={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&r(n,["fileName"],o);const s=i(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>ou(t,a))),r(n,["requests","requests"],l)}return n}function ru(t,e){const n={},o=i(t,["displayName"]);if(e!==void 0&&o!=null&&r(e,["batch","displayName"],o),i(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ri(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["src"]);s!=null&&r(n,["batch","inputConfig"],iu(t,pr(t,s)));const l=i(e,["config"]);return l!=null&&r(n,["config"],ru(l,n)),n}function su(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function lu(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function au(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);if(e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),i(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function uu(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],au(n,e)),e}function cu(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function du(t){const e={},n=i(t,["format"]);n!=null&&r(e,["instancesFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsSource","uris"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigquerySource","inputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function fu(t){const e={},n=i(t,["format"]);n!=null&&r(e,["predictionsFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsDestination","outputUriPrefix"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigqueryDestination","outputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function pu(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["dest"]);return e!==void 0&&s!=null&&r(e,["outputConfig"],fu(Na(s))),n}function mu(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],L(t,o));const s=i(e,["src"]);s!=null&&r(n,["inputConfig"],du(pr(t,s)));const l=i(e,["config"]);return l!=null&&r(n,["config"],pu(l,n)),n}function gu(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function hu(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function yu(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),n}function vu(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],yu(n,e)),e}function Cu(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],We(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Tu(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function xu(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Su(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Iu(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Tu(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],xu(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Su(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Eu(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Iu(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Mu(t){const e={},n=i(t,["citationSources"]);return n!=null&&r(e,["citations"],n),e}function Au(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function Ru(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Au(s))),r(e,["urlMetadata"],o)}return e}function _u(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],Eu(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],Mu(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&r(e,["urlContextMetadata"],Ru(a));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const p=i(t,["safetyRatings"]);return p!=null&&r(e,["safetyRatings"],p),e}function wu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>_u(c))),r(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&r(e,["modelVersion"],s);const l=i(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const a=i(t,["responseId"]);a!=null&&r(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function yr(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["code"]);o!=null&&r(e,["code"],o);const s=i(t,["message"]);return s!=null&&r(e,["message"],s),e}function Pu(t){const e={},n=i(t,["response"]);n!=null&&r(e,["response"],wu(n));const o=i(t,["error"]);return o!=null&&r(e,["error"],yr(o)),e}function Du(t){const e={},n=i(t,["responsesFile"]);n!=null&&r(e,["fileName"],n);const o=i(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Pu(l))),r(e,["inlinedResponses"],s)}return e}function Mt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata","displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["metadata","state"]);s!=null&&r(e,["state"],mr(s));const l=i(t,["metadata","createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["metadata","endTime"]);a!=null&&r(e,["endTime"],a);const u=i(t,["metadata","updateTime"]);u!=null&&r(e,["updateTime"],u);const d=i(t,["metadata","model"]);d!=null&&r(e,["model"],d);const c=i(t,["metadata","output"]);return c!=null&&r(e,["dest"],Du(c)),e}function Nu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Mt(a))),r(e,["batchJobs"],l)}return e}function bu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);return l!=null&&r(e,["error"],yr(l)),e}function vr(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["code"]);o!=null&&r(e,["code"],o);const s=i(t,["message"]);return s!=null&&r(e,["message"],s),e}function ku(t){const e={},n=i(t,["instancesFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsSource","uris"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigquerySource","inputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function Lu(t){const e={},n=i(t,["predictionsFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsDestination","outputUriPrefix"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigqueryDestination","outputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function pn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["state"]);s!=null&&r(e,["state"],mr(s));const l=i(t,["error"]);l!=null&&r(e,["error"],vr(l));const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const u=i(t,["startTime"]);u!=null&&r(e,["startTime"],u);const d=i(t,["endTime"]);d!=null&&r(e,["endTime"],d);const c=i(t,["updateTime"]);c!=null&&r(e,["updateTime"],c);const f=i(t,["model"]);f!=null&&r(e,["model"],f);const p=i(t,["inputConfig"]);p!=null&&r(e,["src"],ku(p));const m=i(t,["outputConfig"]);return m!=null&&r(e,["dest"],Lu(m)),e}function Fu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>pn(a))),r(e,["batchJobs"],l)}return e}function Uu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);return l!=null&&r(e,["error"],vr(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Re;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Re||(Re={}));class mt{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vu extends _e{constructor(e){super(),this.apiClient=e,this.create=async n=>{var o,s;if(this.apiClient.isVertexAI()){const a=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${a}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let l="",a={};const u=ri(this.apiClient,n);l=D("{model}:batchGenerateContent",u._url),a=u._query;const f=u.batch.inputConfig.requests,p=f.requests,m=[];for(const C of p){const y=C;if(y.systemInstruction){const T=y.systemInstruction;delete y.systemInstruction;const I=y.request;I.systemInstruction=T,y.request=I}m.push(y)}return f.requests=m,delete u.config,delete u._url,delete u._query,this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=n.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(C=>C.json()).then(C=>Mt(C))}return await this.createInternal(n)},this.list=async(n={})=>new mt(Re.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}async createInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=mu(this.apiClient,e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>pn(f))}else{const c=ri(this.apiClient,e);return u=D("{model}:batchGenerateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Mt(f))}}async get(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=gu(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>pn(f))}else{const c=su(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Mt(f))}}async cancel(e){var n,o,s,l;let a="",u={};if(this.apiClient.isVertexAI()){const d=hu(this.apiClient,e);a=D("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=lu(this.apiClient,e);a=D("batches/{name}:cancel",d._url),u=d._query,delete d.config,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=vu(e);return u=D("batchPredictionJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Fu(f),m=new ti;return Object.assign(m,p),m})}else{const c=uu(e);return u=D("batches",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Nu(f),m=new ti;return Object.assign(m,p),m})}}async delete(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Cu(this.apiClient,e);return u=D("batchPredictionJobs/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Uu(f))}else{const c=cu(this.apiClient,e);return u=D("batches/{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>bu(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gu(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function qu(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Bu(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Hu(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Gu(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],qu(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Bu(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function si(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Hu(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function $u(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function Ju(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Yu(t){const e={},n=i(t,["timeRangeFilter"]);if(n!=null&&r(e,["timeRangeFilter"],Ju(n)),i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Wu(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Ku(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Wu(n)),e}function zu(){return{}}function Xu(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Ou(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>$u(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],Yu(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],Ku(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],zu());const a=i(t,["computerUse"]);a!=null&&r(e,["computerUse"],Xu(a));const u=i(t,["codeExecution"]);return u!=null&&r(e,["codeExecution"],u),e}function Qu(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function Zu(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function ju(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],Zu(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function ec(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Qu(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],ju(o)),e}function tc(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let f=oe(a);Array.isArray(f)&&(f=f.map(p=>si(p))),r(e,["contents"],f)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],si(J(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(p=>Ou(p))),r(e,["tools"],f)}const c=i(t,["toolConfig"]);if(e!==void 0&&c!=null&&r(e,["toolConfig"],ec(c)),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function nc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],or(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],tc(s,n)),n}function oc(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function ic(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function rc(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function sc(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],rc(s,n)),n}function lc(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function ac(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],lc(n,e)),e}function uc(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function cc(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function dc(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function fc(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],uc(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],cc(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],dc(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function li(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>fc(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function pc(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function mc(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function gc(t){const e={},n=i(t,["timeRangeFilter"]);n!=null&&r(e,["timeRangeFilter"],mc(n));const o=i(t,["excludeDomains"]);return o!=null&&r(e,["excludeDomains"],o),e}function hc(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function yc(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],hc(n)),e}function vc(t){const e={},n=i(t,["excludeDomains"]);return n!=null&&r(e,["excludeDomains"],n),e}function Cc(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function Tc(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],Cc(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const l=i(t,["httpBasicAuthConfig"]);l!=null&&r(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&r(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function xc(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],Tc(n)),e}function Sc(){return{}}function Ic(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Ec(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>pc(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],gc(s));const l=i(t,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],yc(l));const a=i(t,["enterpriseWebSearch"]);a!=null&&r(e,["enterpriseWebSearch"],vc(a));const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],xc(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],Sc());const c=i(t,["computerUse"]);c!=null&&r(e,["computerUse"],Ic(c));const f=i(t,["codeExecution"]);return f!=null&&r(e,["codeExecution"],f),e}function Mc(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function Ac(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function Rc(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],Ac(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function _c(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],Mc(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],Rc(o)),e}function wc(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let p=oe(a);Array.isArray(p)&&(p=p.map(m=>li(m))),r(e,["contents"],p)}const u=i(t,["systemInstruction"]);e!==void 0&&u!=null&&r(e,["systemInstruction"],li(J(u)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>Ec(m))),r(e,["tools"],p)}const c=i(t,["toolConfig"]);e!==void 0&&c!=null&&r(e,["toolConfig"],_c(c));const f=i(t,["kmsKeyName"]);return e!==void 0&&f!=null&&r(e,["encryption_spec","kmsKeyName"],f),n}function Pc(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],or(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],wc(s,n)),n}function Dc(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Nc(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function bc(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function kc(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],me(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],bc(s,n)),n}function Lc(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function Fc(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],Lc(n,e)),e}function At(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["model"]);s!=null&&r(e,["model"],s);const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["updateTime"]);a!=null&&r(e,["updateTime"],a);const u=i(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const d=i(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function Uc(){return{}}function Vc(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>At(a))),r(e,["cachedContents"],l)}return e}function Rt(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["model"]);s!=null&&r(e,["model"],s);const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["updateTime"]);a!=null&&r(e,["updateTime"],a);const u=i(t,["expireTime"]);u!=null&&r(e,["expireTime"],u);const d=i(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function Gc(){return{}}function qc(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Rt(a))),r(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bc extends _e{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mt(Re.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Pc(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Rt(f))}else{const c=nc(this.apiClient,e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>At(f))}}async get(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Dc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Rt(f))}else{const c=oc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>At(f))}}async delete(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Nc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Gc(),p=new jo;return Object.assign(p,f),p})}else{const c=ic(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Uc(),p=new jo;return Object.assign(p,f),p})}}async update(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=kc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>Rt(f))}else{const c=sc(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>At(f))}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Fc(e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=qc(f),m=new ei;return Object.assign(m,p),m})}else{const c=ac(e);return u=D("cachedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Vc(f),m=new ei;return Object.assign(m,p),m})}}}function ai(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(t){return this instanceof U?(this.v=t,this):new U(t)}function Ge(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(h){return function(C){return Promise.resolve(C).then(h,p)}}function u(h,C){o[h]&&(s[h]=function(y){return new Promise(function(T,I){l.push([h,y,T,I])>1||d(h,y)})},C&&(s[h]=C(s[h])))}function d(h,C){try{c(o[h](C))}catch(y){m(l[0][3],y)}}function c(h){h.value instanceof U?Promise.resolve(h.value.v).then(f,p):m(l[0][2],h)}function f(h){d("next",h)}function p(h){d("throw",h)}function m(h,C){h(C),l.shift(),l.length&&d(l[0][0],l[0][1])}}function st(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ai=="function"?ai(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(a){return new Promise(function(u,d){a=t[l](a),s(u,d,a.done,a.value)})}}function s(l,a,u,d){Promise.resolve(d).then(function(c){l({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hc(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Cr(n)}function Cr(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function $c(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ui(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let l=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),l&&!Cr(t[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class Jc{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Yc(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Yc{constructor(e,n,o,s={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),$c(l)}async sendMessage(e){var n;await this.sendPromise;const o=J(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,a,u;const d=await s,c=(a=(l=d.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const h=c?[c]:[];this.recordHistory(o,h,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=J(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?ui(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var o,s;return Ge(this,arguments,function*(){var a,u,d,c;const f=[];try{for(var p=!0,m=st(e),h;h=yield U(m.next()),a=h.done,!a;p=!0){c=h.value,p=!1;const C=c;if(Hc(C)){const y=(s=(o=C.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content;y!==void 0&&f.push(y)}yield yield U(C)}}catch(C){u={error:C}}finally{try{!p&&!a&&(d=m.return)&&(yield U(d.call(m)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(l=>l.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...ui(o)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jt extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Jt.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wc(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function Kc(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],Wc(n,e)),e}function zc(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["message"]);o!=null&&r(e,["message"],o);const s=i(t,["code"]);return s!=null&&r(e,["code"],s),e}function Xc(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["mimeType"]);s!=null&&r(e,["mimeType"],s);const l=i(t,["sizeBytes"]);l!=null&&r(e,["sizeBytes"],l);const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const u=i(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const f=i(t,["uri"]);f!=null&&r(e,["uri"],f);const p=i(t,["downloadUri"]);p!=null&&r(e,["downloadUri"],p);const m=i(t,["state"]);m!=null&&r(e,["state"],m);const h=i(t,["source"]);h!=null&&r(e,["source"],h);const C=i(t,["videoMetadata"]);C!=null&&r(e,["videoMetadata"],C);const y=i(t,["error"]);return y!=null&&r(e,["error"],zc(y)),e}function Oc(t){const e={},n=i(t,["file"]);n!=null&&r(e,["file"],Xc(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function Qc(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","file"],cr(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function Zc(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","file"],cr(n));const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function jc(t){const e={},n=i(t,["details"]);n!=null&&r(e,["details"],n);const o=i(t,["message"]);o!=null&&r(e,["message"],o);const s=i(t,["code"]);return s!=null&&r(e,["code"],s),e}function mn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["mimeType"]);s!=null&&r(e,["mimeType"],s);const l=i(t,["sizeBytes"]);l!=null&&r(e,["sizeBytes"],l);const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const u=i(t,["expirationTime"]);u!=null&&r(e,["expirationTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["sha256Hash"]);c!=null&&r(e,["sha256Hash"],c);const f=i(t,["uri"]);f!=null&&r(e,["uri"],f);const p=i(t,["downloadUri"]);p!=null&&r(e,["downloadUri"],p);const m=i(t,["state"]);m!=null&&r(e,["state"],m);const h=i(t,["source"]);h!=null&&r(e,["source"],h);const C=i(t,["videoMetadata"]);C!=null&&r(e,["videoMetadata"],C);const y=i(t,["error"]);return y!=null&&r(e,["error"],jc(y)),e}function ed(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>mn(a))),r(e,["files"],l)}return e}function td(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function nd(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class od extends _e{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new mt(Re.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>mn(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Kc(e);return l=D("files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=ed(d),f=new Ca;return Object.assign(f,c),f})}}async createInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Oc(e);return l=D("upload/v1beta/files",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=td(d),f=new Ta;return Object.assign(f,c),f})}}async get(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Qc(e);return l=D("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>mn(d))}}async delete(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Zc(e);return l=D("files/{file}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{const d=nd(),c=new xa;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function id(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Tr(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],id(n)),e}function rd(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],Tr(o)),e}function sd(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>rd(s))),r(e,["speakerVoiceConfigs"],o)}return e}function ld(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Tr(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],sd(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function ad(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function ud(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function cd(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function dd(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],ad(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],ud(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],cd(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function fd(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>dd(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function pd(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function md(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function gd(t){const e={},n=i(t,["timeRangeFilter"]);if(n!=null&&r(e,["timeRangeFilter"],md(n)),i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function hd(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function yd(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],hd(n)),e}function vd(){return{}}function Cd(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Td(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>pd(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],gd(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],yd(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],vd());const a=i(t,["computerUse"]);a!=null&&r(e,["computerUse"],Cd(a));const u=i(t,["codeExecution"]);return u!=null&&r(e,["codeExecution"],u),e}function xd(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ci(){return{}}function Sd(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const l=i(t,["prefixPaddingMs"]);l!=null&&r(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&r(e,["silenceDurationMs"],a),e}function Id(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],Sd(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function Ed(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Md(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],Ed(o)),e}function Ad(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function Rd(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],ld(Dn(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],fd(J(h)));const C=i(t,["tools"]);if(e!==void 0&&C!=null){let S=Ye(C);Array.isArray(S)&&(S=S.map(_=>Td(Je(_)))),r(e,["setup","tools"],S)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],xd(y));const T=i(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","inputAudioTranscription"],ci());const I=i(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&r(e,["setup","outputAudioTranscription"],ci());const E=i(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&r(e,["setup","realtimeInputConfig"],Id(E));const M=i(t,["contextWindowCompression"]);e!==void 0&&M!=null&&r(e,["setup","contextWindowCompression"],Md(M));const R=i(t,["proactivity"]);return e!==void 0&&R!=null&&r(e,["setup","proactivity"],Ad(R)),n}function _d(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Rd(s,n)),n}function wd(){return{}}function Pd(){return{}}function Dd(t){const e={},n=i(t,["media"]);n!=null&&r(e,["mediaChunks"],ir(n));const o=i(t,["audio"]);o!=null&&r(e,["audio"],sr(o));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const l=i(t,["video"]);l!=null&&r(e,["video"],rr(l));const a=i(t,["text"]);return a!=null&&r(e,["text"],a),i(t,["activityStart"])!=null&&r(e,["activityStart"],wd()),i(t,["activityEnd"])!=null&&r(e,["activityEnd"],Pd()),e}function xr(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["weight"]);return o!=null&&r(e,["weight"],o),e}function Nd(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>xr(s))),r(e,["weightedPrompts"],o)}return e}function Sr(t){const e={},n=i(t,["temperature"]);n!=null&&r(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&r(e,["topK"],o);const s=i(t,["seed"]);s!=null&&r(e,["seed"],s);const l=i(t,["guidance"]);l!=null&&r(e,["guidance"],l);const a=i(t,["bpm"]);a!=null&&r(e,["bpm"],a);const u=i(t,["density"]);u!=null&&r(e,["density"],u);const d=i(t,["brightness"]);d!=null&&r(e,["brightness"],d);const c=i(t,["scale"]);c!=null&&r(e,["scale"],c);const f=i(t,["muteBass"]);f!=null&&r(e,["muteBass"],f);const p=i(t,["muteDrums"]);p!=null&&r(e,["muteDrums"],p);const m=i(t,["onlyBassAndDrums"]);m!=null&&r(e,["onlyBassAndDrums"],m);const h=i(t,["musicGenerationMode"]);return h!=null&&r(e,["musicGenerationMode"],h),e}function bd(t){const e={},n=i(t,["musicGenerationConfig"]);return n!=null&&r(e,["musicGenerationConfig"],Sr(n)),e}function Ir(t){const e={},n=i(t,["model"]);return n!=null&&r(e,["model"],n),e}function Er(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>xr(s))),r(e,["weightedPrompts"],o)}return e}function gn(t){const e={},n=i(t,["setup"]);n!=null&&r(e,["setup"],Ir(n));const o=i(t,["clientContent"]);o!=null&&r(e,["clientContent"],Er(o));const s=i(t,["musicGenerationConfig"]);s!=null&&r(e,["musicGenerationConfig"],Sr(s));const l=i(t,["playbackControl"]);return l!=null&&r(e,["playbackControl"],l),e}function kd(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Ld(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],kd(n)),e}function Fd(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],Ld(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function Ud(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Vd(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Gd(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function qd(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Ud(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Vd(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Gd(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Bd(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>qd(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Hd(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function $d(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Jd(t){const e={},n=i(t,["timeRangeFilter"]);n!=null&&r(e,["timeRangeFilter"],$d(n));const o=i(t,["excludeDomains"]);return o!=null&&r(e,["excludeDomains"],o),e}function Yd(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Wd(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Yd(n)),e}function Kd(t){const e={},n=i(t,["excludeDomains"]);return n!=null&&r(e,["excludeDomains"],n),e}function zd(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function Xd(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],zd(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const l=i(t,["httpBasicAuthConfig"]);l!=null&&r(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&r(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function Od(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],Xd(n)),e}function Qd(){return{}}function Zd(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function jd(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Hd(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],Jd(s));const l=i(t,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],Wd(l));const a=i(t,["enterpriseWebSearch"]);a!=null&&r(e,["enterpriseWebSearch"],Kd(a));const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Od(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],Qd());const c=i(t,["computerUse"]);c!=null&&r(e,["computerUse"],Zd(c));const f=i(t,["codeExecution"]);return f!=null&&r(e,["codeExecution"],f),e}function ef(t){const e={},n=i(t,["handle"]);n!=null&&r(e,["handle"],n);const o=i(t,["transparent"]);return o!=null&&r(e,["transparent"],o),e}function di(){return{}}function tf(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const l=i(t,["prefixPaddingMs"]);l!=null&&r(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&r(e,["silenceDurationMs"],a),e}function nf(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],tf(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function of(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function rf(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],of(o)),e}function sf(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function lf(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],Fd(Dn(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],Bd(J(h)));const C=i(t,["tools"]);if(e!==void 0&&C!=null){let S=Ye(C);Array.isArray(S)&&(S=S.map(_=>jd(Je(_)))),r(e,["setup","tools"],S)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],ef(y));const T=i(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","inputAudioTranscription"],di());const I=i(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&r(e,["setup","outputAudioTranscription"],di());const E=i(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&r(e,["setup","realtimeInputConfig"],nf(E));const M=i(t,["contextWindowCompression"]);e!==void 0&&M!=null&&r(e,["setup","contextWindowCompression"],rf(M));const R=i(t,["proactivity"]);return e!==void 0&&R!=null&&r(e,["setup","proactivity"],sf(R)),n}function af(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],lf(s,n)),n}function uf(){return{}}function cf(){return{}}function df(t){const e={},n=i(t,["media"]);n!=null&&r(e,["mediaChunks"],ir(n));const o=i(t,["audio"]);o!=null&&r(e,["audio"],sr(o));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const l=i(t,["video"]);l!=null&&r(e,["video"],rr(l));const a=i(t,["text"]);return a!=null&&r(e,["text"],a),i(t,["activityStart"])!=null&&r(e,["activityStart"],uf()),i(t,["activityEnd"])!=null&&r(e,["activityEnd"],cf()),e}function ff(){return{}}function pf(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function mf(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function gf(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function hf(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],pf(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],mf(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],gf(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function yf(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>hf(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function fi(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["finished"]);return o!=null&&r(e,["finished"],o),e}function vf(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function Cf(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>vf(s))),r(e,["urlMetadata"],o)}return e}function Tf(t){const e={},n=i(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],yf(n));const o=i(t,["turnComplete"]);o!=null&&r(e,["turnComplete"],o);const s=i(t,["interrupted"]);s!=null&&r(e,["interrupted"],s);const l=i(t,["groundingMetadata"]);l!=null&&r(e,["groundingMetadata"],l);const a=i(t,["generationComplete"]);a!=null&&r(e,["generationComplete"],a);const u=i(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],fi(u));const d=i(t,["outputTranscription"]);d!=null&&r(e,["outputTranscription"],fi(d));const c=i(t,["urlContextMetadata"]);return c!=null&&r(e,["urlContextMetadata"],Cf(c)),e}function xf(t){const e={},n=i(t,["id"]);n!=null&&r(e,["id"],n);const o=i(t,["args"]);o!=null&&r(e,["args"],o);const s=i(t,["name"]);return s!=null&&r(e,["name"],s),e}function Sf(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>xf(s))),r(e,["functionCalls"],o)}return e}function If(t){const e={},n=i(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function St(t){const e={},n=i(t,["modality"]);n!=null&&r(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&r(e,["tokenCount"],o),e}function Ef(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&r(e,["cachedContentTokenCount"],o);const s=i(t,["responseTokenCount"]);s!=null&&r(e,["responseTokenCount"],s);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&r(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&r(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(h=>St(h))),r(e,["promptTokensDetails"],m)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(h=>St(h))),r(e,["cacheTokensDetails"],m)}const f=i(t,["responseTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>St(h))),r(e,["responseTokensDetails"],m)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>St(h))),r(e,["toolUsePromptTokensDetails"],m)}return e}function Mf(t){const e={},n=i(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function Af(t){const e={},n=i(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&r(e,["resumable"],o);const s=i(t,["lastConsumedClientMessageIndex"]);return s!=null&&r(e,["lastConsumedClientMessageIndex"],s),e}function Rf(t){const e={};i(t,["setupComplete"])!=null&&r(e,["setupComplete"],ff());const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],Tf(o));const s=i(t,["toolCall"]);s!=null&&r(e,["toolCall"],Sf(s));const l=i(t,["toolCallCancellation"]);l!=null&&r(e,["toolCallCancellation"],If(l));const a=i(t,["usageMetadata"]);a!=null&&r(e,["usageMetadata"],Ef(a));const u=i(t,["goAway"]);u!=null&&r(e,["goAway"],Mf(u));const d=i(t,["sessionResumptionUpdate"]);return d!=null&&r(e,["sessionResumptionUpdate"],Af(d)),e}function _f(){return{}}function wf(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["weight"]);return o!=null&&r(e,["weight"],o),e}function Pf(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>wf(s))),r(e,["weightedPrompts"],o)}return e}function Df(t){const e={},n=i(t,["temperature"]);n!=null&&r(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&r(e,["topK"],o);const s=i(t,["seed"]);s!=null&&r(e,["seed"],s);const l=i(t,["guidance"]);l!=null&&r(e,["guidance"],l);const a=i(t,["bpm"]);a!=null&&r(e,["bpm"],a);const u=i(t,["density"]);u!=null&&r(e,["density"],u);const d=i(t,["brightness"]);d!=null&&r(e,["brightness"],d);const c=i(t,["scale"]);c!=null&&r(e,["scale"],c);const f=i(t,["muteBass"]);f!=null&&r(e,["muteBass"],f);const p=i(t,["muteDrums"]);p!=null&&r(e,["muteDrums"],p);const m=i(t,["onlyBassAndDrums"]);m!=null&&r(e,["onlyBassAndDrums"],m);const h=i(t,["musicGenerationMode"]);return h!=null&&r(e,["musicGenerationMode"],h),e}function Nf(t){const e={},n=i(t,["clientContent"]);n!=null&&r(e,["clientContent"],Pf(n));const o=i(t,["musicGenerationConfig"]);return o!=null&&r(e,["musicGenerationConfig"],Df(o)),e}function bf(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);o!=null&&r(e,["mimeType"],o);const s=i(t,["sourceMetadata"]);return s!=null&&r(e,["sourceMetadata"],Nf(s)),e}function kf(t){const e={},n=i(t,["audioChunks"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>bf(s))),r(e,["audioChunks"],o)}return e}function Lf(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["filteredReason"]);return o!=null&&r(e,["filteredReason"],o),e}function Ff(t){const e={};i(t,["setupComplete"])!=null&&r(e,["setupComplete"],_f());const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],kf(o));const s=i(t,["filteredPrompt"]);return s!=null&&r(e,["filteredPrompt"],Lf(s)),e}function Uf(t){const e={},n=i(t,["sessionId"]);return n!=null&&r(e,["sessionId"],n),e}function Vf(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Gf(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function qf(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Bf(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Vf(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Gf(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],qf(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Hf(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Bf(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function pi(t){const e={},n=i(t,["text"]);n!=null&&r(e,["text"],n);const o=i(t,["finished"]);return o!=null&&r(e,["finished"],o),e}function $f(t){const e={},n=i(t,["modelTurn"]);n!=null&&r(e,["modelTurn"],Hf(n));const o=i(t,["turnComplete"]);o!=null&&r(e,["turnComplete"],o);const s=i(t,["interrupted"]);s!=null&&r(e,["interrupted"],s);const l=i(t,["groundingMetadata"]);l!=null&&r(e,["groundingMetadata"],l);const a=i(t,["generationComplete"]);a!=null&&r(e,["generationComplete"],a);const u=i(t,["inputTranscription"]);u!=null&&r(e,["inputTranscription"],pi(u));const d=i(t,["outputTranscription"]);return d!=null&&r(e,["outputTranscription"],pi(d)),e}function Jf(t){const e={},n=i(t,["args"]);n!=null&&r(e,["args"],n);const o=i(t,["name"]);return o!=null&&r(e,["name"],o),e}function Yf(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Jf(s))),r(e,["functionCalls"],o)}return e}function Wf(t){const e={},n=i(t,["ids"]);return n!=null&&r(e,["ids"],n),e}function It(t){const e={},n=i(t,["modality"]);n!=null&&r(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&r(e,["tokenCount"],o),e}function Kf(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&r(e,["cachedContentTokenCount"],o);const s=i(t,["candidatesTokenCount"]);s!=null&&r(e,["responseTokenCount"],s);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&r(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&r(e,["thoughtsTokenCount"],a);const u=i(t,["totalTokenCount"]);u!=null&&r(e,["totalTokenCount"],u);const d=i(t,["promptTokensDetails"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(C=>It(C))),r(e,["promptTokensDetails"],h)}const c=i(t,["cacheTokensDetails"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(C=>It(C))),r(e,["cacheTokensDetails"],h)}const f=i(t,["candidatesTokensDetails"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(C=>It(C))),r(e,["responseTokensDetails"],h)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(C=>It(C))),r(e,["toolUsePromptTokensDetails"],h)}const m=i(t,["trafficType"]);return m!=null&&r(e,["trafficType"],m),e}function zf(t){const e={},n=i(t,["timeLeft"]);return n!=null&&r(e,["timeLeft"],n),e}function Xf(t){const e={},n=i(t,["newHandle"]);n!=null&&r(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&r(e,["resumable"],o);const s=i(t,["lastConsumedClientMessageIndex"]);return s!=null&&r(e,["lastConsumedClientMessageIndex"],s),e}function Of(t){const e={},n=i(t,["setupComplete"]);n!=null&&r(e,["setupComplete"],Uf(n));const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],$f(o));const s=i(t,["toolCall"]);s!=null&&r(e,["toolCall"],Yf(s));const l=i(t,["toolCallCancellation"]);l!=null&&r(e,["toolCallCancellation"],Wf(l));const a=i(t,["usageMetadata"]);a!=null&&r(e,["usageMetadata"],Kf(a));const u=i(t,["goAway"]);u!=null&&r(e,["goAway"],zf(u));const d=i(t,["sessionResumptionUpdate"]);return d!=null&&r(e,["sessionResumptionUpdate"],Xf(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qf(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Zf(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function jf(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function ep(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Qf(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Zf(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],jf(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Yt(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>ep(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function tp(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["enum"]);l!=null&&r(e,["enum"],l);const a=i(t,["example"]);a!=null&&r(e,["example"],a);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const p=i(t,["maxProperties"]);p!=null&&r(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&r(e,["maximum"],m);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const C=i(t,["minLength"]);C!=null&&r(e,["minLength"],C);const y=i(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const T=i(t,["minimum"]);T!=null&&r(e,["minimum"],T);const I=i(t,["nullable"]);I!=null&&r(e,["nullable"],I);const E=i(t,["pattern"]);E!=null&&r(e,["pattern"],E);const M=i(t,["properties"]);M!=null&&r(e,["properties"],M);const R=i(t,["propertyOrdering"]);R!=null&&r(e,["propertyOrdering"],R);const S=i(t,["required"]);S!=null&&r(e,["required"],S);const _=i(t,["title"]);_!=null&&r(e,["title"],_);const A=i(t,["type"]);return A!=null&&r(e,["type"],A),e}function np(t){const e={};if(i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["category"]);n!=null&&r(e,["category"],n);const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function op(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function ip(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function rp(t){const e={},n=i(t,["timeRangeFilter"]);if(n!=null&&r(e,["timeRangeFilter"],ip(n)),i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function sp(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function lp(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],sp(n)),e}function ap(){return{}}function up(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function cp(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>op(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],rp(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],lp(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],ap());const a=i(t,["computerUse"]);a!=null&&r(e,["computerUse"],up(a));const u=i(t,["codeExecution"]);return u!=null&&r(e,["codeExecution"],u),e}function dp(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function fp(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function pp(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],fp(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function mp(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],dp(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],pp(o)),e}function gp(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Mr(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],gp(n)),e}function hp(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],Mr(o)),e}function yp(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>hp(s))),r(e,["speakerVoiceConfigs"],o)}return e}function vp(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Mr(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],yp(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function Cp(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function Tp(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],Yt(J(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const C=i(e,["frequencyPenalty"]);C!=null&&r(o,["frequencyPenalty"],C);const y=i(e,["seed"]);y!=null&&r(o,["seed"],y);const T=i(e,["responseMimeType"]);T!=null&&r(o,["responseMimeType"],T);const I=i(e,["responseSchema"]);I!=null&&r(o,["responseSchema"],tp(wn(I)));const E=i(e,["responseJsonSchema"]);if(E!=null&&r(o,["responseJsonSchema"],E),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=i(e,["safetySettings"]);if(n!==void 0&&M!=null){let N=M;Array.isArray(N)&&(N=N.map(G=>np(G))),r(n,["safetySettings"],N)}const R=i(e,["tools"]);if(n!==void 0&&R!=null){let N=Ye(R);Array.isArray(N)&&(N=N.map(G=>cp(Je(G)))),r(n,["tools"],N)}const S=i(e,["toolConfig"]);if(n!==void 0&&S!=null&&r(n,["toolConfig"],mp(S)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=i(e,["cachedContent"]);n!==void 0&&_!=null&&r(n,["cachedContent"],me(t,_));const A=i(e,["responseModalities"]);A!=null&&r(o,["responseModalities"],A);const P=i(e,["mediaResolution"]);P!=null&&r(o,["mediaResolution"],P);const w=i(e,["speechConfig"]);if(w!=null&&r(o,["speechConfig"],vp(Pn(w))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=i(e,["thinkingConfig"]);return b!=null&&r(o,["thinkingConfig"],Cp(b)),o}function mi(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>Yt(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["generationConfig"],Tp(t,l,n)),n}function xp(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["requests[]","title"],s);const l=i(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&r(e,["requests[]","outputDimensionality"],l),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Sp(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);s!=null&&r(n,["requests[]","content"],ar(t,s));const l=i(e,["config"]);l!=null&&r(n,["config"],xp(l,n));const a=i(e,["model"]);return a!==void 0&&r(n,["requests[]","model"],L(t,a)),n}function Ip(t,e){const n={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["aspectRatio"]);e!==void 0&&s!=null&&r(e,["parameters","aspectRatio"],s);const l=i(t,["guidanceScale"]);if(e!==void 0&&l!=null&&r(e,["parameters","guidanceScale"],l),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&r(e,["parameters","safetySetting"],a);const u=i(t,["personGeneration"]);e!==void 0&&u!=null&&r(e,["parameters","personGeneration"],u);const d=i(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&r(e,["parameters","includeSafetyAttributes"],d);const c=i(t,["includeRaiReason"]);e!==void 0&&c!=null&&r(e,["parameters","includeRaiReason"],c);const f=i(t,["language"]);e!==void 0&&f!=null&&r(e,["parameters","language"],f);const p=i(t,["outputMimeType"]);e!==void 0&&p!=null&&r(e,["parameters","outputOptions","mimeType"],p);const m=i(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&r(e,["parameters","outputOptions","compressionQuality"],m),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const h=i(t,["imageSize"]);if(e!==void 0&&h!=null&&r(e,["parameters","sampleImageSize"],h),i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Ep(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&r(n,["config"],Ip(l,n)),n}function Mp(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Ap(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&r(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&r(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],dr(t,u)),o}function Rp(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],Ap(t,o,n)),n}function _p(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),n}function wp(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],_p(s,n)),n}function Pp(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Dp(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Np(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>Yt(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["config"],Dp(l)),n}function bp(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["imageBytes"]);n!=null&&r(e,["bytesBase64Encoded"],we(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function kp(t,e){const n={},o=i(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=i(t,["durationSeconds"]);if(e!==void 0&&s!=null&&r(e,["parameters","durationSeconds"],s),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(t,["aspectRatio"]);if(e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l),i(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=i(t,["personGeneration"]);if(e!==void 0&&a!=null&&r(e,["parameters","personGeneration"],a),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=i(t,["negativePrompt"]);e!==void 0&&u!=null&&r(e,["parameters","negativePrompt"],u);const d=i(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&r(e,["parameters","enhancePrompt"],d),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(i(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(i(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(i(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Lp(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["image"]);if(l!=null&&r(n,["instances[0]","image"],bp(l)),i(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=i(e,["config"]);return a!=null&&r(n,["config"],kp(a,n)),n}function Fp(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Up(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Vp(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Gp(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Fp(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Up(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Vp(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Ke(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Gp(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function qp(t){const e={},n=i(t,["anyOf"]);n!=null&&r(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&r(e,["default"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["enum"]);l!=null&&r(e,["enum"],l);const a=i(t,["example"]);a!=null&&r(e,["example"],a);const u=i(t,["format"]);u!=null&&r(e,["format"],u);const d=i(t,["items"]);d!=null&&r(e,["items"],d);const c=i(t,["maxItems"]);c!=null&&r(e,["maxItems"],c);const f=i(t,["maxLength"]);f!=null&&r(e,["maxLength"],f);const p=i(t,["maxProperties"]);p!=null&&r(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&r(e,["maximum"],m);const h=i(t,["minItems"]);h!=null&&r(e,["minItems"],h);const C=i(t,["minLength"]);C!=null&&r(e,["minLength"],C);const y=i(t,["minProperties"]);y!=null&&r(e,["minProperties"],y);const T=i(t,["minimum"]);T!=null&&r(e,["minimum"],T);const I=i(t,["nullable"]);I!=null&&r(e,["nullable"],I);const E=i(t,["pattern"]);E!=null&&r(e,["pattern"],E);const M=i(t,["properties"]);M!=null&&r(e,["properties"],M);const R=i(t,["propertyOrdering"]);R!=null&&r(e,["propertyOrdering"],R);const S=i(t,["required"]);S!=null&&r(e,["required"],S);const _=i(t,["title"]);_!=null&&r(e,["title"],_);const A=i(t,["type"]);return A!=null&&r(e,["type"],A),e}function Bp(t){const e={},n=i(t,["featureSelectionPreference"]);return n!=null&&r(e,["featureSelectionPreference"],n),e}function Hp(t){const e={},n=i(t,["method"]);n!=null&&r(e,["method"],n);const o=i(t,["category"]);o!=null&&r(e,["category"],o);const s=i(t,["threshold"]);return s!=null&&r(e,["threshold"],s),e}function $p(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const u=i(t,["responseJsonSchema"]);return u!=null&&r(e,["responseJsonSchema"],u),e}function Jp(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Yp(t){const e={},n=i(t,["timeRangeFilter"]);n!=null&&r(e,["timeRangeFilter"],Jp(n));const o=i(t,["excludeDomains"]);return o!=null&&r(e,["excludeDomains"],o),e}function Wp(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function Kp(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],Wp(n)),e}function zp(t){const e={},n=i(t,["excludeDomains"]);return n!=null&&r(e,["excludeDomains"],n),e}function Xp(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&r(e,["apiKeyString"],n),e}function Op(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&r(e,["apiKeyConfig"],Xp(n));const o=i(t,["authType"]);o!=null&&r(e,["authType"],o);const s=i(t,["googleServiceAccountConfig"]);s!=null&&r(e,["googleServiceAccountConfig"],s);const l=i(t,["httpBasicAuthConfig"]);l!=null&&r(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&r(e,["oauthConfig"],a);const u=i(t,["oidcConfig"]);return u!=null&&r(e,["oidcConfig"],u),e}function Qp(t){const e={},n=i(t,["authConfig"]);return n!=null&&r(e,["authConfig"],Op(n)),e}function Zp(){return{}}function jp(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Ar(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>$p(m))),r(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearch"]);s!=null&&r(e,["googleSearch"],Yp(s));const l=i(t,["googleSearchRetrieval"]);l!=null&&r(e,["googleSearchRetrieval"],Kp(l));const a=i(t,["enterpriseWebSearch"]);a!=null&&r(e,["enterpriseWebSearch"],zp(a));const u=i(t,["googleMaps"]);u!=null&&r(e,["googleMaps"],Qp(u)),i(t,["urlContext"])!=null&&r(e,["urlContext"],Zp());const c=i(t,["computerUse"]);c!=null&&r(e,["computerUse"],jp(c));const f=i(t,["codeExecution"]);return f!=null&&r(e,["codeExecution"],f),e}function em(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&r(e,["allowedFunctionNames"],o),e}function tm(t){const e={},n=i(t,["latitude"]);n!=null&&r(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&r(e,["longitude"],o),e}function nm(t){const e={},n=i(t,["latLng"]);n!=null&&r(e,["latLng"],tm(n));const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function om(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&r(e,["functionCallingConfig"],em(n));const o=i(t,["retrievalConfig"]);return o!=null&&r(e,["retrievalConfig"],nm(o)),e}function im(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function rm(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],im(n)),e}function sm(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&r(e,["voiceConfig"],rm(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&r(e,["languageCode"],o),e}function lm(t){const e={},n=i(t,["includeThoughts"]);n!=null&&r(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&r(e,["thinkingBudget"],o),e}function am(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],Ke(J(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const u=i(e,["topK"]);u!=null&&r(o,["topK"],u);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const c=i(e,["maxOutputTokens"]);c!=null&&r(o,["maxOutputTokens"],c);const f=i(e,["stopSequences"]);f!=null&&r(o,["stopSequences"],f);const p=i(e,["responseLogprobs"]);p!=null&&r(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&r(o,["logprobs"],m);const h=i(e,["presencePenalty"]);h!=null&&r(o,["presencePenalty"],h);const C=i(e,["frequencyPenalty"]);C!=null&&r(o,["frequencyPenalty"],C);const y=i(e,["seed"]);y!=null&&r(o,["seed"],y);const T=i(e,["responseMimeType"]);T!=null&&r(o,["responseMimeType"],T);const I=i(e,["responseSchema"]);I!=null&&r(o,["responseSchema"],qp(wn(I)));const E=i(e,["responseJsonSchema"]);E!=null&&r(o,["responseJsonSchema"],E);const M=i(e,["routingConfig"]);M!=null&&r(o,["routingConfig"],M);const R=i(e,["modelSelectionConfig"]);R!=null&&r(o,["modelConfig"],Bp(R));const S=i(e,["safetySettings"]);if(n!==void 0&&S!=null){let Y=S;Array.isArray(Y)&&(Y=Y.map(he=>Hp(he))),r(n,["safetySettings"],Y)}const _=i(e,["tools"]);if(n!==void 0&&_!=null){let Y=Ye(_);Array.isArray(Y)&&(Y=Y.map(he=>Ar(Je(he)))),r(n,["tools"],Y)}const A=i(e,["toolConfig"]);n!==void 0&&A!=null&&r(n,["toolConfig"],om(A));const P=i(e,["labels"]);n!==void 0&&P!=null&&r(n,["labels"],P);const w=i(e,["cachedContent"]);n!==void 0&&w!=null&&r(n,["cachedContent"],me(t,w));const b=i(e,["responseModalities"]);b!=null&&r(o,["responseModalities"],b);const N=i(e,["mediaResolution"]);N!=null&&r(o,["mediaResolution"],N);const G=i(e,["speechConfig"]);G!=null&&r(o,["speechConfig"],sm(Pn(G)));const K=i(e,["audioTimestamp"]);K!=null&&r(o,["audioTimestamp"],K);const X=i(e,["thinkingConfig"]);return X!=null&&r(o,["thinkingConfig"],lm(X)),o}function gi(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>Ke(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["generationConfig"],am(t,l,n)),n}function um(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["instances[]","task_type"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["instances[]","title"],s);const l=i(t,["outputDimensionality"]);e!==void 0&&l!=null&&r(e,["parameters","outputDimensionality"],l);const a=i(t,["mimeType"]);e!==void 0&&a!=null&&r(e,["instances[]","mimeType"],a);const u=i(t,["autoTruncate"]);return e!==void 0&&u!=null&&r(e,["parameters","autoTruncate"],u),n}function cm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);s!=null&&r(n,["instances[]","content"],ar(t,s));const l=i(e,["config"]);return l!=null&&r(n,["config"],um(l,n)),n}function dm(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&r(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&r(e,["parameters","includeRaiReason"],m);const h=i(t,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const C=i(t,["outputMimeType"]);e!==void 0&&C!=null&&r(e,["parameters","outputOptions","mimeType"],C);const y=i(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&r(e,["parameters","outputOptions","compressionQuality"],y);const T=i(t,["addWatermark"]);e!==void 0&&T!=null&&r(e,["parameters","addWatermark"],T);const I=i(t,["imageSize"]);e!==void 0&&I!=null&&r(e,["parameters","sampleImageSize"],I);const E=i(t,["enhancePrompt"]);return e!==void 0&&E!=null&&r(e,["parameters","enhancePrompt"],E),n}function fm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&r(n,["config"],dm(l,n)),n}function ge(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["imageBytes"]);o!=null&&r(e,["bytesBase64Encoded"],we(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function pm(t){const e={},n=i(t,["maskMode"]);n!=null&&r(e,["maskMode"],n);const o=i(t,["segmentationClasses"]);o!=null&&r(e,["maskClasses"],o);const s=i(t,["maskDilation"]);return s!=null&&r(e,["dilation"],s),e}function mm(t){const e={},n=i(t,["controlType"]);n!=null&&r(e,["controlType"],n);const o=i(t,["enableControlImageComputation"]);return o!=null&&r(e,["computeControl"],o),e}function gm(t){const e={},n=i(t,["styleDescription"]);return n!=null&&r(e,["styleDescription"],n),e}function hm(t){const e={},n=i(t,["subjectType"]);n!=null&&r(e,["subjectType"],n);const o=i(t,["subjectDescription"]);return o!=null&&r(e,["subjectDescription"],o),e}function ym(t){const e={},n=i(t,["referenceImage"]);n!=null&&r(e,["referenceImage"],ge(n));const o=i(t,["referenceId"]);o!=null&&r(e,["referenceId"],o);const s=i(t,["referenceType"]);s!=null&&r(e,["referenceType"],s);const l=i(t,["maskImageConfig"]);l!=null&&r(e,["maskImageConfig"],pm(l));const a=i(t,["controlImageConfig"]);a!=null&&r(e,["controlImageConfig"],mm(a));const u=i(t,["styleImageConfig"]);u!=null&&r(e,["styleImageConfig"],gm(u));const d=i(t,["subjectImageConfig"]);return d!=null&&r(e,["subjectImageConfig"],hm(d)),e}function vm(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const u=i(t,["guidanceScale"]);e!==void 0&&u!=null&&r(e,["parameters","guidanceScale"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&r(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&r(e,["parameters","includeRaiReason"],m);const h=i(t,["language"]);e!==void 0&&h!=null&&r(e,["parameters","language"],h);const C=i(t,["outputMimeType"]);e!==void 0&&C!=null&&r(e,["parameters","outputOptions","mimeType"],C);const y=i(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&r(e,["parameters","outputOptions","compressionQuality"],y);const T=i(t,["addWatermark"]);e!==void 0&&T!=null&&r(e,["parameters","addWatermark"],T);const I=i(t,["editMode"]);e!==void 0&&I!=null&&r(e,["parameters","editMode"],I);const E=i(t,["baseSteps"]);return e!==void 0&&E!=null&&r(e,["parameters","editConfig","baseSteps"],E),n}function Cm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>ym(d))),r(n,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&r(n,["config"],vm(a,n)),n}function Tm(t,e){const n={},o=i(t,["includeRaiReason"]);e!==void 0&&o!=null&&r(e,["parameters","includeRaiReason"],o);const s=i(t,["outputMimeType"]);e!==void 0&&s!=null&&r(e,["parameters","outputOptions","mimeType"],s);const l=i(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&r(e,["parameters","outputOptions","compressionQuality"],l);const a=i(t,["enhanceInputImage"]);e!==void 0&&a!=null&&r(e,["parameters","upscaleConfig","enhanceInputImage"],a);const u=i(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&r(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const d=i(t,["numberOfImages"]);e!==void 0&&d!=null&&r(e,["parameters","sampleCount"],d);const c=i(t,["mode"]);return e!==void 0&&c!=null&&r(e,["parameters","mode"],c),n}function xm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["image"]);s!=null&&r(n,["instances[0]","image"],ge(s));const l=i(e,["upscaleFactor"]);l!=null&&r(n,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&r(n,["config"],Tm(a,n)),n}function Sm(t){const e={},n=i(t,["productImage"]);return n!=null&&r(e,["image"],ge(n)),e}function Im(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["personImage"]);e!==void 0&&s!=null&&r(e,["instances[0]","personImage","image"],ge(s));const l=i(t,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>Sm(u))),r(e,["instances[0]","productImages"],a)}return n}function Em(t,e){const n={},o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["baseSteps"]);e!==void 0&&s!=null&&r(e,["parameters","editConfig","baseSteps"],s);const l=i(t,["outputGcsUri"]);e!==void 0&&l!=null&&r(e,["parameters","storageUri"],l);const a=i(t,["seed"]);e!==void 0&&a!=null&&r(e,["parameters","seed"],a);const u=i(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&r(e,["parameters","safetySetting"],u);const d=i(t,["personGeneration"]);e!==void 0&&d!=null&&r(e,["parameters","personGeneration"],d);const c=i(t,["outputMimeType"]);e!==void 0&&c!=null&&r(e,["parameters","outputOptions","mimeType"],c);const f=i(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&r(e,["parameters","outputOptions","compressionQuality"],f);const p=i(t,["enhancePrompt"]);return e!==void 0&&p!=null&&r(e,["parameters","enhancePrompt"],p),n}function Mm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["source"]);s!=null&&r(n,["config"],Im(s,n));const l=i(e,["config"]);return l!=null&&r(n,["config"],Em(l,n)),n}function Am(t){const e={},n=i(t,["image"]);return n!=null&&r(e,["image"],ge(n)),e}function Rm(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&r(e,["instances[0]","image"],ge(s));const l=i(t,["scribbleImage"]);return e!==void 0&&l!=null&&r(e,["instances[0]","scribble"],Am(l)),n}function _m(t,e){const n={},o=i(t,["mode"]);e!==void 0&&o!=null&&r(e,["parameters","mode"],o);const s=i(t,["maxPredictions"]);e!==void 0&&s!=null&&r(e,["parameters","maxPredictions"],s);const l=i(t,["confidenceThreshold"]);e!==void 0&&l!=null&&r(e,["parameters","confidenceThreshold"],l);const a=i(t,["maskDilation"]);e!==void 0&&a!=null&&r(e,["parameters","maskDilation"],a);const u=i(t,["binaryColorThreshold"]);return e!==void 0&&u!=null&&r(e,["parameters","binaryColorThreshold"],u),n}function wm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["source"]);s!=null&&r(n,["config"],Rm(s,n));const l=i(e,["config"]);return l!=null&&r(n,["config"],_m(l,n)),n}function Pm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Dm(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&r(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&r(n,["_query","filter"],a);const u=i(e,["queryBase"]);return n!==void 0&&u!=null&&r(n,["_url","models_url"],dr(t,u)),o}function Nm(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],Dm(t,o,n)),n}function bm(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),n}function km(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],bm(s,n)),n}function Lm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],s),n}function Fm(t,e){const n={},o=i(t,["systemInstruction"]);e!==void 0&&o!=null&&r(e,["systemInstruction"],Ke(J(o)));const s=i(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Ar(u))),r(e,["tools"],a)}const l=i(t,["generationConfig"]);return e!==void 0&&l!=null&&r(e,["generationConfig"],l),n}function Um(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>Ke(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["config"],Fm(l,n)),n}function Vm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["contents"]);if(s!=null){let a=oe(s);Array.isArray(a)&&(a=a.map(u=>Ke(u))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["config"],l),n}function Gm(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["videoBytes"]);o!=null&&r(e,["bytesBase64Encoded"],we(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function qm(t){const e={},n=i(t,["image"]);n!=null&&r(e,["image"],ge(n));const o=i(t,["referenceType"]);return o!=null&&r(e,["referenceType"],o),e}function Bm(t,e){const n={},o=i(t,["numberOfVideos"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["outputGcsUri"]);e!==void 0&&s!=null&&r(e,["parameters","storageUri"],s);const l=i(t,["fps"]);e!==void 0&&l!=null&&r(e,["parameters","fps"],l);const a=i(t,["durationSeconds"]);e!==void 0&&a!=null&&r(e,["parameters","durationSeconds"],a);const u=i(t,["seed"]);e!==void 0&&u!=null&&r(e,["parameters","seed"],u);const d=i(t,["aspectRatio"]);e!==void 0&&d!=null&&r(e,["parameters","aspectRatio"],d);const c=i(t,["resolution"]);e!==void 0&&c!=null&&r(e,["parameters","resolution"],c);const f=i(t,["personGeneration"]);e!==void 0&&f!=null&&r(e,["parameters","personGeneration"],f);const p=i(t,["pubsubTopic"]);e!==void 0&&p!=null&&r(e,["parameters","pubsubTopic"],p);const m=i(t,["negativePrompt"]);e!==void 0&&m!=null&&r(e,["parameters","negativePrompt"],m);const h=i(t,["enhancePrompt"]);e!==void 0&&h!=null&&r(e,["parameters","enhancePrompt"],h);const C=i(t,["generateAudio"]);e!==void 0&&C!=null&&r(e,["parameters","generateAudio"],C);const y=i(t,["lastFrame"]);e!==void 0&&y!=null&&r(e,["instances[0]","lastFrame"],ge(y));const T=i(t,["referenceImages"]);if(e!==void 0&&T!=null){let E=T;Array.isArray(E)&&(E=E.map(M=>qm(M))),r(e,["instances[0]","referenceImages"],E)}const I=i(t,["compressionQuality"]);return e!==void 0&&I!=null&&r(e,["parameters","compressionQuality"],I),n}function Hm(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],L(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["image"]);l!=null&&r(n,["instances[0]","image"],ge(l));const a=i(e,["video"]);a!=null&&r(n,["instances[0]","video"],Gm(a));const u=i(e,["config"]);return u!=null&&r(n,["config"],Bm(u,n)),n}function $m(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Jm(t){const e={},n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Ym(t){const e={},n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Wm(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],$m(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Jm(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Ym(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function Km(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Wm(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function zm(t){const e={},n=i(t,["citationSources"]);return n!=null&&r(e,["citations"],n),e}function Xm(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function Om(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Xm(s))),r(e,["urlMetadata"],o)}return e}function Qm(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],Km(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],zm(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&r(e,["urlContextMetadata"],Om(a));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const p=i(t,["safetyRatings"]);return p!=null&&r(e,["safetyRatings"],p),e}function hi(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>Qm(c))),r(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&r(e,["modelVersion"],s);const l=i(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const a=i(t,["responseId"]);a!=null&&r(e,["responseId"],a);const u=i(t,["usageMetadata"]);return u!=null&&r(e,["usageMetadata"],u),e}function Zm(t){const e={},n=i(t,["values"]);return n!=null&&r(e,["values"],n),e}function jm(){return{}}function eg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Zm(a))),r(e,["embeddings"],l)}return i(t,["metadata"])!=null&&r(e,["metadata"],jm()),e}function tg(t){const e={},n=i(t,["bytesBase64Encoded"]);n!=null&&r(e,["imageBytes"],we(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Rr(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function ng(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],tg(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);return s!=null&&r(e,["safetyAttributes"],Rr(s)),e}function og(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ng(a))),r(e,["generatedImages"],l)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],Rr(s)),e}function ig(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function hn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["version"]);l!=null&&r(e,["version"],l);const a=i(t,["_self"]);a!=null&&r(e,["tunedModelInfo"],ig(a));const u=i(t,["inputTokenLimit"]);u!=null&&r(e,["inputTokenLimit"],u);const d=i(t,["outputTokenLimit"]);d!=null&&r(e,["outputTokenLimit"],d);const c=i(t,["supportedGenerationMethods"]);return c!=null&&r(e,["supportedActions"],c),e}function rg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let l=fr(s);Array.isArray(l)&&(l=l.map(a=>hn(a))),r(e,["models"],l)}return e}function sg(){return{}}function lg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);o!=null&&r(e,["totalTokens"],o);const s=i(t,["cachedContentTokenCount"]);return s!=null&&r(e,["cachedContentTokenCount"],s),e}function ag(t){const e={},n=i(t,["video","uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["video","encodedVideo"]);o!=null&&r(e,["videoBytes"],we(o));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function ug(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],ag(n)),e}function cg(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>ug(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function dg(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&r(e,["response"],cg(a)),e}function fg(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function pg(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["data"]);o!=null&&r(e,["data"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function mg(t){const e={},n=i(t,["displayName"]);n!=null&&r(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&r(e,["fileUri"],o);const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function gg(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],fg(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],pg(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],mg(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function hg(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>gg(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function yg(t){const e={},n=i(t,["citations"]);return n!=null&&r(e,["citations"],n),e}function vg(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&r(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&r(e,["urlRetrievalStatus"],o),e}function Cg(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>vg(s))),r(e,["urlMetadata"],o)}return e}function Tg(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],hg(n));const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],yg(o));const s=i(t,["finishMessage"]);s!=null&&r(e,["finishMessage"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&r(e,["urlContextMetadata"],Cg(a));const u=i(t,["avgLogprobs"]);u!=null&&r(e,["avgLogprobs"],u);const d=i(t,["groundingMetadata"]);d!=null&&r(e,["groundingMetadata"],d);const c=i(t,["index"]);c!=null&&r(e,["index"],c);const f=i(t,["logprobsResult"]);f!=null&&r(e,["logprobsResult"],f);const p=i(t,["safetyRatings"]);return p!=null&&r(e,["safetyRatings"],p),e}function yi(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>Tg(f))),r(e,["candidates"],c)}const s=i(t,["createTime"]);s!=null&&r(e,["createTime"],s);const l=i(t,["modelVersion"]);l!=null&&r(e,["modelVersion"],l);const a=i(t,["promptFeedback"]);a!=null&&r(e,["promptFeedback"],a);const u=i(t,["responseId"]);u!=null&&r(e,["responseId"],u);const d=i(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function xg(t){const e={},n=i(t,["truncated"]);n!=null&&r(e,["truncated"],n);const o=i(t,["token_count"]);return o!=null&&r(e,["tokenCount"],o),e}function Sg(t){const e={},n=i(t,["values"]);n!=null&&r(e,["values"],n);const o=i(t,["statistics"]);return o!=null&&r(e,["statistics"],xg(o)),e}function Ig(t){const e={},n=i(t,["billableCharacterCount"]);return n!=null&&r(e,["billableCharacterCount"],n),e}function Eg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Sg(a))),r(e,["embeddings"],l)}const s=i(t,["metadata"]);return s!=null&&r(e,["metadata"],Ig(s)),e}function _r(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["imageBytes"],we(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function wr(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function Wt(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],_r(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);s!=null&&r(e,["safetyAttributes"],wr(s));const l=i(t,["prompt"]);return l!=null&&r(e,["enhancedPrompt"],l),e}function Mg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Wt(a))),r(e,["generatedImages"],l)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],wr(s)),e}function Ag(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Wt(l))),r(e,["generatedImages"],s)}return e}function Rg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Wt(l))),r(e,["generatedImages"],s)}return e}function _g(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Wt(s))),r(e,["generatedImages"],o)}return e}function wg(t){const e={},n=i(t,["label"]);n!=null&&r(e,["label"],n);const o=i(t,["score"]);return o!=null&&r(e,["score"],o),e}function Pg(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["mask"],_r(n));const o=i(t,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>wg(l))),r(e,["labels"],s)}return e}function Dg(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Pg(s))),r(e,["generatedMasks"],o)}return e}function Ng(t){const e={},n=i(t,["endpoint"]);n!=null&&r(e,["name"],n);const o=i(t,["deployedModelId"]);return o!=null&&r(e,["deployedModelId"],o),e}function bg(t){const e={},n=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function kg(t){const e={},n=i(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&r(e,["epoch"],o);const s=i(t,["step"]);return s!=null&&r(e,["step"],s),e}function yn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["versionId"]);l!=null&&r(e,["version"],l);const a=i(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>Ng(m))),r(e,["endpoints"],p)}const u=i(t,["labels"]);u!=null&&r(e,["labels"],u);const d=i(t,["_self"]);d!=null&&r(e,["tunedModelInfo"],bg(d));const c=i(t,["defaultCheckpointId"]);c!=null&&r(e,["defaultCheckpointId"],c);const f=i(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>kg(m))),r(e,["checkpoints"],p)}return e}function Lg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let l=fr(s);Array.isArray(l)&&(l=l.map(a=>yn(a))),r(e,["models"],l)}return e}function Fg(){return{}}function Ug(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);return o!=null&&r(e,["totalTokens"],o),e}function Vg(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["tokensInfo"]);return o!=null&&r(e,["tokensInfo"],o),e}function Gg(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["videoBytes"],we(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function qg(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],Gg(n)),e}function Bg(t){const e={},n=i(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>qg(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function Hg(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],Bg(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $g="Content-Type",Jg="X-Server-Timeout",Yg="User-Agent",vn="x-goog-api-client",Wg="1.15.0",Kg=`google-genai-sdk/${Wg}`,zg="v1beta1",Xg="v1beta",vi=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Og{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:zg,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Xg,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))s.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(n))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o){if(n&&n.timeout||o){const s=new AbortController,l=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=l}return n&&n.extraBody!==null&&Qg(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await Ci(s),new dn(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await Ci(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Ge(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:d}=yield U(s.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=l.decode(d,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),h=m.status,C=m.code,y=`got status: ${h}. ${JSON.stringify(p)}`;if(C>=400&&C<600)throw new Jt({message:y,status:C})}}catch(p){if(p.name==="ApiError")throw p}a+=c;let f=a.match(vi);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield U(new dn(m)),a=a.slice(f[0].length),f=a.match(vi)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=Kg+" "+this.clientOptions.userAgentExtra;return e[Yg]=n,e[vn]=n,e[$g]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[o,s]of Object.entries(e.headers))n.append(o,s);e.timeout&&e.timeout>0&&n.append(Jg,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);s.sizeBytes=String(a.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const d=await this.fetchUploadUrl(s,n);return l.upload(e,d,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var o;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:D("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:s});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=a==null?void 0:a.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Ci(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new Jt({message:s,status:n}):new Error(s)}}function Qg(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const u=Object.assign({},l);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const c=a[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=o(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const s=o(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zg="mcp_used/unknown";let jg=!1;function Pr(t){for(const e of t)if(eh(e)||typeof e=="object"&&"inputSchema"in e)return!0;return jg}function Dr(t){var e;const n=(e=t[vn])!==null&&e!==void 0?e:"";t[vn]=(n+` ${Zg}`).trimStart()}function eh(t){return t!==null&&typeof t=="object"&&t instanceof Nn}function th(t,e=100){return Ge(this,arguments,function*(){let o,s=0;for(;s<e;){const l=yield U(t.listTools({cursor:o}));for(const a of l.tools)yield yield U(a),s++;if(!l.nextCursor)break;o=l.nextCursor}})}class Nn{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Nn(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const l={},a=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,st(th(f))),c;c=await d.next(),e=c.done,!e;u=!0){s=c.value,u=!1;const p=s;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=f}}catch(p){n={error:p}}finally{try{!u&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Da(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await s.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function nh(t,e,n){const o=new Ia;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data);const l=Ff(s);Object.assign(o,l),e(o)}class oh{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=sh(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(M=>{c=M}),p=e.callbacks,m=function(){c({})},h=this.apiClient,C={onopen:m,onmessage:M=>{nh(h,p.onmessage,M)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(M){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(M){}},y=this.webSocketFactory.create(d,rh(a),C);y.connect(),await f;const T=L(this.apiClient,e.model),I=Ir({model:T}),E=gn({setup:I});return y.send(JSON.stringify(E)),new ih(y,this.apiClient)}}class ih{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Nd(e),o=Er(n);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=bd(e),o=gn(n);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const n=gn({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Fe.PLAY)}pause(){this.sendPlaybackControl(Fe.PAUSE)}stop(){this.sendPlaybackControl(Fe.STOP)}resetContext(){this.sendPlaybackControl(Fe.RESET_CONTEXT)}close(){this.conn.close()}}function rh(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function sh(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lh="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ah(t,e,n){const o=new Sa;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const l=JSON.parse(s);if(t.isVertexAI()){const a=Of(l);Object.assign(o,a)}else{const a=Rf(l);Object.assign(o,a)}e(o)}class uh{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new oh(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,l,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Pr(e.config.tools)&&Dr(p);const m=ph(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const w=this.apiClient.getApiKey();let b="BidiGenerateContent",N="key";w!=null&&w.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",N="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${b}?${N}=${w}`}let h=()=>{};const C=new Promise(w=>{h=w}),y=e.callbacks,T=function(){var w;(w=y==null?void 0:y.onopen)===null||w===void 0||w.call(y),h({})},I=this.apiClient,E={onopen:T,onmessage:w=>{ah(I,y.onmessage,w)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(w){},onclose:(o=y==null?void 0:y.onclose)!==null&&o!==void 0?o:function(w){}},M=this.webSocketFactory.create(f,fh(m),E);M.connect(),await C;let R=L(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const w=this.apiClient.getProject(),b=this.apiClient.getLocation();R=`projects/${w}/locations/${b}/`+R}let S={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[kt.AUDIO]}:e.config.responseModalities=[kt.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],A=[];for(const w of _)if(this.isCallableTool(w)){const b=w;A.push(await b.tool())}else A.push(w);A.length>0&&(e.config.tools=A);const P={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?S=af(this.apiClient,P):S=_d(this.apiClient,P),delete S.config,M.send(JSON.stringify(S)),new dh(M,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ch={turnComplete:!0};class dh{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=oe(n.turns),e.isVertexAI()?o=o.map(s=>Ke(s)):o=o.map(s=>Yt(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(lh)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},ch),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:df(e)}:n={realtimeInput:Dd(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function fh(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function ph(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ti=10;function xi(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(qe(a)){s=!0;break}if(!s)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function qe(t){return"callTool"in t&&typeof t.callTool=="function"}function mh(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>qe(s)))!==null&&o!==void 0?o:!1}function gh(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!qe(s)))!==null&&o!==void 0?o:!1}function Si(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hh extends _e{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,l,a,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!mh(n)||xi(n.config))return await this.generateContentInternal(d);if(gh(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,f;const p=oe(d.contents),m=(l=(s=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:Ti;let h=0;for(;h<m&&(c=await this.generateContentInternal(d),!(!c.functionCalls||c.functionCalls.length===0));){const C=c.candidates[0].content,y=[];for(const T of(u=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(qe(T)){const E=await T.callTool(c.functionCalls);y.push(...E)}h++,f={role:"user",parts:y},d.contents=oe(d.contents),d.contents.push(C),d.contents.push(f),Si(d.config)&&(p.push(C),p.push(f))}return Si(d.config)&&(c.automaticFunctionCallingHistory=p),c},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),xi(n.config)){const o=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let l;const a=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=d==null?void 0:d.safetyAttributes:a.push(d);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new mt(Re.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,s;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const a=await Promise.all(l.map(async d=>qe(d)?await d.tool():d)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&Pr(e.config.tools)){const d=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Dr(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var n,o,s;const l=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(qe(a)){const u=a,d=await u.tool();for(const c of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(l.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);l.set(c.name,u)}}return l}async processAfcStream(e){var n,o,s;const l=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Ti;let a=!1,u=0;const d=await this.initAfcToolsMap(e);return(function(c,f,p){var m,h;return Ge(this,arguments,function*(){for(var C,y,T,I;u<l;){a&&(u++,a=!1);const S=yield U(c.processParamsMaybeAddMcpUsage(p)),_=yield U(c.generateContentStreamInternal(S)),A=[],P=[];try{for(var E=!0,M=(y=void 0,st(_)),R;R=yield U(M.next()),C=R.done,!C;E=!0){I=R.value,E=!1;const w=I;if(yield yield U(w),w.candidates&&(!((m=w.candidates[0])===null||m===void 0)&&m.content)){P.push(w.candidates[0].content);for(const b of(h=w.candidates[0].content.parts)!==null&&h!==void 0?h:[])if(u<l&&b.functionCall){if(!b.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(b.functionCall.name)){const N=yield U(f.get(b.functionCall.name).callTool([b.functionCall]));A.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${b.functionCall.name}`)}}}}catch(w){y={error:w}}finally{try{!E&&!C&&(T=M.return)&&(yield U(T.call(M)))}finally{if(y)throw y.error}}if(A.length>0){a=!0;const w=new tt;w.candidates=[{content:{role:"user",parts:A}}],yield yield U(w);const b=[];b.push(...P),b.push({role:"user",parts:A});const N=oe(p.contents).concat(b);p.contents=N}else break}})})(this,d,e)}async generateContentInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=gi(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=yi(f),m=new tt;return Object.assign(m,p),m})}else{const c=mi(this.apiClient,e);return u=D("{model}:generateContent",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=hi(f),m=new tt;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=gi(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return Ge(this,arguments,function*(){var m,h,C,y;try{for(var T=!0,I=st(p),E;E=yield U(I.next()),m=E.done,!m;T=!0){y=E.value,T=!1;const M=y,R=yi(yield U(M.json()));R.sdkHttpResponse={headers:M.headers};const S=new tt;Object.assign(S,R),yield yield U(S)}}catch(M){h={error:M}}finally{try{!T&&!m&&(C=I.return)&&(yield U(C.call(I)))}finally{if(h)throw h.error}}})})}else{const c=mi(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return Ge(this,arguments,function*(){var m,h,C,y;try{for(var T=!0,I=st(p),E;E=yield U(I.next()),m=E.done,!m;T=!0){y=E.value,T=!1;const M=y,R=hi(yield U(M.json()));R.sdkHttpResponse={headers:M.headers};const S=new tt;Object.assign(S,R),yield yield U(S)}}catch(M){h={error:M}}finally{try{!T&&!m&&(C=I.return)&&(yield U(C.call(I)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=cm(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Eg(f),m=new Wo;return Object.assign(m,p),m})}else{const c=Sp(this.apiClient,e);return u=D("{model}:batchEmbedContents",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=eg(f),m=new Wo;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=fm(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Mg(f),m=new Ko;return Object.assign(m,p),m})}else{const c=Ep(this.apiClient,e);return u=D("{model}:predict",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=og(f),m=new Ko;return Object.assign(m,p),m})}}async editImageInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Cm(this.apiClient,e);return l=D("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Ag(d),f=new ma;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=xm(this.apiClient,e);return l=D("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Rg(d),f=new ga;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Mm(this.apiClient,e);return l=D("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=_g(d),f=new ha;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=wm(this.apiClient,e);return l=D("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const c=Dg(d),f=new ya;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Pm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>yn(f))}else{const c=Mp(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>hn(f))}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Nm(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Lg(f),m=new zo;return Object.assign(m,p),m})}else{const c=Rp(this.apiClient,e);return u=D("{models_url}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=rg(f),m=new zo;return Object.assign(m,p),m})}}async update(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=km(this.apiClient,e);return u=D("{model}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>yn(f))}else{const c=wp(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>hn(f))}}async delete(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Lm(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Fg(),p=new Xo;return Object.assign(p,f),p})}else{const c=Pp(this.apiClient,e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=sg(),p=new Xo;return Object.assign(p,f),p})}}async countTokens(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Um(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=Ug(f),m=new Oo;return Object.assign(m,p),m})}else{const c=Np(this.apiClient,e);return u=D("{model}:countTokens",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=lg(f),m=new Oo;return Object.assign(m,p),m})}}async computeTokens(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Vm(this.apiClient,e);return l=D("{model}:computeTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>{const c=Vg(d),f=new va;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=Hm(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Hg(f),m=new Lt;return Object.assign(m,p),m})}else{const c=Lp(this.apiClient,e);return u=D("{model}:predictLongRunning",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=dg(f),m=new Lt;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yh(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function vh(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function Ch(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["operationName"],n);const o=i(t,["resourceName"]);o!=null&&r(e,["_url","resourceName"],o);const s=i(t,["config"]);return s!=null&&r(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Th extends _e{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=vh(e);return u=D("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),a}else{const c=yh(e);return u=D("{operationName}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=Ch(e);return l=D("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xh(t){const e={},n=i(t,["voiceName"]);return n!=null&&r(e,["voiceName"],n),e}function Nr(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&r(e,["prebuiltVoiceConfig"],xh(n)),e}function Sh(t){const e={},n=i(t,["speaker"]);n!=null&&r(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&r(e,["voiceConfig"],Nr(o)),e}function Ih(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Sh(s))),r(e,["speakerVoiceConfigs"],o)}return e}function Eh(t){const e={},n=i(t,["voiceConfig"]);n!=null&&r(e,["voiceConfig"],Nr(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&r(e,["multiSpeakerVoiceConfig"],Ih(o));const s=i(t,["languageCode"]);return s!=null&&r(e,["languageCode"],s),e}function Mh(t){const e={},n=i(t,["fps"]);n!=null&&r(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&r(e,["endOffset"],o);const s=i(t,["startOffset"]);return s!=null&&r(e,["startOffset"],s),e}function Ah(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&r(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Rh(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function _h(t){const e={},n=i(t,["videoMetadata"]);n!=null&&r(e,["videoMetadata"],Mh(n));const o=i(t,["thought"]);o!=null&&r(e,["thought"],o);const s=i(t,["inlineData"]);s!=null&&r(e,["inlineData"],Ah(s));const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Rh(l));const a=i(t,["thoughtSignature"]);a!=null&&r(e,["thoughtSignature"],a);const u=i(t,["codeExecutionResult"]);u!=null&&r(e,["codeExecutionResult"],u);const d=i(t,["executableCode"]);d!=null&&r(e,["executableCode"],d);const c=i(t,["functionCall"]);c!=null&&r(e,["functionCall"],c);const f=i(t,["functionResponse"]);f!=null&&r(e,["functionResponse"],f);const p=i(t,["text"]);return p!=null&&r(e,["text"],p),e}function wh(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>_h(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Ph(t){const e={},n=i(t,["behavior"]);n!=null&&r(e,["behavior"],n);const o=i(t,["description"]);o!=null&&r(e,["description"],o);const s=i(t,["name"]);s!=null&&r(e,["name"],s);const l=i(t,["parameters"]);l!=null&&r(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&r(e,["parametersJsonSchema"],a);const u=i(t,["response"]);u!=null&&r(e,["response"],u);const d=i(t,["responseJsonSchema"]);return d!=null&&r(e,["responseJsonSchema"],d),e}function Dh(t){const e={},n=i(t,["startTime"]);n!=null&&r(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&r(e,["endTime"],o),e}function Nh(t){const e={},n=i(t,["timeRangeFilter"]);if(n!=null&&r(e,["timeRangeFilter"],Dh(n)),i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function bh(t){const e={},n=i(t,["mode"]);n!=null&&r(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&r(e,["dynamicThreshold"],o),e}function kh(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&r(e,["dynamicRetrievalConfig"],bh(n)),e}function Lh(){return{}}function Fh(t){const e={},n=i(t,["environment"]);return n!=null&&r(e,["environment"],n),e}function Uh(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(c=>Ph(c))),r(e,["functionDeclarations"],d)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&r(e,["googleSearch"],Nh(o));const s=i(t,["googleSearchRetrieval"]);if(s!=null&&r(e,["googleSearchRetrieval"],kh(s)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&r(e,["urlContext"],Lh());const a=i(t,["computerUse"]);a!=null&&r(e,["computerUse"],Fh(a));const u=i(t,["codeExecution"]);return u!=null&&r(e,["codeExecution"],u),e}function Vh(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ii(){return{}}function Gh(t){const e={},n=i(t,["disabled"]);n!=null&&r(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&r(e,["startOfSpeechSensitivity"],o);const s=i(t,["endOfSpeechSensitivity"]);s!=null&&r(e,["endOfSpeechSensitivity"],s);const l=i(t,["prefixPaddingMs"]);l!=null&&r(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&r(e,["silenceDurationMs"],a),e}function qh(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&r(e,["automaticActivityDetection"],Gh(n));const o=i(t,["activityHandling"]);o!=null&&r(e,["activityHandling"],o);const s=i(t,["turnCoverage"]);return s!=null&&r(e,["turnCoverage"],s),e}function Bh(t){const e={},n=i(t,["targetTokens"]);return n!=null&&r(e,["targetTokens"],n),e}function Hh(t){const e={},n=i(t,["triggerTokens"]);n!=null&&r(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&r(e,["slidingWindow"],Bh(o)),e}function $h(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&r(e,["proactiveAudio"],n),e}function Jh(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const u=i(t,["topK"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","topK"],u);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const c=i(t,["mediaResolution"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","mediaResolution"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","seed"],f);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","speechConfig"],Eh(Dn(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const h=i(t,["systemInstruction"]);e!==void 0&&h!=null&&r(e,["setup","systemInstruction"],wh(J(h)));const C=i(t,["tools"]);if(e!==void 0&&C!=null){let S=Ye(C);Array.isArray(S)&&(S=S.map(_=>Uh(Je(_)))),r(e,["setup","tools"],S)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&r(e,["setup","sessionResumption"],Vh(y));const T=i(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&r(e,["setup","inputAudioTranscription"],Ii());const I=i(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&r(e,["setup","outputAudioTranscription"],Ii());const E=i(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&r(e,["setup","realtimeInputConfig"],qh(E));const M=i(t,["contextWindowCompression"]);e!==void 0&&M!=null&&r(e,["setup","contextWindowCompression"],Hh(M));const R=i(t,["proactivity"]);return e!==void 0&&R!=null&&r(e,["setup","proactivity"],$h(R)),n}function Yh(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],L(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Jh(s,n)),n}function Wh(t,e,n){const o={},s=i(e,["expireTime"]);n!==void 0&&s!=null&&r(n,["expireTime"],s);const l=i(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&r(n,["newSessionExpireTime"],l);const a=i(e,["uses"]);n!==void 0&&a!=null&&r(n,["uses"],a);const u=i(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&r(n,["bidiGenerateContentSetup"],Yh(t,u));const d=i(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&r(n,["fieldMask"],d),o}function Kh(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],Wh(t,o,n)),n}function zh(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xh(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${n}.${l}`);e.push(...s)}else e.push(n)}return e.join(",")}function Oh(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const l=Xh(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(c=>a.includes(c)?`generationConfig.${c}`:c));const d=[];l&&d.push(l),u.length>0&&d.push(...u),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class Qh extends _e{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Kh(this.apiClient,e);l=D("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const d=Oh(u,e.config);return s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),s.then(c=>zh(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zh(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function jh(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),n}function ey(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],jh(n,e)),e}function ty(t){const e={},n=i(t,["textInput"]);n!=null&&r(e,["textInput"],n);const o=i(t,["output"]);return o!=null&&r(e,["output"],o),e}function ny(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=i(t,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ty(s))),r(e,["examples","examples"],o)}return e}function oy(t,e){const n={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=i(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&r(e,["displayName"],o),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=i(t,["epochCount"]);e!==void 0&&s!=null&&r(e,["tuningTask","hyperparameters","epochCount"],s);const l=i(t,["learningRateMultiplier"]);if(l!=null&&r(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=i(t,["batchSize"]);e!==void 0&&a!=null&&r(e,["tuningTask","hyperparameters","batchSize"],a);const u=i(t,["learningRate"]);return e!==void 0&&u!=null&&r(e,["tuningTask","hyperparameters","learningRate"],u),n}function iy(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["preTunedModel"]);o!=null&&r(e,["preTunedModel"],o);const s=i(t,["trainingDataset"]);s!=null&&r(e,["tuningTask","trainingData"],ny(s));const l=i(t,["config"]);return l!=null&&r(e,["config"],oy(l,e)),e}function ry(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&r(e,["config"],o),e}function sy(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),n}function ly(t){const e={},n=i(t,["config"]);return n!=null&&r(e,["config"],sy(n,e)),e}function ay(t,e){const n={},o=i(t,["gcsUri"]);e!==void 0&&o!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],o);const s=i(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],s),i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function uy(t,e){const n={},o=i(t,["gcsUri"]);o!=null&&r(n,["validationDatasetUri"],o);const s=i(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}function cy(t,e){const n={},o=i(t,["validationDataset"]);e!==void 0&&o!=null&&r(e,["supervisedTuningSpec"],uy(o,n));const s=i(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&r(e,["tunedModelDisplayName"],s);const l=i(t,["description"]);e!==void 0&&l!=null&&r(e,["description"],l);const a=i(t,["epochCount"]);e!==void 0&&a!=null&&r(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const u=i(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&r(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const d=i(t,["exportLastCheckpointOnly"]);e!==void 0&&d!=null&&r(e,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const c=i(t,["preTunedModelCheckpointId"]);c!=null&&r(n,["preTunedModel","checkpointId"],c);const f=i(t,["adapterSize"]);if(e!==void 0&&f!=null&&r(e,["supervisedTuningSpec","hyperParameters","adapterSize"],f),i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function dy(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["preTunedModel"]);o!=null&&r(e,["preTunedModel"],o);const s=i(t,["trainingDataset"]);s!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],ay(s,e));const l=i(t,["config"]);return l!=null&&r(e,["config"],cy(l,e)),e}function fy(t){const e={},n=i(t,["name"]);n!=null&&r(e,["model"],n);const o=i(t,["name"]);return o!=null&&r(e,["endpoint"],o),e}function br(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["state"]);s!=null&&r(e,["state"],ur(s));const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["tuningTask","startTime"]);a!=null&&r(e,["startTime"],a);const u=i(t,["tuningTask","completeTime"]);u!=null&&r(e,["endTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["description"]);c!=null&&r(e,["description"],c);const f=i(t,["baseModel"]);f!=null&&r(e,["baseModel"],f);const p=i(t,["_self"]);p!=null&&r(e,["tunedModel"],fy(p));const m=i(t,["customBaseModel"]);m!=null&&r(e,["customBaseModel"],m);const h=i(t,["experiment"]);h!=null&&r(e,["experiment"],h);const C=i(t,["labels"]);C!=null&&r(e,["labels"],C);const y=i(t,["outputUri"]);y!=null&&r(e,["outputUri"],y);const T=i(t,["pipelineJob"]);T!=null&&r(e,["pipelineJob"],T);const I=i(t,["serviceAccount"]);I!=null&&r(e,["serviceAccount"],I);const E=i(t,["tunedModelDisplayName"]);return E!=null&&r(e,["tunedModelDisplayName"],E),e}function py(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["tunedModels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>br(a))),r(e,["tuningJobs"],l)}return e}function my(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["metadata"]);s!=null&&r(e,["metadata"],s);const l=i(t,["done"]);l!=null&&r(e,["done"],l);const a=i(t,["error"]);return a!=null&&r(e,["error"],a),e}function gy(t){const e={},n=i(t,["checkpointId"]);n!=null&&r(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&r(e,["epoch"],o);const s=i(t,["step"]);s!=null&&r(e,["step"],s);const l=i(t,["endpoint"]);return l!=null&&r(e,["endpoint"],l),e}function hy(t){const e={},n=i(t,["model"]);n!=null&&r(e,["model"],n);const o=i(t,["endpoint"]);o!=null&&r(e,["endpoint"],o);const s=i(t,["checkpoints"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>gy(a))),r(e,["checkpoints"],l)}return e}function Cn(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["state"]);s!=null&&r(e,["state"],ur(s));const l=i(t,["createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["startTime"]);a!=null&&r(e,["startTime"],a);const u=i(t,["endTime"]);u!=null&&r(e,["endTime"],u);const d=i(t,["updateTime"]);d!=null&&r(e,["updateTime"],d);const c=i(t,["error"]);c!=null&&r(e,["error"],c);const f=i(t,["description"]);f!=null&&r(e,["description"],f);const p=i(t,["baseModel"]);p!=null&&r(e,["baseModel"],p);const m=i(t,["tunedModel"]);m!=null&&r(e,["tunedModel"],hy(m));const h=i(t,["preTunedModel"]);h!=null&&r(e,["preTunedModel"],h);const C=i(t,["supervisedTuningSpec"]);C!=null&&r(e,["supervisedTuningSpec"],C);const y=i(t,["tuningDataStats"]);y!=null&&r(e,["tuningDataStats"],y);const T=i(t,["encryptionSpec"]);T!=null&&r(e,["encryptionSpec"],T);const I=i(t,["partnerModelTuningSpec"]);I!=null&&r(e,["partnerModelTuningSpec"],I);const E=i(t,["customBaseModel"]);E!=null&&r(e,["customBaseModel"],E);const M=i(t,["experiment"]);M!=null&&r(e,["experiment"],M);const R=i(t,["labels"]);R!=null&&r(e,["labels"],R);const S=i(t,["outputUri"]);S!=null&&r(e,["outputUri"],S);const _=i(t,["pipelineJob"]);_!=null&&r(e,["pipelineJob"],_);const A=i(t,["serviceAccount"]);A!=null&&r(e,["serviceAccount"],A);const P=i(t,["tunedModelDisplayName"]);return P!=null&&r(e,["tunedModelDisplayName"],P),e}function yy(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["tuningJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Cn(a))),r(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vy extends _e{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new mt(Re.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel},s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let l="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?l=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(l=s.name.split("/operations/")[0]),{name:l,state:cn.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ry(e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>Cn(f))}else{const c=Zh(e);return u=D("{name}",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>br(f))}}async listInternal(e){var n,o,s,l;let a,u="",d={};if(this.apiClient.isVertexAI()){const c=ly(e);return u=D("tuningJobs",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=yy(f),m=new Zo;return Object.assign(m,p),m})}else{const c=ey(e);return u=D("tunedModels",c._url),d=c._query,delete c.config,delete c._url,delete c._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),a.then(f=>{const p=py(f),m=new Zo;return Object.assign(m,p),m})}}async tuneInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const u=dy(e);return l=D("tuningJobs",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>Cn(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iy(e);return l=D("tunedModels",u._url),a=u._query,delete u.config,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),s.then(d=>my(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cy{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Ty=1024*1024*8,xy=3,Sy=1e3,Iy=2,tn="x-goog-upload-status";async function Ey(t,e,n){var o,s,l;let a=0,u=0,d=new dn(new Response),c="upload";for(a=t.size;u<a;){const p=Math.min(Ty,a-u),m=t.slice(u,u+p);u+p>=a&&(c+=", finalize");let h=0,C=Sy;for(;h<xy&&(d=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((o=d==null?void 0:d.headers)===null||o===void 0)&&o[tn]));)h++,await Ay(C),C=C*Iy;if(u+=p,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[tn])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((l=d==null?void 0:d.headers)===null||l===void 0?void 0:l[tn])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function My(t){return{size:t.size,type:t.type}}function Ay(t){return new Promise(e=>setTimeout(e,t))}class Ry{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ey(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await My(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _y{create(e,n,o){return new wy(e,n,o)}}class wy{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ei="x-goog-api-key";class Py{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Ei)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ei,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dy="gl-node/";class Ny{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=pa(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const s=new Py(this.apiKey);this.apiClient=new Og({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Dy+"web",uploader:new Ry,downloader:new Cy}),this.models=new hh(this.apiClient),this.live=new uh(this.apiClient,s,new _y),this.batches=new Vu(this.apiClient),this.chats=new Jc(this.models,this.apiClient),this.caches=new Bc(this.apiClient),this.files=new od(this.apiClient),this.operations=new Th(this.apiClient),this.authTokens=new Qh(this.apiClient),this.tunings=new vy(this.apiClient)}}const by="PLACEHOLDER_API_KEY";let Ut=null;Ut=new Ny({apiKey:by});const nn=!!Ut,ky=async t=>{if(!Ut)return Promise.resolve("AI features are disabled. Please configure your API_KEY.");try{const e=`Generate a short, engaging, and professional bio (max 160 characters) for a 'link-in-bio' page. The bio should be based on these keywords: "${t}". The tone should be friendly yet professional. Do not use hashtags.`;return(await Ut.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{maxOutputTokens:50,temperature:.7}})).text.trim().replace(/^"|"$/g,"")}catch(e){return console.error("Error generating bio:",e),"Failed to generate bio. Please try again."}},Ly=({currentImageUrl:t,onImageUploaded:e,className:n=""})=>{const[o,s]=v.useState(!1),[l,a]=v.useState(null),u=v.useRef(null),d=async h=>{if(h){if(!h.type.startsWith("image/")){a("Please select an image file");return}if(h.size>5*1024*1024){a("File size must be less than 5MB");return}s(!0),a(null);try{const C=new FormData;C.append("image",h);const T=await(await fetch("/api/upload-image",{method:"POST",body:C})).json();T.success&&T.imageUrl?e(T.imageUrl):a(T.error||"Failed to upload image")}catch(C){console.error("Upload error:",C),a("Failed to upload image")}finally{s(!1)}}},c=h=>{h.preventDefault();const C=h.dataTransfer.files[0];C&&d(C)},f=h=>{h.preventDefault()},p=()=>{var h;(h=u.current)==null||h.click()},m=h=>{var y;const C=(y=h.target.files)==null?void 0:y[0];C&&d(C)};return g.jsxs("div",{className:n,children:[g.jsxs("div",{onClick:p,onDrop:c,onDragOver:f,className:`
          relative w-24 h-24 mx-auto rounded-full border-2 border-dashed border-gray-600 
          hover:border-gray-500 transition-colors cursor-pointer group overflow-hidden
          ${o?"pointer-events-none opacity-50":""}
        `,children:[t?g.jsxs("div",{className:"relative w-full h-full",children:[g.jsx("img",{src:t,alt:"Profile",className:"w-full h-full object-cover rounded-full"}),g.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:g.jsx(Hn,{size:16,className:"text-white"})})]}):g.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-500 group-hover:text-gray-400 transition-colors",children:[g.jsx(Hn,{size:20,className:"mb-1"}),g.jsx("span",{className:"text-xs",children:"Upload"})]}),o&&g.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:g.jsx(zr,{size:16,className:"text-white animate-spin"})})]}),g.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:m,className:"hidden"}),l&&g.jsx("p",{className:"text-red-400 text-sm mt-2 text-center",children:l}),g.jsxs("p",{className:"text-gray-500 text-xs mt-2 text-center",children:["Click or drag image to upload",g.jsx("br",{}),"Max 5MB, JPG/PNG"]})]})},Fy=({userData:t,setUserData:e})=>{const[n,o]=v.useState(""),[s,l]=v.useState(!1),a=(d,c)=>{e(f=>({...f,profile:{...f.profile,[d]:c}}))},u=async()=>{if(!n)return;l(!0);const d=await ky(n);a("bio",d),l(!1)};return g.jsx("div",{className:"space-y-6",children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-4",children:"Profile Picture"}),g.jsx(Ly,{currentImageUrl:t.profile.imageUrl,onImageUploaded:d=>a("imageUrl",d),className:"flex flex-col items-center"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"profile-name",className:"block text-sm font-medium text-gray-400 mb-2",children:"Profile Title"}),g.jsx("input",{id:"profile-name",type:"text",value:t.profile.name,onChange:d=>a("name",d.target.value),placeholder:"Your name or title","aria-label":"Profile title",className:"w-full px-4 py-2.5 bg-gray-900 border border-gray-700 rounded-lg text-white focus:ring-blue-500 focus:border-blue-500 transition"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"profile-bio",className:"block text-sm font-medium text-gray-400 mb-2",children:"Bio"}),g.jsx("textarea",{id:"profile-bio",value:t.profile.bio,onChange:d=>a("bio",d.target.value),rows:3,placeholder:"Tell your audience about yourself","aria-label":"Profile bio",className:"w-full px-4 py-2.5 bg-gray-900 border border-gray-700 rounded-lg text-white focus:ring-blue-500 focus:border-blue-500 transition"})]}),g.jsxs("div",{className:"p-4 bg-gray-900 rounded-lg border border-gray-800",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Generate Bio with AI"}),g.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Describe yourself in a few keywords."}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx("input",{type:"text",placeholder:"e.g., 'React developer, coffee lover'",value:n,onChange:d=>o(d.target.value),disabled:!nn||s,className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-800/50"}),g.jsx("button",{onClick:u,disabled:!nn||s||!n,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:bg-purple-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 w-40",children:s?g.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):g.jsxs(g.Fragment,{children:[g.jsx(ss,{className:"w-5 h-5"})," Generate"]})})]}),!nn&&g.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"AI features disabled. Set API_KEY to enable."})]})]})})},Uy=({userData:t,setUserData:e})=>{const{themeSettings:n}=t,[o,s]=v.useState("colors"),l=(u,d)=>{e(c=>({...c,themeSettings:{...c.themeSettings,[u]:d}}))},a=()=>{e(u=>({...u,themeSettings:Mi}))};return g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Theme Settings"}),g.jsx("p",{className:"text-sm text-gray-400",children:"Customize the appearance of your page"})]}),g.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",children:"Reset Defaults"})]}),g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(ls,{className:"w-6 h-6 text-gray-400"}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Dark Mode"}),g.jsx("p",{className:"text-sm text-gray-500",children:"Switch between light and dark theme"})]})]}),g.jsx("label",{htmlFor:"dark-mode-toggle",className:"flex items-center cursor-pointer",title:"Toggle dark mode",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"checkbox",id:"dark-mode-toggle",className:"sr-only",checked:n.isDarkMode,onChange:u=>l("isDarkMode",u.target.checked),"aria-label":"Toggle dark mode",title:"Toggle dark mode"}),g.jsx("div",{className:"block bg-gray-700 w-12 h-7 rounded-full"}),g.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-5 h-5 rounded-full transition-transform ${n.isDarkMode?"translate-x-5":""}`})]})})]}),g.jsxs("div",{className:"p-1 flex space-x-1 bg-gray-900 rounded-lg",children:[g.jsx("button",{onClick:()=>s("colors"),className:`w-full py-2 text-sm font-semibold rounded-md ${o==="colors"?"bg-gray-800":"hover:bg-gray-800/50"}`,children:"Colors"}),g.jsx("button",{onClick:()=>s("background"),className:`w-full py-2 text-sm font-semibold rounded-md ${o==="background"?"bg-gray-800":"hover:bg-gray-800/50"}`,children:"Background"}),g.jsx("button",{onClick:()=>s("effects"),className:`w-full py-2 text-sm font-semibold rounded-md ${o==="effects"?"bg-gray-800":"hover:bg-gray-800/50"}`,children:"Effects"})]}),o==="colors"&&g.jsxs("div",{className:"space-y-8 animate-fade-in",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Color Theme"}),g.jsx("div",{className:"grid grid-cols-4 gap-4 mt-3",children:Ot.map(u=>{const d=n.isDarkMode?u.dark:u.light;return g.jsxs("button",{onClick:()=>l("colorPaletteId",u.id),className:`text-center space-y-2 p-3 rounded-lg border-2 transition-colors focus:outline-none ${n.colorPaletteId===u.id?"border-blue-500 bg-gray-900":"border-gray-800 bg-gray-900/50 hover:border-gray-700"}`,children:[g.jsxs("div",{className:"w-10 h-10 mx-auto rounded-full overflow-hidden flex items-center justify-center border border-white/10",children:[g.jsx("div",{style:{backgroundColor:d.primary},className:"w-1/2 h-full"}),g.jsx("div",{className:"w-[3px] h-full bg-gray-900"}),g.jsx("div",{style:{backgroundColor:d.secondary},className:"w-1/2 h-full"})]}),g.jsx("p",{className:"text-sm font-medium capitalize",children:u.name})]},u.id)})})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Theme Preview"}),g.jsx("div",{className:"p-4 bg-gray-900 rounded-lg mt-3 space-y-4 border border-gray-800",children:(()=>{const u=Ot.find(f=>f.id===n.colorPaletteId)||Ot[0],d=n.isDarkMode?u.dark:u.light;return[{label:"Primary",color:d.primary},{label:"Secondary",color:d.secondary},{label:"Accent",color:d.accent}].map(f=>g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{style:{backgroundColor:f.color},className:"w-8 h-8 rounded-full border-2 border-white/10"}),g.jsx("span",{className:"text-sm text-gray-300",children:f.label})]},f.label))})()})]})]}),o==="background"&&g.jsxs("div",{className:"space-y-6 animate-fade-in",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Page Background Color"}),g.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Choose a background color for your page"}),g.jsx("div",{className:"grid grid-cols-4 gap-4",children:Xr.map(u=>g.jsx("button",{onClick:()=>l("backgroundColorId",u.id),className:`w-full h-12 rounded-lg border-2 ${n.backgroundColorId===u.id?"border-blue-500":"border-gray-700 hover:border-gray-500"} ${n.isDarkMode?u.dark:u.light}`,"aria-label":`Select background color ${u.id}`,title:`Select background color ${u.id}`},u.id))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Background Pattern"}),g.jsx("div",{className:"grid grid-cols-2 gap-4 mt-3",children:Object.entries(_i).map(([u,d])=>g.jsxs("button",{onClick:()=>l("backgroundPattern",u),className:`p-3 rounded-lg border-2 text-left ${n.backgroundPattern===u?"border-blue-500":"border-gray-800 bg-gray-900 hover:border-gray-700"}`,children:[g.jsx("div",{className:`h-16 rounded-md bg-gray-800 mb-2 ${d.class}`}),g.jsx("h5",{className:"font-medium text-white",children:d.name}),g.jsx("p",{className:"text-xs text-gray-500",children:d.description})]},u))})]})]}),o==="effects"&&g.jsxs("div",{className:"space-y-6 animate-fade-in",children:[g.jsxs("div",{className:"flex justify-between items-center bg-gray-900 p-3 rounded-lg border border-gray-800",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white",children:"Card Shadow"}),g.jsx("p",{className:"text-sm text-gray-500",children:"Add shadows to cards for depth"})]}),g.jsx("label",{htmlFor:"shadow-toggle",className:"flex items-center cursor-pointer",title:"Toggle card shadow",children:g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"checkbox",id:"shadow-toggle",className:"sr-only",checked:n.cardShadow,onChange:u=>l("cardShadow",u.target.checked),"aria-label":"Toggle card shadow",title:"Toggle card shadow"}),g.jsx("div",{className:"block bg-gray-700 w-12 h-7 rounded-full"}),g.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-5 h-5 rounded-full transition-transform ${n.cardShadow?"translate-x-5":""}`})]})})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white mb-2",children:"Border Radius"}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:Or.map(u=>g.jsx("button",{onClick:()=>l("borderRadius",u.id),className:`py-2 text-sm font-semibold rounded-md ${n.borderRadius===u.id?"bg-blue-600 text-white":"bg-gray-800 hover:bg-gray-700"}`,children:u.name},u.id))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-semibold text-white mb-2",children:"Font Family"}),g.jsx("div",{className:"space-y-3",children:Qr.map(u=>g.jsxs("button",{onClick:()=>l("fontFamily",u.id),className:`block w-full text-left p-4 rounded-lg border-2 ${n.fontFamily===u.id?"border-blue-500 bg-gray-900":"border-gray-800 bg-gray-900 hover:border-gray-700"}`,children:[g.jsx("p",{className:`text-lg font-medium text-white ${u.class}`,children:u.name}),g.jsx("p",{className:`text-sm text-gray-400 mt-1 ${u.class}`,children:u.previewText}),g.jsx("p",{className:"text-xs text-gray-500 mt-2",children:u.description})]},u.id))})]})]})]})},x=(t,e,n)=>{const o={isDarkMode:!0,colorPaletteId:"default",backgroundColorId:"default",backgroundPattern:"none",cardShadow:!0,borderRadius:"md",fontFamily:"sans"};return{id:`${t}-${e}`,name:`${t.charAt(0).toUpperCase()+t.slice(1)} #${e}`,description:`A unique design from the ${t} collection.`,themeSettings:{...o,...n}}},on=[{id:"minimal",name:"Minimal & Clean",description:"Simple, modern, and professional designs with a focus on typography and whitespace.",templates:[x("minimal",1,{isDarkMode:!1,colorPaletteId:"default",borderRadius:"sm",fontFamily:"sans"}),x("minimal",2,{isDarkMode:!0,colorPaletteId:"stone",backgroundColorId:"slate",borderRadius:"md",fontFamily:"sans"}),x("minimal",3,{isDarkMode:!1,colorPaletteId:"silver",cardShadow:!1,borderRadius:"none",fontFamily:"sans"}),x("minimal",4,{isDarkMode:!0,colorPaletteId:"slate",backgroundPattern:"dots",borderRadius:"sm",fontFamily:"sans"}),x("minimal",5,{isDarkMode:!1,colorPaletteId:"default",backgroundColorId:"blue",borderRadius:"lg",fontFamily:"serif"}),x("minimal",6,{isDarkMode:!0,colorPaletteId:"silver",backgroundColorId:"default",cardShadow:!1,borderRadius:"md",fontFamily:"sans"}),x("minimal",7,{isDarkMode:!1,colorPaletteId:"stone",borderRadius:"none",fontFamily:"serif"}),x("minimal",8,{isDarkMode:!0,colorPaletteId:"default",backgroundPattern:"lines",borderRadius:"sm",fontFamily:"sans"}),x("minimal",9,{isDarkMode:!1,colorPaletteId:"slate",backgroundColorId:"slate",borderRadius:"md",fontFamily:"sans"}),x("minimal",10,{isDarkMode:!0,colorPaletteId:"indigo",cardShadow:!0,borderRadius:"lg",fontFamily:"sans"}),x("minimal",11,{isDarkMode:!1,colorPaletteId:"mint",borderRadius:"sm",fontFamily:"sans"}),x("minimal",12,{isDarkMode:!0,colorPaletteId:"default",backgroundColorId:"slate",borderRadius:"none",fontFamily:"serif"}),x("minimal",13,{isDarkMode:!1,colorPaletteId:"stone",cardShadow:!1,borderRadius:"lg",fontFamily:"sans"}),x("minimal",14,{isDarkMode:!0,colorPaletteId:"silver",backgroundPattern:"dots",borderRadius:"md",fontFamily:"sans"}),x("minimal",15,{isDarkMode:!1,colorPaletteId:"sky",borderRadius:"sm",fontFamily:"serif"})]},{id:"bold",name:"Bold & Vibrant",description:"High-contrast, energetic themes that make a strong statement with vivid colors.",templates:[x("bold",1,{colorPaletteId:"rose",backgroundPattern:"lines",borderRadius:"none"}),x("bold",2,{isDarkMode:!1,colorPaletteId:"crimson",backgroundColorId:"orange",borderRadius:"sm"}),x("bold",3,{colorPaletteId:"lemon",backgroundColorId:"yellow",borderRadius:"lg"}),x("bold",4,{isDarkMode:!1,colorPaletteId:"coral",fontFamily:"serif",borderRadius:"md"}),x("bold",5,{colorPaletteId:"orange",backgroundPattern:"waves",borderRadius:"none"}),x("bold",6,{colorPaletteId:"gold",backgroundColorId:"orange",borderRadius:"lg"}),x("bold",7,{isDarkMode:!1,colorPaletteId:"pink",borderRadius:"sm",cardShadow:!1}),x("bold",8,{colorPaletteId:"crimson",backgroundPattern:"dots",borderRadius:"md",fontFamily:"serif"}),x("bold",9,{isDarkMode:!1,colorPaletteId:"rose",backgroundColorId:"pink",borderRadius:"lg"}),x("bold",10,{colorPaletteId:"lemon",borderRadius:"none"}),x("bold",11,{isDarkMode:!0,colorPaletteId:"coral",backgroundColorId:"default",borderRadius:"sm"}),x("bold",12,{isDarkMode:!1,colorPaletteId:"orange",backgroundPattern:"lines",borderRadius:"md"}),x("bold",13,{colorPaletteId:"gold",fontFamily:"serif",borderRadius:"lg"}),x("bold",14,{isDarkMode:!1,colorPaletteId:"pink",cardShadow:!1,borderRadius:"none"}),x("bold",15,{colorPaletteId:"crimson",backgroundColorId:"slate",borderRadius:"md"})]},{id:"elegant",name:"Elegant & Professional",description:"Sophisticated and polished themes, perfect for corporate or personal branding.",templates:[x("elegant",1,{isDarkMode:!0,colorPaletteId:"navy",fontFamily:"serif",borderRadius:"sm"}),x("elegant",2,{isDarkMode:!1,colorPaletteId:"indigo",backgroundColorId:"blue",borderRadius:"md"}),x("elegant",3,{isDarkMode:!0,colorPaletteId:"chocolate",fontFamily:"serif",borderRadius:"none"}),x("elegant",4,{isDarkMode:!1,colorPaletteId:"gold",backgroundColorId:"yellow",cardShadow:!1,borderRadius:"lg"}),x("elegant",5,{isDarkMode:!0,colorPaletteId:"slate",backgroundPattern:"dots",borderRadius:"sm"}),x("elegant",6,{isDarkMode:!1,colorPaletteId:"default",fontFamily:"serif",borderRadius:"md"}),x("elegant",7,{isDarkMode:!0,colorPaletteId:"stone",backgroundColorId:"slate",borderRadius:"sm"}),x("elegant",8,{isDarkMode:!1,colorPaletteId:"silver",cardShadow:!1,borderRadius:"lg",fontFamily:"serif"}),x("elegant",9,{isDarkMode:!0,colorPaletteId:"navy",backgroundPattern:"lines",borderRadius:"none"}),x("elegant",10,{isDarkMode:!1,colorPaletteId:"chocolate",backgroundColorId:"orange",borderRadius:"md"}),x("elegant",11,{isDarkMode:!0,colorPaletteId:"indigo",fontFamily:"serif",borderRadius:"sm"}),x("elegant",12,{isDarkMode:!1,colorPaletteId:"gold",borderRadius:"lg"}),x("elegant",13,{isDarkMode:!0,colorPaletteId:"default",backgroundColorId:"default",borderRadius:"sm",fontFamily:"serif"}),x("elegant",14,{isDarkMode:!1,colorPaletteId:"slate",backgroundPattern:"dots",borderRadius:"md"}),x("elegant",15,{isDarkMode:!0,colorPaletteId:"stone",cardShadow:!1,borderRadius:"none"})]},{id:"dark",name:"Dark & Moody",description:"Atmospheric and immersive themes using deep, rich colors and high contrast.",templates:[x("dark",1,{colorPaletteId:"purple",backgroundColorId:"purple",backgroundPattern:"waves"}),x("dark",2,{colorPaletteId:"crimson",backgroundColorId:"slate",borderRadius:"none"}),x("dark",3,{colorPaletteId:"teal",backgroundColorId:"default",cardShadow:!1}),x("dark",4,{colorPaletteId:"indigo",backgroundColorId:"slate",backgroundPattern:"lines",borderRadius:"sm"}),x("dark",5,{colorPaletteId:"navy",backgroundColorId:"blue",borderRadius:"lg",fontFamily:"serif"}),x("dark",6,{colorPaletteId:"chocolate",backgroundColorId:"orange",borderRadius:"md"}),x("dark",7,{colorPaletteId:"slate",backgroundColorId:"slate",backgroundPattern:"dots",borderRadius:"sm"}),x("dark",8,{colorPaletteId:"emerald",backgroundColorId:"green",fontFamily:"serif"}),x("dark",9,{colorPaletteId:"rose",backgroundColorId:"pink",borderRadius:"none"}),x("dark",10,{colorPaletteId:"purple",backgroundPattern:"lines",borderRadius:"sm",cardShadow:!1}),x("dark",11,{colorPaletteId:"crimson",backgroundColorId:"default",borderRadius:"md"}),x("dark",12,{colorPaletteId:"teal",backgroundColorId:"slate",fontFamily:"serif"}),x("dark",13,{colorPaletteId:"indigo",backgroundPattern:"waves",borderRadius:"lg"}),x("dark",14,{colorPaletteId:"navy",backgroundColorId:"default",borderRadius:"sm"}),x("dark",15,{colorPaletteId:"chocolate",cardShadow:!1,borderRadius:"none"})]},{id:"playful",name:"Playful & Creative",description:"Fun, quirky, and imaginative themes perfect for artists, creators, and streamers.",templates:[x("playful",1,{isDarkMode:!1,colorPaletteId:"sky",backgroundColorId:"blue",borderRadius:"lg",backgroundPattern:"dots"}),x("playful",2,{colorPaletteId:"lemon",backgroundColorId:"yellow",borderRadius:"lg",cardShadow:!1}),x("playful",3,{isDarkMode:!0,colorPaletteId:"pink",borderRadius:"lg",fontFamily:"serif",backgroundPattern:"waves"}),x("playful",4,{isDarkMode:!1,colorPaletteId:"coral",backgroundColorId:"orange",borderRadius:"lg"}),x("playful",5,{colorPaletteId:"lavender",backgroundColorId:"purple",borderRadius:"lg",fontFamily:"serif"}),x("playful",6,{isDarkMode:!1,colorPaletteId:"mint",backgroundColorId:"green",borderRadius:"lg"}),x("playful",7,{colorPaletteId:"peach",backgroundColorId:"orange",borderRadius:"lg",backgroundPattern:"dots"}),x("playful",8,{isDarkMode:!1,colorPaletteId:"rose",borderRadius:"lg",cardShadow:!1,fontFamily:"serif"}),x("playful",9,{colorPaletteId:"sky",backgroundColorId:"slate",borderRadius:"lg",backgroundPattern:"lines"}),x("playful",10,{isDarkMode:!1,colorPaletteId:"lemon",borderRadius:"lg"}),x("playful",11,{colorPaletteId:"pink",backgroundColorId:"pink",borderRadius:"lg"}),x("playful",12,{isDarkMode:!1,colorPaletteId:"coral",borderRadius:"lg",fontFamily:"serif"}),x("playful",13,{colorPaletteId:"lavender",backgroundPattern:"waves",borderRadius:"lg"}),x("playful",14,{isDarkMode:!1,colorPaletteId:"mint",cardShadow:!1,borderRadius:"lg"}),x("playful",15,{colorPaletteId:"peach",backgroundColorId:"default",borderRadius:"lg",fontFamily:"serif"})]},{id:"natural",name:"Natural & Earthy",description:"Calm and organic themes inspired by nature, featuring earthy tones and textures.",templates:[x("natural",1,{colorPaletteId:"green",backgroundColorId:"green",fontFamily:"serif"}),x("natural",2,{isDarkMode:!1,colorPaletteId:"olive",backgroundColorId:"yellow",borderRadius:"sm"}),x("natural",3,{colorPaletteId:"stone",backgroundColorId:"slate",backgroundPattern:"waves",fontFamily:"serif"}),x("natural",4,{isDarkMode:!1,colorPaletteId:"peach",backgroundColorId:"orange",borderRadius:"md"}),x("natural",5,{colorPaletteId:"chocolate",backgroundColorId:"default",fontFamily:"serif",borderRadius:"sm"}),x("natural",6,{isDarkMode:!1,colorPaletteId:"mint",backgroundColorId:"green",cardShadow:!1,borderRadius:"lg"}),x("natural",7,{colorPaletteId:"emerald",backgroundColorId:"green",backgroundPattern:"dots"}),x("natural",8,{isDarkMode:!1,colorPaletteId:"stone",fontFamily:"serif",borderRadius:"sm"}),x("natural",9,{colorPaletteId:"olive",backgroundColorId:"slate",borderRadius:"md"}),x("natural",10,{isDarkMode:!1,colorPaletteId:"green",backgroundPattern:"waves",borderRadius:"lg"}),x("natural",11,{colorPaletteId:"peach",backgroundColorId:"default",fontFamily:"serif"}),x("natural",12,{isDarkMode:!1,colorPaletteId:"chocolate",borderRadius:"sm",cardShadow:!1}),x("natural",13,{colorPaletteId:"mint",backgroundColorId:"slate",fontFamily:"serif"}),x("natural",14,{isDarkMode:!1,colorPaletteId:"emerald",backgroundPattern:"dots",borderRadius:"md"}),x("natural",15,{colorPaletteId:"stone",backgroundColorId:"green",borderRadius:"lg"})]},{id:"futuristic",name:"Futuristic & Tech",description:"Sleek, modern, and high-tech designs with sharp lines and cool color palettes.",templates:[x("futuristic",1,{colorPaletteId:"blue",backgroundColorId:"slate",borderRadius:"none",backgroundPattern:"lines"}),x("futuristic",2,{colorPaletteId:"sky",backgroundColorId:"blue",cardShadow:!1,borderRadius:"sm"}),x("futuristic",3,{colorPaletteId:"indigo",backgroundColorId:"purple",borderRadius:"none"}),x("futuristic",4,{colorPaletteId:"teal",backgroundColorId:"default",backgroundPattern:"dots",borderRadius:"sm"}),x("futuristic",5,{colorPaletteId:"slate",backgroundColorId:"slate",fontFamily:"sans",borderRadius:"none"}),x("futuristic",6,{colorPaletteId:"purple",backgroundColorId:"purple",backgroundPattern:"lines",borderRadius:"none"}),x("futuristic",7,{colorPaletteId:"navy",backgroundColorId:"blue",cardShadow:!1,borderRadius:"sm"}),x("futuristic",8,{isDarkMode:!1,colorPaletteId:"silver",borderRadius:"none",fontFamily:"sans"}),x("futuristic",9,{colorPaletteId:"blue",backgroundPattern:"waves",borderRadius:"sm"}),x("futuristic",10,{colorPaletteId:"sky",backgroundColorId:"slate",borderRadius:"none"}),x("futuristic",11,{colorPaletteId:"indigo",cardShadow:!1,borderRadius:"sm"}),x("futuristic",12,{colorPaletteId:"teal",backgroundPattern:"lines",borderRadius:"none"}),x("futuristic",13,{colorPaletteId:"slate",backgroundColorId:"default",borderRadius:"sm"}),x("futuristic",14,{colorPaletteId:"purple",cardShadow:!1,borderRadius:"none"}),x("futuristic",15,{colorPaletteId:"navy",backgroundPattern:"dots",borderRadius:"sm"})]},{id:"soft",name:"Soft & Pastel",description:"Gentle, light, and dreamy themes featuring soft color palettes and a calming aesthetic.",templates:[x("soft",1,{isDarkMode:!1,colorPaletteId:"lavender",backgroundColorId:"purple",borderRadius:"lg",cardShadow:!1}),x("soft",2,{isDarkMode:!1,colorPaletteId:"peach",backgroundColorId:"orange",borderRadius:"lg",fontFamily:"serif"}),x("soft",3,{isDarkMode:!1,colorPaletteId:"pink",backgroundColorId:"pink",backgroundPattern:"dots",borderRadius:"lg"}),x("soft",4,{isDarkMode:!1,colorPaletteId:"mint",backgroundColorId:"green",borderRadius:"lg"}),x("soft",5,{isDarkMode:!1,colorPaletteId:"sky",backgroundColorId:"blue",borderRadius:"lg",fontFamily:"serif"}),x("soft",6,{isDarkMode:!1,colorPaletteId:"rose",backgroundColorId:"pink",cardShadow:!1,borderRadius:"lg"}),x("soft",7,{isDarkMode:!1,colorPaletteId:"coral",backgroundColorId:"orange",backgroundPattern:"waves",borderRadius:"lg"}),x("soft",8,{isDarkMode:!1,colorPaletteId:"default",backgroundColorId:"default",borderRadius:"lg",fontFamily:"serif"}),x("soft",9,{isDarkMode:!1,colorPaletteId:"lavender",backgroundPattern:"dots",borderRadius:"lg"}),x("soft",10,{isDarkMode:!1,colorPaletteId:"peach",cardShadow:!1,borderRadius:"lg"}),x("soft",11,{isDarkMode:!1,colorPaletteId:"pink",fontFamily:"serif",borderRadius:"lg"}),x("soft",12,{isDarkMode:!1,colorPaletteId:"mint",backgroundColorId:"default",borderRadius:"lg"}),x("soft",13,{isDarkMode:!1,colorPaletteId:"sky",backgroundPattern:"waves",borderRadius:"lg",cardShadow:!1}),x("soft",14,{isDarkMode:!1,colorPaletteId:"rose",backgroundColorId:"default",borderRadius:"lg",fontFamily:"serif"}),x("soft",15,{isDarkMode:!1,colorPaletteId:"coral",backgroundColorId:"pink",borderRadius:"lg"})]}],Vy=({themeSettings:t})=>{const{backgroundClass:e,buttonClass:n,borderRadiusClass:o,shadowClass:s}=Ri(t),l=_i[t.backgroundPattern].class,u=(d=>d?"bg-gray-400/50":"bg-gray-600/50")(t.isDarkMode);return g.jsxs("div",{className:`relative w-full h-40 overflow-hidden ${e}`,children:[g.jsx("div",{className:`absolute inset-0 ${l}`}),g.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-start pt-6 h-full w-full",children:[g.jsx("div",{className:`w-10 h-10 rounded-full mb-2 ${u} opacity-50`}),g.jsx("div",{className:`h-3 w-16 rounded-sm mb-1 ${u} opacity-80`}),g.jsx("div",{className:`h-2 w-24 rounded-sm ${u} opacity-60 mb-3`}),g.jsxs("div",{className:"space-y-1.5 w-full px-8",children:[g.jsx("div",{className:`h-5 w-full ${n} ${o} ${s}`}),g.jsx("div",{className:`h-5 w-full ${n} ${o} ${s}`})]})]})]})},Gy=({onApply:t})=>{const[e,n]=v.useState(on[0].id),o=on.find(s=>s.id===e);return g.jsxs("div",{className:"flex gap-8 h-[70vh]",children:[g.jsxs("aside",{className:"w-1/4 xl:w-1/5 pr-4 border-r border-gray-800 space-y-2 overflow-y-auto",children:[g.jsx("h3",{className:"text-base font-semibold text-white px-2 mb-4",children:"Categories"}),on.map(s=>g.jsx("button",{onClick:()=>n(s.id),className:`w-full text-left px-3 py-2.5 rounded-lg text-sm transition-colors ${e===s.id?"bg-blue-600 text-white font-semibold":"text-gray-300 hover:bg-gray-800"}`,children:s.name},s.id))]}),g.jsx("main",{className:"w-3/4 xl:w-4/5 overflow-y-auto pl-4",children:o&&g.jsxs(g.Fragment,{children:[g.jsx("h4",{className:"font-bold text-white text-2xl mb-2",children:o.name}),g.jsx("p",{className:"text-gray-400 mb-6 max-w-2xl",children:o.description}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.templates.map(s=>g.jsxs("div",{className:"bg-gray-900 rounded-lg border border-gray-800 overflow-hidden group transition-all hover:border-blue-500/50 hover:shadow-2xl hover:shadow-blue-500/10",children:[g.jsx(Vy,{themeSettings:s.themeSettings}),g.jsxs("div",{className:"p-4",children:[g.jsx("h4",{className:"font-semibold text-white text-lg",children:s.name}),g.jsx("p",{className:"text-sm text-gray-400 mt-1 mb-4",children:s.description}),g.jsx("button",{onClick:()=>t(s.themeSettings),className:"w-full py-2.5 px-4 text-sm font-semibold rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-950",children:"Apply Template"})]})]},s.id))})]})})]})},qy=({children:t,onClose:e})=>g.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 animate-fade-in",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"template-modal-title",children:g.jsxs("div",{className:"bg-gray-950 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col border border-gray-800",onClick:n=>n.stopPropagation(),children:[g.jsxs("div",{className:"sticky top-0 bg-gray-950/80 backdrop-blur-sm p-6 border-b border-gray-800 flex justify-between items-center z-10 flex-shrink-0",children:[g.jsx("h2",{id:"template-modal-title",className:"text-2xl font-bold text-white",children:"Templates"}),g.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-white rounded-full hover:bg-gray-800 transition-colors","aria-label":"Close templates dialog",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsx("div",{className:"p-6 md:p-8 flex-grow overflow-y-hidden",children:t})]})}),rn=({isActive:t,onClick:e,children:n})=>g.jsx("button",{onClick:e,className:`w-full py-2.5 px-1 flex items-center justify-center gap-2 text-sm font-semibold rounded-md transition-colors ${t?"bg-gray-800 text-white":"text-gray-400 hover:text-white"}`,children:n}),Yy=Hr(function(){const[e,n,o]=jr(),[s,l]=v.useState("profile"),[a,u]=v.useState(!1),[d,c]=v.useState(!1),[f,p]=v.useState(null),[m,h]=v.useState(!1),C=T=>{n(I=>({...I,themeSettings:T})),u(!1)},y=async()=>{c(!0);try{const T=await wi.saveUserData(e);p(T),T.success&&(h(!0),setTimeout(()=>h(!1),3e3))}catch(T){p({success:!1,error:T instanceof Error?T.message:"Failed to save"})}finally{c(!1)}};return o?g.jsx("div",{className:"min-h-screen bg-gray-900 text-gray-300 flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),g.jsx("p",{className:"text-gray-400",children:"Loading editor..."})]})}):g.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-300",children:[g.jsx("header",{className:"bg-gray-950/80 backdrop-blur-sm border-b border-gray-800 sticky top-0 z-20",children:g.jsxs("div",{className:"container mx-auto px-6 py-3 flex justify-between items-center",children:[g.jsx("h1",{className:"text-xl font-bold text-white",children:"AI Link-in-Bio"}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm font-semibold shadow-md flex items-center gap-2",children:[g.jsx(as,{className:"w-5 h-5"}),"Templates"]}),g.jsx("button",{onClick:y,disabled:d,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-semibold shadow-md",children:d?"Saving...":"Save"}),g.jsx($r,{to:"/",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-semibold shadow-md",children:"View Homepage"})]})]})}),g.jsxs("main",{className:"container mx-auto p-4 md:p-6 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[g.jsxs("div",{className:"lg:col-span-2 bg-black rounded-xl shadow-2xl p-6",children:[g.jsx("div",{className:"mb-6",children:g.jsxs("div",{className:"p-1 flex space-x-1 bg-gray-900/80 rounded-lg",children:[g.jsxs(rn,{isActive:s==="profile",onClick:()=>l("profile"),children:[g.jsx(ts,{className:"w-5 h-5"})," Profile"]}),g.jsxs(rn,{isActive:s==="links",onClick:()=>l("links"),children:[g.jsx(es,{className:"w-5 h-5"})," Links"]}),g.jsxs(rn,{isActive:s==="theme",onClick:()=>l("theme"),children:[g.jsx(ns,{className:"w-5 h-5"})," Theme"]})]})}),s==="profile"&&g.jsx(Fy,{userData:e,setUserData:n}),s==="links"&&g.jsx(ua,{userData:e,setUserData:n}),s==="theme"&&g.jsx(Uy,{userData:e,setUserData:n})]}),g.jsx("div",{className:"lg:col-span-1",children:g.jsx("div",{className:"sticky top-24",children:g.jsxs("div",{className:"relative mx-auto border-gray-800 bg-gray-800 border-[14px] rounded-[2.5rem] h-[650px] w-[375px] shadow-2xl shadow-blue-500/10",children:[g.jsx("div",{className:"w-[160px] h-[18px] bg-gray-800 top-0 rounded-b-[1rem] left-1/2 -translate-x-1/2 absolute"}),g.jsx("div",{className:"h-[46px] w-[3px] bg-gray-800 absolute -start-[17px] top-[124px] rounded-s-lg"}),g.jsx("div",{className:"h-[46px] w-[3px] bg-gray-800 absolute -start-[17px] top-[178px] rounded-s-lg"}),g.jsx("div",{className:"h-[64px] w-[3px] bg-gray-800 absolute -end-[17px] top-[142px] rounded-e-lg"}),g.jsx("div",{className:"rounded-[2rem] overflow-hidden w-full h-full bg-white",children:g.jsx(Zr,{userData:e,isPreview:!0})})]})})})]}),m&&(f==null?void 0:f.success)&&g.jsxs("div",{className:"fixed top-20 right-4 bg-green-600 text-white p-4 rounded-lg shadow-lg z-30 max-w-sm",children:[g.jsx("div",{className:"font-semibold",children:"Page saved successfully!"}),f.error&&g.jsx("div",{className:"text-sm mt-1 opacity-80",children:f.error})]}),f&&!f.success&&g.jsxs("div",{className:"fixed top-20 right-4 bg-red-600 text-white p-4 rounded-lg shadow-lg z-30 max-w-sm",children:[g.jsx("div",{className:"font-semibold mb-1",children:"Save failed"}),g.jsx("div",{className:"text-sm",children:f.error})]}),a&&g.jsx(qy,{onClose:()=>u(!1),children:g.jsx(Gy,{onApply:C})})]})});export{Yy as default};
